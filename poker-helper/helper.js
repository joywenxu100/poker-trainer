// å®æˆ˜è¡ŒåŠ¨æŒ‡å— V4.0 - å®Œæ•´è¡—é“è¦†ç›–ç‰ˆ
// æ ¸å¿ƒåŠŸèƒ½ï¼šåˆ†è¡—é“å¿«é€Ÿåœºæ™¯ + è‡ªå®šä¹‰è¾“å…¥ + å…¨å±è­¦å‘Š + ä¸ªäººé”™è¯¯æé†’

let state = {
    position: 'ip',
    street: 'turn',
    hand: 'top-two',
    action: 'check',
    villain: 'unknown',
    danger: 'dangerous'
};

// è¡—é“åˆ‡æ¢
function switchStreet(street) {
    document.querySelectorAll('.street-tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.scenario-panel').forEach(p => p.classList.remove('active'));
    
    // ä½¿ç”¨data-tabå±æ€§é€‰æ‹©ï¼Œæ›´ç¨³å®š
    const tab = document.querySelector(`.street-tab[data-tab="${street}"]`);
    if (tab) tab.classList.add('active');
    
    const panel = document.getElementById(`panel-${street}`);
    if (panel) panel.classList.add('active');
    
    // éšè—ç»“æœå’Œè‡ªå®šä¹‰æ¨¡å¼
    document.getElementById('resultSection').classList.remove('show');
    document.getElementById('customMode').classList.remove('show');
}

// è¿”å›åœºæ™¯åˆ—è¡¨
function goBack() {
    document.getElementById('resultSection').classList.remove('show');
    document.getElementById('fullscreenWarning').classList.remove('show');
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

// åˆå§‹åŒ–æŒ‰é’®äº‹ä»¶
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('[data-position],[data-street],[data-hand],[data-action],[data-villain],[data-danger]').forEach(btn => {
        btn.addEventListener('click', function() {
            const group = btn.closest('.btn-grid');
            group.querySelectorAll('.btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            if(btn.dataset.position) state.position = btn.dataset.position;
            if(btn.dataset.street) state.street = btn.dataset.street;
            if(btn.dataset.hand) state.hand = btn.dataset.hand;
            if(btn.dataset.action) state.action = btn.dataset.action;
            if(btn.dataset.villain) state.villain = btn.dataset.villain;
            if(btn.dataset.danger) state.danger = btn.dataset.danger;
        });
    });
});

// åˆ‡æ¢è‡ªå®šä¹‰æ¨¡å¼
function toggleCustomMode() {
    const el = document.getElementById('customMode');
    el.classList.toggle('show');
    if (el.classList.contains('show')) {
        el.scrollIntoView({ behavior: 'smooth' });
    }
}

// åˆ‡æ¢è®¾ç½®é¢æ¿
function toggleSettings() {
    document.getElementById('settingsPanel').classList.toggle('show');
}

// ==================== å¿«é€Ÿåœºæ™¯åº“ ====================
function quickScenario(scenario) {
    let result = { cards: [], warning: null, fullscreen: false };
    
    // ========== ç¿»å‰åœºæ™¯ ==========
    
    if (scenario === 'preflop-aa-raise') {
        result.cards = [{
            type: 'success',
            title: 'ğŸš€ ã€è¡ŒåŠ¨ã€‘3-bet åˆ° 3-4x å¯¹æ‰‹åŠ æ³¨é¢',
            content: `ã€AA/KKé¢å¯¹åŠ æ³¨ã€‘

âœ… æ ‡å‡†æ‰“æ³•ï¼š
â€¢ å¯¹æ‰‹åŠ æ³¨3BB â†’ ä½ 3-betåˆ°9-12BB
â€¢ å¯¹æ‰‹åŠ æ³¨2.5BB â†’ ä½ 3-betåˆ°8-10BB
â€¢ æœ‰è·Ÿæ³¨è€… â†’ æ¯å¤š1äºº+1BB

âš ï¸ å¦‚æœè¢«4-betï¼š
â€¢ AA â†’ ç›´æ¥5-betå…¨ä¸‹
â€¢ KK â†’ è¯„ä¼°å¯¹æ‰‹èŒƒå›´ï¼ˆç´§å‡¶å¯èƒ½å¼ƒç‰Œï¼‰

ğŸš¨ã€ç»ä¸è¦åšã€‘
âŒ åªè·Ÿæ³¨ï¼ˆæ…¢æ‰“AA/KK = é€é’±ï¼‰
âŒ 3-betå¤ªå°ï¼ˆç»™å¯¹æ‰‹æ­£ç¡®èµ”ç‡ï¼‰

ğŸ’¡ æ·±ç­¹ç (200BB+)ï¼š
â€¢ AAå¯ä»¥è€ƒè™‘åªè·Ÿæ³¨è®¾é™·é˜±
â€¢ ä½†å¿…é¡»æœ‰ç¿»åæŠ€æœ¯æ”¯æŒ`
        }];
    }
    
    else if (scenario === 'preflop-aa-3bet') {
        result.cards = [{
            type: 'warning',
            title: 'ğŸ’¥ ã€è¡ŒåŠ¨ã€‘æ ¹æ®ç‰ŒåŠ›å†³å®š',
            content: `ã€æˆ‘åŠ æ³¨è¢«3-betã€‘

âœ… ä½ æœ‰AA/KKï¼š
â€¢ 4-betåˆ°2.2-2.5xå¯¹æ‰‹3-beté¢
â€¢ æˆ–è€…ç›´æ¥å…¨ä¸‹ï¼ˆç­¹ç <100BBï¼‰

âœ… ä½ æœ‰QQ/JJ/AKï¼š
â€¢ å¯¹æ‰‹æ˜¯ç´§å‡¶ â†’ è·Ÿæ³¨çœ‹ç¿»ç‰Œ
â€¢ å¯¹æ‰‹æ˜¯æ¾å‡¶ â†’ å¯ä»¥4-bet
â€¢ ç­¹ç <60BB â†’ å¯ä»¥å…¨ä¸‹

âœ… ä½ æœ‰ä¸­ç­‰ç‰Œ(TT/99/AQs)ï¼š
â€¢ æœ‰ä½ç½® â†’ è·Ÿæ³¨
â€¢ æ²¡ä½ç½® â†’ å¼ƒç‰Œæˆ–è·Ÿæ³¨

ğŸš¨ã€ç»ä¸è¦åšã€‘
âŒ ç”¨è¾¹ç¼˜ç‰Œè·Ÿæ³¨3-betï¼ˆä¼šå¾ˆè¢«åŠ¨ï¼‰
âŒ 4-betåå¯¹æ‰‹5-betä½ å¼ƒç‰Œï¼ˆæµªè´¹ç­¹ç ï¼‰`
        }];
    }
    
    else if (scenario === 'preflop-btn-open') {
        result.cards = [{
            type: 'success',
            title: 'ğŸ° ã€è¡ŒåŠ¨ã€‘åŠ æ³¨ 2.5BB å¼€æ± ',
            content: `ã€BTN/COä½å¼€æ± èŒƒå›´ã€‘

âœ… BTNä½(æœ€æ¾)ï¼š
â€¢ æ‰€æœ‰å¯¹å­ 22+
â€¢ æ‰€æœ‰Aé«˜ A2s+, A7o+
â€¢ æ‰€æœ‰Ké«˜åŒèŠ± K2s+, K9o+
â€¢ Qé«˜åŒèŠ± Q5s+, Q9o+
â€¢ Jé«˜åŒèŠ± J7s+, JTo
â€¢ è¿å¼ åŒèŠ± 54s+
â€¢ å¤§çº¦40%çš„æ‰‹ç‰Œ

âœ… COä½(ç¨ç´§)ï¼š
â€¢ æ‰€æœ‰å¯¹å­ 22+
â€¢ Aé«˜ A2s+, A9o+
â€¢ Ké«˜ K9s+, KTo+
â€¢ Qé«˜ Q9s+, QJo
â€¢ Jé«˜ J9s+, JTo
â€¢ å¤§çº¦25%çš„æ‰‹ç‰Œ

ğŸš¨ã€ç»ä¸è¦åšã€‘
âŒ åªåŠ æ³¨å¥½ç‰Œï¼ˆå¤ªç´§è¢«ç›²æ³¨å·å…‰ï¼‰
âŒ å¹³è·Ÿå…¥æ± ï¼ˆæ²¡æœ‰ä¸»åŠ¨æƒï¼‰

ğŸ’¡ é¢å¯¹ç›²æ³¨3-betï¼š
â€¢ çœ‹å¯¹æ‰‹ç±»å‹å†³å®šè·Ÿæ³¨/4-bet/å¼ƒç‰Œ`
        }];
    }
    
    else if (scenario === 'preflop-defend-bb') {
        result.cards = [{
            type: 'info',
            title: 'ğŸ›¡ï¸ ã€è¡ŒåŠ¨ã€‘æ ¹æ®ä½ç½®å’Œç­¹ç å†³å®š',
            content: `ã€å¤§ç›²é˜²å®ˆç­–ç•¥ã€‘

âœ… é¢å¯¹BTNåŠ æ³¨(æœ€æ¾é˜²å®ˆ)ï¼š
â€¢ è·Ÿæ³¨ï¼š22+, A2s+, A5o+, K5s+, Q7s+, å¤§éƒ¨åˆ†è¿å¼ 
â€¢ 3-betï¼šAA-TT, AK, AQs, å¶å°”åŠ å…¥è¯ˆå”¬

âœ… é¢å¯¹COåŠ æ³¨ï¼š
â€¢ è·Ÿæ³¨ï¼š33+, A7s+, A9o+, KTs+, QTs+
â€¢ 3-betï¼šAA-JJ, AK, AQ

âœ… é¢å¯¹EPåŠ æ³¨(æœ€ç´§)ï¼š
â€¢ è·Ÿæ³¨ï¼š77+, ATs+, KQs
â€¢ 3-betï¼šAA-QQ, AK

ğŸš¨ã€ç»ä¸è¦åšã€‘
âŒ ç”¨åƒåœ¾ç‰Œé˜²å®ˆï¼ˆæ‰“ä¸èµ¢ç¿»åï¼‰
âŒ é¢å¯¹4-betè¿˜è·Ÿæ³¨å¼±ç‰Œ

ğŸ’¡ å…³é”®åŸåˆ™ï¼š
â€¢ ä½ç½®ä¸å¥½å°±è¦ç‰ŒåŠ›è¡¥å¿
â€¢ æ·±ç­¹ç å¤šè·Ÿæ³¨ï¼Œæµ…ç­¹ç å¤š3-bet`
        }];
    }
    
    else if (scenario === 'preflop-squeeze') {
        result.cards = [{
            type: 'warning',
            title: 'ğŸ”¥ ã€è¡ŒåŠ¨ã€‘è¯„ä¼°æ˜¯å¦Squeeze',
            content: `ã€Squeezeæœºä¼šè¯„ä¼°ã€‘

âœ… é€‚åˆSqueezeçš„æƒ…å†µï¼š
â€¢ ä½ æœ‰å¼ºç‰Œ (JJ+, AQ+)
â€¢ åŸåŠ æ³¨è€…ä½ç½®é åï¼ˆèŒƒå›´å®½ï¼‰
â€¢ è·Ÿæ³¨è€…æ˜¯å¼±ç©å®¶
â€¢ ä½ åœ¨æœ‰åˆ©ä½ç½®

âœ… Squeezeå°ºå¯¸ï¼š
â€¢ æ ‡å‡†ï¼šåŸåŠ æ³¨4x + æ¯ä¸ªè·Ÿæ³¨è€…+1x
â€¢ ä¾‹å¦‚ï¼šåŠ æ³¨3BB + 1ä¸ªè·Ÿæ³¨ â†’ Squeezeåˆ°15-18BB

âŒ ä¸é€‚åˆSqueezeï¼š
â€¢ åŸåŠ æ³¨è€…ä½ç½®é å‰ï¼ˆèŒƒå›´ç´§ï¼‰
â€¢ è·Ÿæ³¨è€…æ˜¯ç´§å‡¶ç©å®¶
â€¢ ä½ ç­¹ç å¤ªæµ…(<40BB)
â€¢ ä½ çš„ç‰Œå¤ªå¼±

ğŸš¨ã€ç»ä¸è¦åšã€‘
âŒ Squeezeå¤ªå°ï¼ˆç»™å¯¹æ‰‹èµ”ç‡ï¼‰
âŒ Squeezeåé¢å¯¹4-betä¸çŸ¥é“æ€ä¹ˆæ‰“`
        }];
    }
    
    else if (scenario === 'preflop-marginal') {
        result.cards = [{
            type: 'warning',
            title: 'ğŸ˜¬ ã€è¡ŒåŠ¨ã€‘ä½ç½®å†³å®šä¸€åˆ‡',
            content: `ã€è¾¹ç¼˜ç‰Œå†³ç­–ã€‘

âœ… KJo/QJo/KTo è¿™ç±»ç‰Œï¼š
â€¢ å‰ä½(UTG/MP) â†’ å¼ƒç‰Œ
â€¢ COä½ â†’ å¯ä»¥åŠ æ³¨å¼€æ± 
â€¢ BTNä½ â†’ åŠ æ³¨å¼€æ± 
â€¢ ç›²æ³¨ä½é¢å¯¹åŠ æ³¨ â†’ é€šå¸¸å¼ƒç‰Œ

âœ… QTs/JTs/T9s åŒèŠ±è¿å¼ ï¼š
â€¢ å‰ä½ â†’ å¼ƒç‰Œæˆ–å°é¢åŠ æ³¨
â€¢ åä½ â†’ åŠ æ³¨å¼€æ± 
â€¢ é¢å¯¹åŠ æ³¨ â†’ æœ‰ä½ç½®å¯è·Ÿ

âœ… å°å¯¹å­ 22-66ï¼š
â€¢ æ·±ç­¹ç (>80BB) â†’ è·Ÿæ³¨çœ‹ç¿»ç‰Œ
â€¢ æµ…ç­¹ç (<50BB) â†’ å¼ƒç‰Œæˆ–åŠ æ³¨

ğŸš¨ã€ç»ä¸è¦åšã€‘
âŒ åœ¨å‰ä½ç”¨è¾¹ç¼˜ç‰ŒåŠ æ³¨
âŒ æ²¡ä½ç½®ç”¨è¾¹ç¼˜ç‰Œè·Ÿæ³¨3-bet
âŒ å¤šäººåº•æ± ç”¨è¾¹ç¼˜ç‰Œè¿½

ğŸ’¡ æ ¸å¿ƒåŸåˆ™ï¼š
è¾¹ç¼˜ç‰Œ = éœ€è¦ä½ç½®ä¼˜åŠ¿ + ç¿»åæŠ€æœ¯`
        }];
    }
    
    else if (scenario === 'preflop-deep') {
        result.cards = [{
            type: 'info',
            title: 'ğŸ’° ã€å»ºè®®ã€‘æ·±ç­¹ç ç­–ç•¥è°ƒæ•´',
            content: `ã€æ·±ç­¹ç (150BB+)ç­–ç•¥ã€‘

âœ… åº”è¯¥æ›´ç´§çš„æƒ…å†µï¼š
â€¢ ç¿»å‰3-bet/4-bet
â€¢ ç”¨è¾¹ç¼˜ç‰Œå¯¹æŠ—ç´§å‡¶ç©å®¶
â€¢ å¤šäººåº•æ± 

âœ… å¯ä»¥æ›´æ¾çš„æƒ…å†µï¼š
â€¢ æœ‰ä½ç½®çš„è·Ÿæ³¨
â€¢ åŒèŠ±è¿å¼ /å°å¯¹å­ï¼ˆæš—ç¤ºèµ”ç‡å¥½ï¼‰
â€¢ å¯¹æŠ—å¼±ç©å®¶

âœ… ç‰ŒåŠ›è°ƒæ•´ï¼š
â€¢ AKç›¸å¯¹è´¬å€¼ï¼ˆä¸å®¹æ˜“å…¨ä¸‹ï¼‰
â€¢ åŒèŠ±è¿å¼ å‡å€¼ï¼ˆå¯ä»¥èµ¢å¤§åº•æ± ï¼‰
â€¢ å°å¯¹å­å‡å€¼ï¼ˆä¸­æš—ä¸‰èµ¢å¤§åº•æ± ï¼‰

ğŸš¨ã€ç»ä¸è¦åšã€‘
âŒ ç¿»å‰è½»æ˜“å…¨ä¸‹ï¼ˆé™¤éAAï¼‰
âŒ å¿½è§†ä½ç½®çš„ä»·å€¼
âŒ ç”¨é¡¶å¯¹æ‰“å¤§åº•æ± 

ğŸ’¡ æ·±ç­¹ç æ ¸å¿ƒï¼š
â€¢ æ§åˆ¶åº•æ± 
â€¢ ä¿æŠ¤ä¸‹é£æ—¶çš„æŸå¤±
â€¢ æœ€å¤§åŒ–ä¸Šé£æ—¶çš„æ”¶ç›Š`
        }];
    }
    
    // ========== ç¿»ç‰Œåœºæ™¯ ==========
    
    else if (scenario === 'flop-set-wet') {
        result.cards = [{
            type: 'success',
            title: 'ğŸ¯ ã€è¡ŒåŠ¨ã€‘ä¸‹æ³¨ 2/3 - Pot ä¿æŠ¤',
            content: `ã€æš—ä¸‰åœ¨æ¹¿æ¶¦ç‰Œé¢ã€‘

âœ… å¿…é¡»ä¸‹æ³¨ä¿æŠ¤ï¼š
â€¢ ç‰Œé¢æœ‰åŒèŠ±å¬ç‰Œ â†’ ä¸‹æ³¨2/3-pot
â€¢ ç‰Œé¢æœ‰é¡ºå­å¬ç‰Œ â†’ ä¸‹æ³¨2/3-pot
â€¢ å¤šäººåº•æ±  â†’ ä¸‹æ³¨æ›´å¤§

âš ï¸ å¦‚æœè¢«åŠ æ³¨ï¼š
â€¢ ç‰Œé¢æ²¡å®Œæˆå¬ç‰Œ â†’ å…¨ä¸‹
â€¢ ç‰Œé¢å¾ˆæ¹¿ â†’ è·Ÿæ³¨çœ‹è½¬ç‰Œ

ğŸš¨ã€ç»ä¸è¦åšã€‘
âŒ è¿‡ç‰Œæ…¢æ‰“ï¼ˆç»™å…è´¹ç‰Œå¤ªå±é™©ï¼‰
âŒ å°é¢ä¸‹æ³¨ï¼ˆç»™å¯¹æ‰‹æ­£ç¡®èµ”ç‡ï¼‰

ğŸ’¡ è½¬ç‰Œ/æ²³ç‰Œé¢„è­¦ï¼š
â€¢ å®ŒæˆåŒèŠ± + å¯¹æ‰‹å¤§é¢ä¸‹æ³¨ â†’ ä½ è¦èƒ½å¼ƒæš—ä¸‰
â€¢ è®°ä½ï¼šæš—ä¸‰ä¸æ˜¯æ— æ•Œçš„`
        }];
    }
    
    else if (scenario === 'flop-toptwo') {
        result.cards = [{
            type: 'success',
            title: 'âœŒï¸ ã€è¡ŒåŠ¨ã€‘ä¸‹æ³¨ 1/2 - 2/3 pot',
            content: `ã€é¡¶ä¸¤å¯¹æ‰“æ³•ã€‘

âœ… æ ‡å‡†æ‰“æ³•ï¼š
â€¢ æœ‰ä½ç½® â†’ ä¸‹æ³¨1/2-2/3 pot
â€¢ æ²¡ä½ç½® â†’ ä¸‹æ³¨1/2 pot

âš ï¸ ç‰Œé¢æ¹¿æ¶¦æ—¶ï¼š
â€¢ ä¸‹æ³¨æ›´å¤§(2/3 pot)ä¿æŠ¤
â€¢ ä¸è¦ç»™å¬ç‰Œä¾¿å®œçš„ä»·æ ¼

ğŸš¨ã€å±é™©è­¦å‘Šã€‘
â€¢ è½¬ç‰Œ/æ²³ç‰Œç‰Œé¢é…å¯¹ â†’ å¯¹æ‰‹å¯èƒ½æœ‰è‘«èŠ¦
â€¢ è½¬ç‰Œ/æ²³ç‰Œå®Œæˆå¬ç‰Œ â†’ é‡æ–°è¯„ä¼°

ğŸ’¡ è®°ä½ï¼šä¸¤å¯¹ä¸æ˜¯åšæœ
â€¢ å¯¹æ‰‹åŠ æ³¨è¦è®¤çœŸè€ƒè™‘
â€¢ æ²³ç‰Œå¤§é¢ä¸‹æ³¨è¦èƒ½å¼ƒç‰Œ`
        }];
    }
    
    else if (scenario === 'flop-overpair') {
        result.cards = [{
            type: 'success',
            title: 'ğŸ‘‘ ã€è¡ŒåŠ¨ã€‘æŒç»­ä¸‹æ³¨ 1/2 pot',
            content: `ã€è¶…å¯¹ï¼ˆç¿»ç‰ŒåAA/KKï¼‰ã€‘

âœ… æ ‡å‡†æ‰“æ³•ï¼š
â€¢ å¹²ç‡¥ç‰Œé¢(å¦‚K72) â†’ ä¸‹æ³¨1/3 pot
â€¢ æ¹¿æ¶¦ç‰Œé¢(å¦‚T98) â†’ ä¸‹æ³¨1/2-2/3 pot

âš ï¸ è¢«è¿‡ç‰ŒåŠ æ³¨ï¼š
â€¢ å¹²ç‡¥ç‰Œé¢ â†’ å¯¹æ‰‹å¯èƒ½æœ‰æš—ä¸‰ï¼Œè°¨æ…
â€¢ æ¹¿æ¶¦ç‰Œé¢ â†’ å¯èƒ½æ˜¯å¬ç‰ŒåŠ æ³¨ï¼Œè·Ÿæ³¨

ğŸš¨ã€ä¸è¦é«˜ä¼°è¶…å¯¹ã€‘
â€¢ ç¿»ç‰Œæœ‰3å¼ è¿ç‰Œ â†’ å¯¹æ‰‹å¯èƒ½æœ‰é¡ºå­
â€¢ ç¿»ç‰Œæœ‰åŒèŠ±é¢ â†’ å¯¹æ‰‹å¯èƒ½æœ‰åŒèŠ±å¬ç‰Œ
â€¢ å¤šäººåº•æ±  â†’ è¶…å¯¹ä»·å€¼ä¸‹é™

ğŸ’¡ æ ¸å¿ƒåŸåˆ™ï¼š
è¶…å¯¹ = å¥½ç‰Œä½†ä¸æ˜¯åšæœ
åº•æ± è¶Šå¤§ï¼Œè¶…å¯¹ç›¸å¯¹ä»·å€¼è¶Šä½`
        }];
    }
    
    else if (scenario === 'flop-flushdraw') {
        result.cards = [{
            type: 'info',
            title: 'â™ ï¸ ã€è¡ŒåŠ¨ã€‘åŠè¯ˆå”¬æˆ–è¿‡ç‰Œ',
            content: `ã€åŒèŠ±å¬ç‰Œç­–ç•¥ã€‘

âœ… ä½ æœ‰ä½ç½® + å¯¹æ‰‹è¿‡ç‰Œï¼š
â€¢ ä¸‹æ³¨1/2 potåŠè¯ˆå”¬
â€¢ å¯¹æ‰‹å¼ƒç‰Œä½ èµ¢
â€¢ å¯¹æ‰‹è·Ÿæ³¨ä½ æœ‰36%èƒœç‡

âœ… ä½ æ²¡ä½ç½®ï¼š
â€¢ å¯ä»¥è¿‡ç‰Œï¼ˆå…è´¹çœ‹ç‰Œï¼‰
â€¢ ä¹Ÿå¯ä»¥é¢†å…ˆä¸‹æ³¨åŠè¯ˆå”¬

âœ… å¯¹æ‰‹ä¸‹æ³¨ï¼š
â€¢ ä¸‹æ³¨<1/2 pot â†’ è·Ÿæ³¨ï¼ˆèµ”ç‡å¤Ÿï¼‰
â€¢ ä¸‹æ³¨>2/3 pot â†’ è€ƒè™‘å¼ƒç‰Œ

ğŸ“Š åŒèŠ±å¬ç‰Œèƒœç‡ï¼š
â€¢ ç¿»ç‰Œåˆ°æ²³ç‰Œï¼šçº¦35%
â€¢ è½¬ç‰Œåˆ°æ²³ç‰Œï¼šçº¦18%

ğŸš¨ã€ç»ä¸è¦åšã€‘
âŒ ä¸è®¡ç®—èµ”ç‡å°±è·Ÿå¤§é¢ä¸‹æ³¨
âŒ åœ¨å¤šäººåº•æ± è¯ˆå”¬åŠ æ³¨`
        }];
    }
    
    else if (scenario === 'flop-oesd') {
        result.cards = [{
            type: 'info',
            title: 'ğŸ”¢ ã€è¡ŒåŠ¨ã€‘è®¡ç®—èµ”ç‡å†³å®š',
            content: `ã€ä¸¤å¤´é¡ºå¬ç‰Œç­–ç•¥ã€‘

âœ… 8ä¸ªoutsï¼Œèƒœç‡ï¼š
â€¢ ç¿»ç‰Œåˆ°æ²³ç‰Œï¼šçº¦31%
â€¢ è½¬ç‰Œåˆ°æ²³ç‰Œï¼šçº¦16%

âœ… å¯¹æ‰‹è¿‡ç‰Œï¼š
â€¢ å¯ä»¥ä¸‹æ³¨åŠè¯ˆå”¬
â€¢ æˆ–è€…è¿‡ç‰Œå…è´¹çœ‹ç‰Œ

âœ… å¯¹æ‰‹ä¸‹æ³¨ï¼š
â€¢ ä¸‹æ³¨<1/2 pot â†’ è·Ÿæ³¨
â€¢ ä¸‹æ³¨>pot â†’ å¼ƒç‰Œ

ğŸš¨ã€æ³¨æ„äº‹é¡¹ã€‘
â€¢ ä½ çš„é¡ºå­å¯èƒ½ä¸æ˜¯åšæœ
â€¢ ç‰Œé¢æœ‰åŒèŠ± â†’ ä½ çš„é¡ºå­å¯èƒ½è¾“ç»™åŒèŠ±
â€¢ ç‰Œé¢æœ‰å¯¹å­ â†’ å°å¿ƒè‘«èŠ¦

ğŸ’¡ ä¸¤å¤´é¡º vs å¡é¡ºï¼š
â€¢ ä¸¤å¤´é¡º(8outs) â†’ å€¼å¾—è¿½
â€¢ å¡é¡º(4outs) â†’ ä¸€èˆ¬ä¸å€¼å¾—è¿½`
        }];
    }
    
    else if (scenario === 'flop-cbet-miss') {
        result.cards = [{
            type: 'warning',
            title: 'ğŸ­ ã€è¡ŒåŠ¨ã€‘è¯„ä¼°æ˜¯å¦C-bet',
            content: `ã€ç¿»ç‰Œæ²¡ä¸­ï¼Œæ˜¯å¦æŒç»­ä¸‹æ³¨ã€‘

âœ… åº”è¯¥C-betçš„æƒ…å†µï¼š
â€¢ å¹²ç‡¥ç‰Œé¢(A72, K83)
â€¢ å¯¹æ‰‹åªæœ‰1äºº
â€¢ ç‰Œé¢å¯¹ä½ èŒƒå›´æœ‰åˆ©

âœ… ä¸åº”è¯¥C-betçš„æƒ…å†µï¼š
â€¢ æ¹¿æ¶¦ç‰Œé¢(JT9, 876)
â€¢ å¤šäººåº•æ± 
â€¢ å¯¹æ‰‹æ˜¯è·Ÿæ³¨ç«™

âœ… C-betå°ºå¯¸ï¼š
â€¢ å¹²ç‡¥ç‰Œé¢ â†’ 1/3 pot
â€¢ æ¹¿æ¶¦ç‰Œé¢ â†’ 1/2 potæˆ–æ”¾å¼ƒ

ğŸš¨ã€è¢«åŠ æ³¨æ€ä¹ˆåŠã€‘
â€¢ ä½ æœ‰åé—¨å¬ç‰Œ â†’ å¯ä»¥è·Ÿæ³¨
â€¢ ä½ å®Œå…¨æ²¡æœ‰ç‰ŒåŠ› â†’ å¼ƒç‰Œ

ğŸ’¡ æ ¸å¿ƒåŸåˆ™ï¼š
ä¸æ˜¯æ¯ä¸ªç¿»ç‰Œéƒ½è¦C-bet
æ”¾å¼ƒä¹Ÿæ˜¯ä¸€ç§é€‰æ‹©`
        }];
    }
    
    else if (scenario === 'flop-checkraise') {
        result.cards = [{
            type: 'critical',
            title: 'ğŸš¨ ã€è¡ŒåŠ¨ã€‘è°¨æ…è¯„ä¼°',
            content: `ã€è¢«è¿‡ç‰ŒåŠ æ³¨ã€‘

âœ… å¯¹æ‰‹å¯èƒ½æœ‰ï¼š
â€¢ æš—ä¸‰/ä¸¤å¯¹ï¼ˆä»·å€¼åŠ æ³¨ï¼‰
â€¢ å¼ºå¬ç‰Œï¼ˆåŠè¯ˆå”¬åŠ æ³¨ï¼‰
â€¢ çº¯è¯ˆå”¬ï¼ˆè¾ƒå°‘ï¼‰

âœ… ä½ åº”è¯¥ï¼š
â€¢ ä½ æœ‰é¡¶å¯¹å¥½è¸¢è„š â†’ è·Ÿæ³¨
â€¢ ä½ æœ‰è¶…å¯¹ â†’ è·Ÿæ³¨
â€¢ ä½ æœ‰æš—ä¸‰ â†’ å¯ä»¥å†åŠ æ³¨
â€¢ ä½ åªæœ‰ä¸­å¯¹/å¼±é¡¶å¯¹ â†’ å¼ƒç‰Œ

ğŸš¨ã€å±é™©ä¿¡å·ã€‘
â€¢ å¯¹æ‰‹æ˜¯è¢«åŠ¨ç©å®¶è¿‡ç‰ŒåŠ æ³¨ = 100%æœ‰è´§
â€¢ å¯¹æ‰‹åœ¨å¹²ç‡¥ç‰Œé¢è¿‡ç‰ŒåŠ æ³¨ = å¾ˆå¯èƒ½æš—ä¸‰

ğŸ’¡ è®°ä½ï¼š
ç¿»ç‰Œè¿‡ç‰ŒåŠ æ³¨é€šå¸¸æ˜¯å¼ºç‰Œ
ä¸è¦ç”¨è¾¹ç¼˜ç‰ŒæŠ—`
        }];
    }
    
    else if (scenario === 'flop-donk') {
        result.cards = [{
            type: 'warning',
            title: 'â“ ã€è¡ŒåŠ¨ã€‘æ ¹æ®å¯¹æ‰‹ç±»å‹å†³å®š',
            content: `ã€å¯¹æ‰‹é¢†å…ˆä¸‹æ³¨(Donk Bet)ã€‘

âœ… å¯¹æ‰‹å¯èƒ½æ˜¯ï¼š
â€¢ å¼±ç©å®¶ â†’ é€šå¸¸æœ‰æˆç‰Œä½†ä¸çŸ¥é“æ€ä¹ˆæ‰“
â€¢ å¼ºç©å®¶ â†’ å¯èƒ½æ˜¯è¯•æ¢æˆ–ä»·å€¼

âœ… ä½ æœ‰å¼ºç‰Œ(é¡¶å¯¹+)ï¼š
â€¢ åŠ æ³¨è·å–ä»·å€¼
â€¢ æˆ–è·Ÿæ³¨ï¼ˆå¦‚æœå¯¹æ‰‹ä¼šå¼ƒç‰Œï¼‰

âœ… ä½ æœ‰ä¸­ç­‰ç‰Œï¼š
â€¢ è·Ÿæ³¨çœ‹çœ‹
â€¢ è½¬ç‰Œå¯¹æ‰‹ç»§ç»­ä¸‹æ³¨ â†’ é‡æ–°è¯„ä¼°

âœ… ä½ æ²¡ä¸­ï¼š
â€¢ å¼ƒç‰Œï¼ˆä¸è¦æµ®æ‰“ï¼‰
â€¢ é™¤éä½ æœ‰ä½ç½®+åé—¨å¬ç‰Œ

ğŸ’¡ æ ¸å¿ƒåŸåˆ™ï¼š
Donk beté€šå¸¸è¡¨ç¤ºä¸­ç­‰ç‰ŒåŠ›
å¯¹æ‰‹å¾ˆå°‘ç”¨Donkæ¥è¯ˆå”¬`
        }];
    }
    
    // ========== è½¬ç‰Œåœºæ™¯ ==========
    
    else if (scenario === 'turn-strong-safe') {
        result.cards = [{
            type: 'success',
            title: 'ğŸ’ª ã€è¡ŒåŠ¨ã€‘ä¸‹æ³¨ 2/3 pot å–ä»·å€¼',
            content: `ã€å¼ºç‰Œ+å®‰å…¨ç‰Œé¢ã€‘

âœ… æ ‡å‡†æ‰“æ³•ï¼š
â€¢ ä¸‹æ³¨2/3 pot
â€¢ å»ºç«‹å¤§åº•æ± 

âš ï¸ å¦‚æœå¯¹æ‰‹åŠ æ³¨ï¼š
â€¢ ä½ æœ‰åšæœ/æš—ä¸‰ â†’ å…¨ä¸‹
â€¢ ä½ æœ‰ä¸¤å¯¹ â†’ è·Ÿæ³¨ï¼ˆä½†æ²³ç‰Œè°¨æ…ï¼‰

ğŸ’¡ æ²³ç‰Œè®¡åˆ’ï¼š
â€¢ å¯¹æ‰‹è·Ÿæ³¨ â†’ æ²³ç‰Œç»§ç»­ä¸‹æ³¨2/3-pot
â€¢ å¯¹æ‰‹è¿‡ç‰Œ â†’ æ²³ç‰Œä¸‹æ³¨potå–ä»·å€¼

ğŸš¨ã€ä¸è¦åšã€‘
âŒ è¿‡ç‰Œæ…¢æ‰“ï¼ˆé”™è¿‡ä»·å€¼ï¼‰
âŒ å°é¢ä¸‹æ³¨ï¼ˆæ²¡æœ‰æœ€å¤§åŒ–ï¼‰`
        }];
    }
    
    else if (scenario === 'turn-strong-danger') {
        result.cards = [{
            type: 'warning',
            title: 'ğŸ˜° ã€è¡ŒåŠ¨ã€‘ä¸‹æ³¨ 1/2 pot æ§åˆ¶åº•æ± ',
            content: `ã€å¼ºç‰Œä½†ç‰Œé¢å˜å±é™©ã€‘

âœ… è½¬ç‰Œå‡ºç°ç¬¬3å¼ åŒèŠ±/é¡ºå­è¿ç‰Œï¼š
â€¢ ä¸‹æ³¨1/2 potï¼ˆæ§åˆ¶åº•æ± ï¼‰
â€¢ ä¸è¦è¿‡åº¦æŠ•å…¥

âš ï¸ å¦‚æœå¯¹æ‰‹åŠ æ³¨ï¼š
â€¢ å°åŠ æ³¨ â†’ è·Ÿæ³¨
â€¢ å¤§åŠ æ³¨(â‰¥pot) â†’ è€ƒè™‘å¼ƒç‰Œ

ğŸš¨ã€æ²³ç‰Œé¢„è­¦ã€‘
â€¢ å®ŒæˆåŒèŠ±/é¡ºå­ + å¯¹æ‰‹å¤§é¢ä¸‹æ³¨ â†’ å¼ƒç‰Œ
â€¢ ä½ çš„ä¸¤å¯¹/æš—ä¸‰å¯èƒ½å·²ç»è¾“äº†

ğŸ’¡ æ ¸å¿ƒåŸåˆ™ï¼š
è½¬ç‰ŒæŠ•å…¥è¶Šå°‘ï¼Œæ²³ç‰Œè¶Šå¥½å¼ƒ
ç‰Œé¢å±é™©å°±è¦æ§åˆ¶åº•æ± `
        }];
    }
    
    else if (scenario === 'turn-raised') {
        result.fullscreen = true;
        result.warning = {
            title: 'ä½ ä¸‹æ³¨è¢«åŠ æ³¨äº†ï¼',
            text: 'è½¬ç‰Œè¢«åŠ æ³¨é€šå¸¸ä»£è¡¨å¼ºç‰Œ\nè¯·å†·é™è¯„ä¼°',
            action: 'ã€è¯„ä¼°ã€‘å¯¹æ‰‹èŒƒå›´',
            dont: 'âŒ ä¸è¦æƒ…ç»ªåŒ–è·Ÿæ³¨\nâŒ ä¸è¦ä¸æ€è€ƒå°±å¼ƒç‰Œ'
        };
        result.cards = [{
            type: 'critical',
            title: 'ğŸ’€ ã€è¡ŒåŠ¨ã€‘æ ¹æ®ç‰ŒåŠ›å†³å®š',
            content: `ã€è½¬ç‰Œè¢«åŠ æ³¨ã€‘

âœ… ä½ æœ‰åšæœ/æš—ä¸‰ï¼š
â€¢ å…¨ä¸‹ï¼

âœ… ä½ æœ‰ä¸¤å¯¹ï¼š
â€¢ å¯¹æ‰‹æ˜¯ç´§å‡¶ â†’ å¼ƒç‰Œï¼ˆä»–èŒƒå›´å¾ˆå¼ºï¼‰
â€¢ å¯¹æ‰‹æ˜¯æ¾å‡¶ â†’ å¯ä»¥è·Ÿæ³¨
â€¢ å¯¹æ‰‹æ˜¯è¢«åŠ¨é±¼ â†’ 100%å¼ƒç‰Œ

âœ… ä½ æœ‰è¶…å¯¹/é¡¶å¯¹ï¼š
â€¢ é€šå¸¸å¼ƒç‰Œ
â€¢ ä¸€å¯¹ç‰Œä¸å€¼å¾—æ‰“å¤§åº•æ± 

ğŸš¨ã€å…³é”®åˆ¤æ–­ã€‘
â€¢ è¢«åŠ¨ç©å®¶è½¬ç‰ŒåŠ æ³¨ = 100%æœ‰è´§
â€¢ ç´§å‡¶ç©å®¶è½¬ç‰ŒåŠ æ³¨ = å¾ˆå¼ºçš„èŒƒå›´
â€¢ æ¾å‡¶ç©å®¶è½¬ç‰ŒåŠ æ³¨ = èŒƒå›´è¾ƒå®½ï¼Œå¯ä»¥æŠ“

ğŸ’¡ è®°ä½ä½ æ ‡è®°çš„é”™è¯¯ï¼š
"è½¬ç‰Œé¡¶å¯¹/ä¸¤å¯¹è·Ÿæ³¨å¤§é¢åŠ æ³¨"
ä»Šå¤©ä¸è¦çŠ¯è¿™ä¸ªé”™ï¼`
        }];
    }
    
    else if (scenario === 'turn-big-bet') {
        result.cards = [{
            type: 'critical',
            title: 'ğŸ’£ ã€è¡ŒåŠ¨ã€‘è°¨æ…ï¼é€šå¸¸åº”è¯¥å¼ƒç‰Œ',
            content: `ã€å¯¹æ‰‹è½¬ç‰Œçªç„¶å¤§é¢ä¸‹æ³¨ã€‘

âœ… å¤§é¢ä¸‹æ³¨(â‰¥2/3 pot)é€šå¸¸æ„å‘³ç€ï¼š
â€¢ å¼ºæˆç‰Œæƒ³å–ä»·å€¼
â€¢ å¾ˆå°‘æ˜¯è¯ˆå”¬

âœ… ä½ åº”è¯¥ï¼š
â€¢ ä½ æœ‰åšæœ â†’ åŠ æ³¨
â€¢ ä½ æœ‰æš—ä¸‰ â†’ è·Ÿæ³¨ï¼ˆä½†æ²³ç‰Œè­¦æƒ•ï¼‰
â€¢ ä½ æœ‰ä¸¤å¯¹ â†’ è°¨æ…è·Ÿæ³¨
â€¢ ä½ æœ‰ä¸€å¯¹ â†’ å¼ƒç‰Œ

ğŸš¨ã€è¢«åŠ¨é±¼å¤§é¢ä¸‹æ³¨ã€‘
â€¢ 100%æœ‰ç‰Œï¼Œç›´æ¥å¼ƒï¼ˆé™¤éä½ æœ‰åšæœï¼‰

ğŸ’¡ è½¬ç‰Œå¤§é¢ä¸‹æ³¨çš„æœ¬è´¨ï¼š
å¯¹æ‰‹æƒ³å»ºç«‹å¤§åº•æ± 
é—®è‡ªå·±ï¼šæˆ‘çš„ç‰Œå¤Ÿå¼ºå—ï¼Ÿ`
        }];
    }
    
    else if (scenario === 'turn-draw-check') {
        result.cards = [{
            type: 'success',
            title: 'ğŸ¯ ã€è¡ŒåŠ¨ã€‘ä¸‹æ³¨ 1/2 pot åŠè¯ˆå”¬',
            content: `ã€å¬ç‰Œ+å¯¹æ‰‹è¿‡ç‰Œã€‘

âœ… æ ‡å‡†æ‰“æ³•ï¼š
â€¢ ä¸‹æ³¨1/2 potåŠè¯ˆå”¬
â€¢ å¯¹æ‰‹å¼ƒç‰Œ â†’ ä½ èµ¢
â€¢ å¯¹æ‰‹è·Ÿæ³¨ â†’ ä½ è¿˜æœ‰èƒœç‡

âœ… åŠè¯ˆå”¬çš„å¥½å¤„ï¼š
â€¢ ç«‹å³èµ¢åº•æ± çš„å¯èƒ½
â€¢ å»ºç«‹è¯ˆå”¬å½¢è±¡
â€¢ ä¸­ç‰Œæ—¶èµ¢æ›´å¤š

ğŸš¨ã€å¦‚æœå¯¹æ‰‹åŠ æ³¨ã€‘
â€¢ è®¡ç®—èµ”ç‡
â€¢ èµ”ç‡å¤Ÿ â†’ è·Ÿæ³¨
â€¢ èµ”ç‡ä¸å¤Ÿ â†’ å¼ƒç‰Œ

ğŸ’¡ åŒèŠ±å¬ç‰Œèƒœç‡çº¦18%ï¼ˆè½¬åˆ°æ²³ï¼‰
éœ€è¦è‡³å°‘3:1èµ”ç‡æ‰èƒ½ç›ˆåˆ©è·Ÿæ³¨`
        }];
    }
    
    else if (scenario === 'turn-draw-bet') {
        result.cards = [{
            type: 'warning',
            title: 'ğŸ“Š ã€è¡ŒåŠ¨ã€‘è®¡ç®—èµ”ç‡å†³å®šï¼',
            content: `ã€å¬ç‰Œ+å¯¹æ‰‹ä¸‹æ³¨ã€‘

ğŸ“Š èµ”ç‡è®¡ç®—ï¼š
è·Ÿæ³¨é‡‘é¢ Ã· (åº•æ± +ä¸‹æ³¨+è·Ÿæ³¨) = éœ€è¦èƒœç‡

âœ… åŒèŠ±å¬ç‰Œ(9outs)â‰ˆ18%ï¼š
â€¢ å¯¹æ‰‹ä¸‹æ³¨1/3 pot â†’ è·Ÿï¼ˆéœ€è¦20%ï¼‰
â€¢ å¯¹æ‰‹ä¸‹æ³¨1/2 pot â†’ è·Ÿï¼ˆéœ€è¦25%ï¼‰
â€¢ å¯¹æ‰‹ä¸‹æ³¨pot â†’ å¼ƒï¼ˆéœ€è¦33%ï¼‰

âœ… ä¸¤å¤´é¡º(8outs)â‰ˆ16%ï¼š
â€¢ å¯¹æ‰‹ä¸‹æ³¨1/3 pot â†’ å‹‰å¼ºè·Ÿ
â€¢ å¯¹æ‰‹ä¸‹æ³¨â‰¥1/2 pot â†’ å¼ƒ

ğŸš¨ã€ç»ä¸è¦åšã€‘
âŒ "æ„Ÿè§‰ä¼šä¸­" â†’ æƒ…ç»ªåŒ–è·Ÿæ³¨
âŒ ä¸è®¡ç®—å°±è·Ÿå¤§é¢ä¸‹æ³¨

ğŸ’¡ èŒä¸šç©å®¶æ°¸è¿œç”¨æ­£ç¡®èµ”ç‡å†³ç­–`
        }];
    }
    
    else if (scenario === 'turn-onepair') {
        result.cards = [{
            type: 'warning',
            title: '1ï¸âƒ£ ã€è¡ŒåŠ¨ã€‘æ§åˆ¶åº•æ± ',
            content: `ã€è½¬ç‰Œåªæœ‰ä¸€å¯¹ã€‘

âœ… ç‰Œé¢å®‰å…¨ + å¯¹æ‰‹è¿‡ç‰Œï¼š
â€¢ ä¸‹æ³¨1/3-1/2 potè–„ä»·å€¼

âœ… ç‰Œé¢å±é™© + å¯¹æ‰‹è¿‡ç‰Œï¼š
â€¢ è¿‡ç‰Œï¼ˆæ§åˆ¶åº•æ± ï¼‰

âœ… å¯¹æ‰‹ä¸‹æ³¨ï¼š
â€¢ å°é¢ä¸‹æ³¨ â†’ è·Ÿæ³¨
â€¢ å¤§é¢ä¸‹æ³¨ â†’ å¼ƒç‰Œ

ğŸš¨ã€æ ¸å¿ƒåŸåˆ™ã€‘
â€¢ ä¸€å¯¹ç‰Œ â‰  å¥½ç‰Œ
â€¢ ä¸è¦ç”¨ä¸€å¯¹æ‰“å¤§åº•æ± 
â€¢ è½¬ç‰ŒæŠ•å…¥è¶Šå°‘ï¼Œæ²³ç‰Œè¶Šå¥½å¼ƒ

ğŸ’¡ å¸¸è§é”™è¯¯ï¼š
ç”¨é¡¶å¯¹è·Ÿæ³¨å¤§é¢ä¸‹æ³¨ â†’ è¾“å¤§åº•æ± 
åº”è¯¥åœ¨è½¬ç‰Œå°±æ§åˆ¶æŸå¤±`
        }];
    }
    
    // ========== æ²³ç‰Œåœºæ™¯ ==========
    
    else if (scenario === 'river-completed-bigbet') {
        result.fullscreen = true;
        result.warning = {
            title: 'åœï¼ä½ çš„å¼ºç‰Œå¯èƒ½å·²ç»è¾“äº†ï¼',
            text: 'æ²³ç‰Œå®Œæˆäº†åŒèŠ±/é¡ºå­\nå¯¹æ‰‹å¤§é¢ä¸‹æ³¨ = 99%æœ‰åšæœ',
            action: 'ã€å¼ƒç‰Œã€‘æ˜¯æ­£ç¡®ç­”æ¡ˆ',
            dont: 'âŒ ä¸è¦è·Ÿæ³¨\nâŒ ä¸è¦Hero Call\nâŒ ä¸è¦æƒ³"ä»–å¯èƒ½è¯ˆå”¬"'
        };
        result.cards = [{
            type: 'critical',
            title: 'ğŸš¨ ã€è¡ŒåŠ¨ã€‘å¼ƒç‰Œï¼',
            content: `ã€æ²³ç‰Œå®Œæˆå¬ç‰Œ+å¯¹æ‰‹å¤§é¢ä¸‹æ³¨ã€‘

ğŸ’€ æƒ…å†µåˆ†æï¼š
â€¢ æ²³ç‰Œå®Œæˆäº†åŒèŠ±/é¡ºå­
â€¢ å¯¹æ‰‹å¤§é¢ä¸‹æ³¨
â€¢ ä½ çš„æš—ä¸‰/ä¸¤å¯¹å·²ç»ä¸æ˜¯å¥½ç‰Œäº†

ğŸš¨ å¯¹æ‰‹99%æœ‰åšæœï¼š
â€¢ è¢«åŠ¨ç©å®¶æ²³ç‰Œå¤§é¢ä¸‹æ³¨ = 100%æœ‰ç‰Œ
â€¢ ä½ è·Ÿæ³¨åªä¼šè¾“æ›´å¤š

ã€èŒä¸švsä¸šä½™åˆ†æ°´å²­ã€‘
â€¢ ä¸šä½™ï¼šèˆä¸å¾—å¼ƒæš—ä¸‰ â†’ è¾“50-200BB
â€¢ èŒä¸šï¼šå®Œæˆå¬ç‰Œç§’å¼ƒ â†’ çœ50-200BB

ğŸ’¡ ä»Šå¤©ä¸è¦çŠ¯è¿™ä¸ªé”™ï¼
æ²³ç‰Œå®Œæˆå¬ç‰Œ + å¯¹æ‰‹å¤§é¢ä¸‹æ³¨ = å¼ƒç‰Œ`
        }];
    }
    
    else if (scenario === 'river-allin') {
        result.fullscreen = true;
        result.warning = {
            title: 'å¯¹æ‰‹æ²³ç‰Œå…¨ä¸‹ï¼',
            text: 'æ²³ç‰Œå…¨ä¸‹é€šå¸¸æ˜¯æåŒ–èŒƒå›´\nè¦ä¹ˆåšæœï¼Œè¦ä¹ˆè¯ˆå”¬',
            action: 'ã€å†·é™åˆ†æã€‘',
            dont: 'âŒ ä¸è¦å†²åŠ¨è·Ÿæ³¨\nâŒ ä¸è¦æƒ…ç»ªåŒ–å†³ç­–'
        };
        result.cards = [{
            type: 'critical',
            title: 'â˜ ï¸ ã€è¡ŒåŠ¨ã€‘è¯„ä¼°æ˜¯å¦è·Ÿæ³¨',
            content: `ã€å¯¹æ‰‹æ²³ç‰Œå…¨ä¸‹ã€‘

âœ… ä½ åº”è¯¥è·Ÿæ³¨çš„æƒ…å†µï¼š
â€¢ ä½ æœ‰åšæœ â†’ 100%è·Ÿ
â€¢ ä½ æœ‰ç¬¬äºŒåšæœ + å¯¹æ‰‹æ˜¯æ¾å‡¶ â†’ å¯èƒ½è·Ÿ
â€¢ èµ”ç‡éå¸¸å¥½(>3:1) + ä½ æœ‰Bluff Catcher

âŒ ä½ åº”è¯¥å¼ƒç‰Œçš„æƒ…å†µï¼š
â€¢ ç‰Œé¢å®Œæˆå¬ç‰Œ + ä½ ä¸æ˜¯åšæœ
â€¢ å¯¹æ‰‹æ˜¯è¢«åŠ¨ç©å®¶
â€¢ ä½ åªæœ‰ä¸€å¯¹

ğŸš¨ã€è¢«åŠ¨ç©å®¶å…¨ä¸‹ã€‘
â€¢ 100%æœ‰ç‰Œï¼Œç›´æ¥å¼ƒ

ğŸ’¡ å…³é”®é—®é¢˜ï¼š
â€¢ å¯¹æ‰‹çš„è¯ˆå”¬é¢‘ç‡æ˜¯å¤šå°‘ï¼Ÿ
â€¢ ä½ éœ€è¦å¤šå°‘èƒœç‡æ‰èƒ½è·Ÿï¼Ÿ
â€¢ å¯¹æ‰‹ä¼šç”¨ä»€ä¹ˆè¯ˆå”¬ï¼Ÿ`
        }];
    }
    
    else if (scenario === 'river-fish-bigbet') {
        result.fullscreen = true;
        result.warning = {
            title: 'è¢«åŠ¨é±¼å¤§é¢ä¸‹æ³¨ï¼',
            text: 'è¢«åŠ¨é±¼å¤§é¢ä¸‹æ³¨ = 100%æœ‰å¼ºç‰Œ\nä»–ä¸ä¼šè¯ˆå”¬',
            action: 'ã€å¼ƒç‰Œã€‘é™¤éä½ æœ‰åšæœ',
            dont: 'âŒ ä¸è¦è·Ÿæ³¨\nâŒ ä¸è¦æƒ³"ä»–å¯èƒ½åœ¨è¯ˆå”¬"'
        };
        result.cards = [{
            type: 'critical',
            title: 'ğŸŸ ã€è¡ŒåŠ¨ã€‘å¼ƒç‰Œï¼',
            content: `ã€è¢«åŠ¨é±¼å¤§é¢ä¸‹æ³¨ã€‘

ğŸ’€ å…³é”®ä¿¡æ¯ï¼š
â€¢ å¯¹æ‰‹æ˜¯è¢«åŠ¨é±¼
â€¢ è¢«åŠ¨ç©å®¶å¤§é¢ä¸‹æ³¨ = 100%æœ‰ç‰Œ
â€¢ ä»–ä»¬ä¸æ‡‚è¯ˆå”¬ï¼Œåªåœ¨æœ‰è´§æ—¶ä¸‹æ³¨

ğŸš¨ ä½ çš„å¼ºç‰Œæ‰“ä¸èµ¢ï¼š
â€¢ æš—ä¸‰ â†’ å¼ƒç‰Œ
â€¢ ä¸¤å¯¹ â†’ å¼ƒç‰Œ
â€¢ è¶…å¯¹ â†’ å¼ƒç‰Œ
â€¢ é¡¶å¯¹ â†’ å¼ƒç‰Œ

âœ… åªæœ‰åšæœæ‰èƒ½è·Ÿ

ğŸ’¡ è®°ä½ä½ æ ‡è®°çš„é”™è¯¯ï¼š
"è¢«åŠ¨é±¼å¤§é¢ä¸‹æ³¨è¿˜è·Ÿæ³¨"
è¿™æ˜¯æœ€å®¹æ˜“çŠ¯çš„é”™è¯¯ï¼`
        }];
    }
    
    else if (scenario === 'river-nuts-check') {
        result.cards = [{
            type: 'success',
            title: 'ğŸ† ã€è¡ŒåŠ¨ã€‘ä¸‹æ³¨ Pot å–æœ€å¤§ä»·å€¼',
            content: `ã€åšæœ+å¯¹æ‰‹è¿‡ç‰Œã€‘

âœ… æ ‡å‡†æ‰“æ³•ï¼š
â€¢ ä¸‹æ³¨ 3/4 pot åˆ° pot
â€¢ æœ€å¤§åŒ–ä½ çš„ä»·å€¼

ğŸ’¡ å°ºåº¦é€‰æ‹©ï¼š
â€¢ å¯¹æ‰‹æ˜¯è·Ÿæ³¨ç«™ â†’ ä¸‹æ³¨pot
â€¢ å¯¹æ‰‹æ˜¯ç´§å‡¶ â†’ ä¸‹æ³¨2/3 pot
â€¢ å¦‚æœå¯¹æ‰‹åŠ æ³¨ â†’ å…¨ä¸‹ï¼

ğŸš¨ã€ç»ä¸è¦åšã€‘
âŒ è¿‡ç‰Œï¼ˆæµªè´¹åšæœï¼‰
âŒ å°é¢ä¸‹æ³¨ï¼ˆæ²¡æœ‰æœ€å¤§åŒ–ä»·å€¼ï¼‰

ä½ æœ‰åšæœå°±è¦æ‹¿æœ€å¤§ä»·å€¼ï¼`
        }];
    }
    
    else if (scenario === 'river-nuts-bet') {
        result.cards = [{
            type: 'success',
            title: 'ğŸ’ ã€è¡ŒåŠ¨ã€‘åŠ æ³¨æˆ–å…¨ä¸‹',
            content: `ã€åšæœ+å¯¹æ‰‹ä¸‹æ³¨ã€‘

âœ… æ ‡å‡†æ‰“æ³•ï¼š
â€¢ å¯¹æ‰‹å°é¢ä¸‹æ³¨ â†’ åŠ æ³¨3x
â€¢ å¯¹æ‰‹å¤§é¢ä¸‹æ³¨ â†’ å…¨ä¸‹ï¼

ğŸ’¡ ä¸ºä»€ä¹ˆè¦åŠ æ³¨ï¼š
â€¢ ä½ æœ‰åšæœï¼Œè¦æ‹¿æœ€å¤§ä»·å€¼
â€¢ å¯¹æ‰‹å·²ç»ä¸‹æ³¨ï¼Œè¯´æ˜ä»–æœ‰ç‰Œ
â€¢ ä¸åŠ æ³¨ = æµªè´¹ä»·å€¼

ğŸš¨ã€ç»ä¸è¦åšã€‘
âŒ åªè·Ÿæ³¨ï¼ˆæµªè´¹åšæœä»·å€¼ï¼‰
âŒ å®³æ€•å¯¹æ‰‹å¼ƒç‰Œï¼ˆä»–å·²ç»ä¸‹æ³¨äº†ï¼‰`
        }];
    }
    
    else if (scenario === 'river-strong-check') {
        result.cards = [{
            type: 'success',
            title: 'ğŸ’ª ã€è¡ŒåŠ¨ã€‘ä»·å€¼ä¸‹æ³¨ 1/2 - 2/3 pot',
            content: `ã€å¼ºç‰Œï¼ˆéåšæœï¼‰+å¯¹æ‰‹è¿‡ç‰Œã€‘

âœ… ç‰Œé¢å®‰å…¨ï¼š
â€¢ ä¸‹æ³¨2/3 potå–ä»·å€¼

âœ… ç‰Œé¢å±é™©ï¼ˆæœ‰å®Œæˆçš„å¬ç‰Œï¼‰ï¼š
â€¢ ä¸‹æ³¨1/2 potè–„ä»·å€¼
â€¢ æˆ–è€…è¿‡ç‰Œæ§åˆ¶

âš ï¸ å¦‚æœå¯¹æ‰‹åŠ æ³¨ï¼š
â€¢ è®¤çœŸè¯„ä¼°æ˜¯å¦è¢«è¶…è¶Š
â€¢ ç‰Œé¢å®Œæˆå¬ç‰Œ â†’ å¯èƒ½å¼ƒç‰Œ
â€¢ ç‰Œé¢å®‰å…¨ â†’ è·Ÿæ³¨

ğŸ’¡ æ ¸å¿ƒåŸåˆ™ï¼š
å¼ºç‰Œä¸æ˜¯åšæœ
æ²³ç‰Œè¢«åŠ æ³¨è¦èƒ½å¼ƒæ‰`
        }];
    }
    
    else if (scenario === 'river-bluffcatch') {
        result.cards = [{
            type: 'warning',
            title: 'ğŸ­ ã€è¡ŒåŠ¨ã€‘åˆ†æå¯¹æ‰‹èŒƒå›´å†³å®š',
            content: `ã€å¯¹æ‰‹ä¸‹æ³¨ï¼Œä½ åªæœ‰Bluff Catcherã€‘

âœ… å†³å®šå› ç´ ï¼š
â€¢ å¯¹æ‰‹ç±»å‹ï¼ˆæ¾å‡¶æ›´å¯èƒ½è¯ˆå”¬ï¼‰
â€¢ ç‰Œé¢ç»“æ„ï¼ˆå¬ç‰Œéƒ½æ²¡ä¸­ â†’ å¯¹æ‰‹å¯èƒ½è¯ˆå”¬ï¼‰
â€¢ ä¸‹æ³¨å°ºåº¦ï¼ˆè¶…é¢ä¸‹æ³¨ â†’ å¯èƒ½è¯ˆå”¬ï¼‰

âœ… è·Ÿæ³¨çš„æ¡ä»¶ï¼š
â€¢ å¯¹æ‰‹æ˜¯æ¾å‡¶LAG
â€¢ ç‰Œé¢å¬ç‰Œéƒ½æ²¡ä¸­
â€¢ ä½ çš„èµ”ç‡è¶³å¤Ÿå¥½

âŒ å¼ƒç‰Œçš„æ¡ä»¶ï¼š
â€¢ å¯¹æ‰‹æ˜¯è¢«åŠ¨ç©å®¶
â€¢ å¯¹æ‰‹æ˜¯ç´§å‡¶TAG
â€¢ ç‰Œé¢å®Œæˆäº†å¬ç‰Œ

ğŸ’¡ èŒä¸šæŠ€å·§ï¼š
ç®—å‡ºå¯¹æ‰‹éœ€è¦å¤šå°‘è¯ˆå”¬é¢‘ç‡ä½ æ‰èƒ½ç›ˆåˆ©
ç„¶ååˆ¤æ–­å¯¹æ‰‹æ˜¯å¦ä¼šè¯ˆå”¬é‚£ä¹ˆå¤š`
        }];
    }
    
    else if (scenario === 'river-missed-check') {
        result.cards = [{
            type: 'warning',
            title: 'ğŸ’¨ ã€è¡ŒåŠ¨ã€‘è¯ˆå”¬æˆ–æ”¾å¼ƒ',
            content: `ã€å¬ç‰Œæ²¡ä¸­+å¯¹æ‰‹è¿‡ç‰Œã€‘

âœ… å¯ä»¥è¯ˆå”¬çš„æƒ…å†µï¼š
â€¢ å¯¹æ‰‹èŒƒå›´å¾ˆå¼±ï¼ˆä¹‹å‰å¾ˆè¢«åŠ¨ï¼‰
â€¢ ä½ çš„èŒƒå›´æœ‰å¾ˆå¤šå®Œæˆçš„å¬ç‰Œ
â€¢ å¯¹æ‰‹æ˜¯ç´§å‡¶å®¹æ˜“å¼ƒç‰Œ

âœ… è¯ˆå”¬å°ºåº¦ï¼š
â€¢ ä¸‹æ³¨2/3-pot
â€¢ è¦çœ‹èµ·æ¥åƒä»·å€¼ä¸‹æ³¨

âŒ ä¸åº”è¯¥è¯ˆå”¬çš„æƒ…å†µï¼š
â€¢ å¯¹æ‰‹æ˜¯è·Ÿæ³¨ç«™
â€¢ ä½ ä¹‹å‰è¡¨ç°å¾ˆå¼±
â€¢ å¯¹æ‰‹å¯èƒ½é™·é˜±

ğŸ’¡ æ ¸å¿ƒåŸåˆ™ï¼š
è¯ˆå”¬è¦æœ‰æ•…äº‹
é—®è‡ªå·±ï¼šå¦‚æœæˆ‘çœŸçš„æœ‰åšæœï¼Œæˆ‘ä¼šè¿™æ ·æ‰“å—ï¼Ÿ`
        }];
    }
    
    else if (scenario === 'river-missed-bet') {
        result.cards = [{
            type: 'critical',
            title: 'ğŸ™ˆ ã€è¡ŒåŠ¨ã€‘ç›´æ¥å¼ƒç‰Œ',
            content: `ã€å¬ç‰Œæ²¡ä¸­+å¯¹æ‰‹ä¸‹æ³¨ã€‘

âŒ æ ‡å‡†æ‰“æ³•ï¼šå¼ƒç‰Œ

ğŸš¨ã€ç»ä¸è¦åšã€‘
âŒ è·Ÿæ³¨ï¼ˆä½ ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼‰
âŒ è¯ˆå”¬åŠ æ³¨ï¼ˆé£é™©å¤ªå¤§ï¼‰

ğŸ’¡ ä¸ºä»€ä¹ˆç›´æ¥å¼ƒç‰Œï¼š
â€¢ ä½ æ²¡æœ‰æˆç‰Œ
â€¢ ä½ æ²¡æœ‰æ‘Šç‰Œä»·å€¼
â€¢ è·Ÿæ³¨ = 100%è¾“é’±
â€¢ è¯ˆå”¬åŠ æ³¨ = é«˜é£é™©ä½æ”¶ç›Š

æ¥å—ç°å®ï¼Œä¿ç•™ç­¹ç æ‰“ä¸‹ä¸€æ‰‹`
        }];
    }
    
    // é»˜è®¤å¤„ç†ï¼šå¦‚æœåœºæ™¯æœªåŒ¹é…
    else {
        result.cards = [{
            type: 'info',
            title: 'ğŸ’¡ è¯·é€‰æ‹©å…·ä½“åœºæ™¯',
            content: `è¯·ä»ä¸Šæ–¹é€‰æ‹©ä¸€ä¸ªå…·ä½“çš„åœºæ™¯ï¼Œæˆ–ä½¿ç”¨"è‡ªå®šä¹‰è¯¦ç»†è¾“å…¥"åŠŸèƒ½ã€‚`
        }];
    }
    
    displayResult(result);
}

// ==================== è‡ªå®šä¹‰åˆ†æï¼ˆä¿æŒåŸæœ‰åŠŸèƒ½ï¼‰====================
function analyze() {
    let pot = parseFloat(document.getElementById('potSize').value) || 50;
    if (pot <= 0) pot = 50;
    
    const bet = {
        third: Math.round(pot * 0.33),
        half: Math.round(pot * 0.5),
        twoThird: Math.round(pot * 0.67),
        pot: pot
    };
    
    let result = { cards: [], warning: null, fullscreen: false, personal: [] };
    const { position, street, hand, action, villain, danger } = state;
    
    const mistakes = {
        m1: document.getElementById('m1')?.checked,
        m2: document.getElementById('m2')?.checked,
        m3: document.getElementById('m3')?.checked,
        m4: document.getElementById('m4')?.checked,
        m5: document.getElementById('m5')?.checked
    };
    
    // æ ¸å¿ƒåœºæ™¯ï¼šå…¨å±è­¦å‘Š
    if (street === 'river' && danger === 'completed' && 
        (action === 'bet-big' || action === 'all-in') &&
        (hand === 'set' || hand === 'top-two' || hand === 'overpair' || hand === 'top-pair')) {
        
        result.fullscreen = true;
        result.warning = {
            title: `åœï¼ä½ çš„${getHandName(hand)}å·²ç»è¾“äº†ï¼`,
            text: 'æ²³ç‰Œå®Œæˆäº†åŒèŠ±/é¡ºå­\nå¯¹æ‰‹å¤§é¢ä¸‹æ³¨ = 99%æœ‰åšæœ',
            action: 'ã€å¼ƒç‰Œã€‘æ˜¯æ­£ç¡®ç­”æ¡ˆ',
            dont: 'âŒ ä¸è¦è·Ÿæ³¨\nâŒ ä¸è¦Hero Call\nâŒ ä¸è¦æƒ³"ä»–å¯èƒ½è¯ˆå”¬"'
        };
        
        if (mistakes.m2) result.personal.push('ğŸš¨ ä½ æ ‡è®°è¿‡ï¼šæ²³ç‰Œå®Œæˆå¬ç‰Œèˆä¸å¾—å¼ƒæš—ä¸‰');
        
        result.cards.push({
            type: 'critical',
            title: 'ğŸš¨ ã€è¡ŒåŠ¨ã€‘å¼ƒç‰Œï¼',
            content: `ã€æƒ…å†µåˆ†æã€‘
â€¢ æ²³ç‰Œå®Œæˆäº†å¬ç‰Œï¼ˆåŒèŠ±/é¡ºå­ï¼‰
â€¢ å¯¹æ‰‹å¤§é¢ä¸‹æ³¨
â€¢ ä½ çš„${getHandName(hand)}å·²ç»è¢«è¶…è¶Š

ğŸ’€ã€å¯¹æ‰‹99%æœ‰åšæœã€‘
${villain === 'fish' ? 'â€¢ è¢«åŠ¨é±¼å¤§é¢ä¸‹æ³¨ = 100%æœ‰ç‰Œï¼' : 'â€¢ æ²³ç‰Œå¤§é¢ä¸‹æ³¨é€šå¸¸æ˜¯å¼ºç‰Œ'}

ã€èŒä¸šç©å®¶çš„é€‰æ‹©ã€‘å¼ƒç‰Œï¼çœä¸‹50-200BB`
        });
    }
    
    else if (villain === 'fish' && (action === 'bet-big' || action === 'all-in') && hand !== 'nuts') {
        result.fullscreen = true;
        result.warning = {
            title: 'è¢«åŠ¨é±¼å¤§é¢ä¸‹æ³¨ï¼',
            text: 'è¢«åŠ¨é±¼å¤§é¢ä¸‹æ³¨ = 100%æœ‰å¼ºç‰Œ\nä»–ä¸ä¼šè¯ˆå”¬',
            action: 'ã€å¼ƒç‰Œã€‘é™¤éä½ æœ‰åšæœ',
            dont: 'âŒ ä¸è¦è·Ÿæ³¨\nâŒ ä¸è¦æƒ³"ä»–å¯èƒ½åœ¨è¯ˆå”¬"'
        };
        
        if (mistakes.m3) result.personal.push('ğŸš¨ ä½ æ ‡è®°è¿‡ï¼šè¢«åŠ¨é±¼å¤§é¢ä¸‹æ³¨è¿˜è·Ÿæ³¨');
        
        result.cards.push({
            type: 'critical',
            title: 'ğŸš¨ ã€è¡ŒåŠ¨ã€‘å¼ƒç‰Œï¼',
            content: `ã€å…³é”®ä¿¡æ¯ã€‘
â€¢ å¯¹æ‰‹æ˜¯è¢«åŠ¨é±¼
â€¢ è¢«åŠ¨ç©å®¶å¤§é¢ä¸‹æ³¨ = 100%æœ‰ç‰Œ
â€¢ ä»–ä»¬ä¸æ‡‚è¯ˆå”¬ï¼Œåªåœ¨æœ‰è´§æ—¶ä¸‹æ³¨

ğŸ’€ã€ä½ çš„${getHandName(hand)}æ‰“ä¸èµ¢ã€‘
å¼ƒç‰Œæ˜¯å”¯ä¸€æ­£ç¡®é€‰æ‹©`
        });
    }
    
    // è½¬ç‰Œåœˆé€»è¾‘
    else if (street === 'turn') {
        if (hand === 'nuts') {
            result.cards.push({
                type: 'success',
                title: `ğŸ¯ ã€è¡ŒåŠ¨ã€‘ä¸‹æ³¨ ${bet.twoThird}BBï¼ˆ2/3åº•æ± ï¼‰`,
                content: `ã€åŸå› ã€‘ä½ æœ‰åšæœï¼Œä»·å€¼æœ€å¤§åŒ–\n\nã€å¦‚æœå¯¹æ‰‹åŠ æ³¨ã€‘ç›´æ¥å…¨ä¸‹ï¼\n\nğŸš¨ã€ç»ä¸è¦åšã€‘\nâŒ è¿‡ç‰Œæ…¢æ‰“\nâŒ å°é¢ä¸‹æ³¨`
            });
        }
        else if (hand === 'set') {
            if (danger === 'dangerous' || danger === 'completed') {
                result.cards.push({
                    type: 'warning',
                    title: `ğŸ¯ ã€è¡ŒåŠ¨ã€‘ä¸‹æ³¨ ${bet.twoThird}BBï¼ˆ2/3åº•æ± Â·ä¿æŠ¤ï¼‰`,
                    content: `ã€åŸå› ã€‘æš—ä¸‰ä½†ç‰Œé¢å±é™©ï¼Œå¿…é¡»ä¿æŠ¤\n\nã€å¦‚æœå¯¹æ‰‹åŠ æ³¨ã€‘è°¨æ…è¯„ä¼°\n\nğŸ’¡ã€æ²³ç‰Œé¢„è­¦ã€‘å®Œæˆå¬ç‰Œ + å¯¹æ‰‹å¤§é¢ä¸‹æ³¨ â†’ å¼ƒæš—ä¸‰ï¼`
                });
                if (mistakes.m4) result.personal.push('ğŸš¨ ä½ æ ‡è®°è¿‡ï¼šè½¬ç‰Œç»™å¬ç‰Œå…è´¹æŠ½ç‰Œæœºä¼š');
            } else {
                result.cards.push({
                    type: 'success',
                    title: `ğŸ¯ ã€è¡ŒåŠ¨ã€‘ä¸‹æ³¨ ${bet.twoThird}BBï¼ˆ2/3åº•æ± ï¼‰`,
                    content: `ã€åŸå› ã€‘ç‰Œé¢å®‰å…¨ï¼Œæš—ä¸‰ä»·å€¼æœ€å¤§åŒ–\n\nã€å¦‚æœå¯¹æ‰‹åŠ æ³¨ã€‘å…¨ä¸‹ï¼`
                });
            }
        }
        else if (hand === 'top-two') {
            if (danger === 'dangerous' || danger === 'completed') {
                if (action === 'bet-big' || action === 'all-in') {
                    result.cards.push({
                        type: 'critical',
                        title: `ğŸš¨ ã€è¡ŒåŠ¨ã€‘å¼ƒç‰Œæˆ–å°é¢è·Ÿæ³¨`,
                        content: `ã€æƒ…å†µã€‘é¡¶ä¸¤å¯¹ + ç‰Œé¢å±é™© + å¯¹æ‰‹å¤§é¢ä¸‹æ³¨\n\nã€å†³ç­–ã€‘\nâ€¢ å¯¹æ‰‹æ˜¯ç´§å‡¶TAG â†’ å¼ƒç‰Œ\nâ€¢ å¯¹æ‰‹æ˜¯æ¾å‡¶LAG â†’ å¯ä»¥è·Ÿæ³¨\nâ€¢ å¯¹æ‰‹æ˜¯è¢«åŠ¨é±¼ â†’ ç»å¯¹å¼ƒç‰Œï¼`
                    });
                    if (mistakes.m1) result.personal.push('ğŸš¨ ä½ æ ‡è®°è¿‡ï¼šè½¬ç‰Œé¡¶å¯¹/ä¸¤å¯¹è·Ÿæ³¨å¤§é¢åŠ æ³¨');
                } else {
                    result.cards.push({
                        type: 'warning',
                        title: `ğŸ¯ ã€è¡ŒåŠ¨ã€‘ä¸‹æ³¨ ${bet.half}BBï¼ˆ1/2åº•æ± Â·æ§åˆ¶ï¼‰`,
                        content: `ã€åŸå› ã€‘ç‰Œé¢å±é™©ï¼Œæ§åˆ¶åº•æ± \n\nã€å¦‚æœå¯¹æ‰‹åŠ æ³¨ã€‘\nâ€¢ å°åŠ æ³¨ â†’ è·Ÿæ³¨\nâ€¢ å¤§åŠ æ³¨(â‰¥pot) â†’ å¼ƒç‰Œï¼\n\nğŸ’¡ã€æ²³ç‰Œé¢„è­¦ã€‘å®Œæˆå¬ç‰Œ + å¯¹æ‰‹ä¸‹æ³¨ â†’ å¼ƒæ‰ä¸¤å¯¹ï¼`
                    });
                }
            } else {
                result.cards.push({
                    type: 'success',
                    title: `ğŸ¯ ã€è¡ŒåŠ¨ã€‘ä¸‹æ³¨ ${bet.twoThird}BBï¼ˆ2/3åº•æ± ï¼‰`,
                    content: `ã€åŸå› ã€‘ç‰Œé¢å®‰å…¨ï¼Œé¡¶ä¸¤å¯¹ä»·å€¼ä¸‹æ³¨\n\nã€å¦‚æœå¯¹æ‰‹åŠ æ³¨ã€‘è°¨æ…è¯„ä¼°ï¼ˆå¯èƒ½æœ‰æš—ä¸‰ï¼‰`
                });
            }
        }
        else if (hand === 'overpair' || hand === 'top-pair') {
            if (danger === 'dangerous' || danger === 'completed') {
                if (action === 'bet-big' || action === 'all-in') {
                    result.cards.push({
                        type: 'critical',
                        title: 'ğŸš¨ ã€è¡ŒåŠ¨ã€‘å¼ƒç‰Œ',
                        content: `ã€æƒ…å†µã€‘ä¸€å¯¹ + ç‰Œé¢å±é™© + å¯¹æ‰‹å¤§é¢ä¸‹æ³¨\n\nğŸ’€ å¼ƒç‰Œæ˜¯æ­£ç¡®é€‰æ‹©`
                    });
                } else {
                    result.cards.push({
                        type: 'warning',
                        title: `ğŸ¯ ã€è¡ŒåŠ¨ã€‘è¿‡ç‰Œ æˆ– ä¸‹æ³¨ ${bet.third}BB`,
                        content: `ã€åŸå› ã€‘ä¸€å¯¹ç‰Œ + ç‰Œé¢å±é™© = æ§åˆ¶åº•æ± \n\nã€å¦‚æœå¯¹æ‰‹ä¸‹æ³¨ã€‘\nâ€¢ å°é¢ â†’ å¯è·Ÿæ³¨\nâ€¢ å¤§é¢ â†’ å¼ƒç‰Œ`
                    });
                }
            } else {
                result.cards.push({
                    type: 'success',
                    title: `ğŸ¯ ã€è¡ŒåŠ¨ã€‘ä¸‹æ³¨ ${bet.half}BBï¼ˆ1/2åº•æ± ï¼‰`,
                    content: `ã€åŸå› ã€‘ç‰Œé¢å®‰å…¨ï¼Œä¿æŠ¤+è–„ä»·å€¼\n\nã€å¦‚æœå¯¹æ‰‹åŠ æ³¨â‰¥potã€‘å¼ƒç‰Œ`
                });
            }
        }
        else if (hand === 'nuts-draw') {
            if (action === 'check') {
                result.cards.push({
                    type: 'success',
                    title: `ğŸ¯ ã€è¡ŒåŠ¨ã€‘ä¸‹æ³¨ ${bet.half}BBï¼ˆåŠè¯ˆå”¬ï¼‰`,
                    content: `ã€åŸå› ã€‘å¯¹æ‰‹è¿‡ç‰Œ â†’ åŠè¯ˆå”¬\nâ€¢ å¯¹æ‰‹å¼ƒç‰Œ â†’ ä½ èµ¢\nâ€¢ å¯¹æ‰‹è·Ÿæ³¨ â†’ ä½ è¿˜æœ‰çº¦36%èƒœç‡`
                });
            } else if (action === 'bet-big' || action === 'all-in') {
                result.cards.push({
                    type: 'critical',
                    title: 'ğŸš¨ ã€è¡ŒåŠ¨ã€‘å¼ƒç‰Œï¼ˆèµ”ç‡ä¸å¤Ÿï¼‰',
                    content: `ã€è®¡ç®—ã€‘å¯¹æ‰‹ä¸‹æ³¨pot â†’ èµ”ç‡çº¦33%ï¼Œä½ èƒœç‡çº¦18%\n\nğŸš¨ èƒœç‡ < èµ”ç‡ â†’ å¼ƒç‰Œ`
                });
                if (mistakes.m5) result.personal.push('ğŸš¨ ä½ æ ‡è®°è¿‡ï¼šä¸è®¡ç®—èµ”ç‡å°±è¿½å¬ç‰Œ');
            } else {
                result.cards.push({
                    type: 'warning',
                    title: 'ğŸ¯ ã€è¡ŒåŠ¨ã€‘è®¡ç®—èµ”ç‡å†³å®š',
                    content: `ã€åŒèŠ±å¬ç‰Œã€‘çº¦18%èƒœç‡\n\nè·Ÿæ³¨é‡‘é¢ Ã· æ€»åº•æ±  = éœ€è¦èƒœç‡\nâ€¢ èƒœç‡ > éœ€è¦èƒœç‡ â†’ è·Ÿæ³¨\nâ€¢ èƒœç‡ < éœ€è¦èƒœç‡ â†’ å¼ƒç‰Œ`
                });
            }
        }
        else if (hand === 'draw') {
            result.cards.push({
                type: 'warning',
                title: 'ğŸ¯ ã€è¡ŒåŠ¨ã€‘è®¡ç®—èµ”ç‡å†³å®š',
                content: `ã€å¬ç‰Œèƒœç‡ã€‘\nâ€¢ ä¸¤å¤´é¡º(8outs)â‰ˆ16%\nâ€¢ å¡é¡º(4outs)â‰ˆ8%\n\nã€å†³ç­–ã€‘\nâ€¢ å¯¹æ‰‹è¿‡ç‰Œ â†’ å…è´¹çœ‹æ²³ç‰Œ\nâ€¢ å¯¹æ‰‹å°é¢ä¸‹æ³¨ â†’ è®¡ç®—èµ”ç‡\nâ€¢ å¯¹æ‰‹å¤§é¢ä¸‹æ³¨ â†’ å¼ƒç‰Œ`
            });
        }
        else if (hand === 'nothing' || hand === 'mid-pair') {
            result.cards.push({
                type: 'critical',
                title: 'ğŸš¨ ã€è¡ŒåŠ¨ã€‘è¿‡ç‰Œ-å¼ƒç‰Œ',
                content: `ã€åŸå› ã€‘ç‰Œå¤ªå¼±ï¼Œæ²¡æœ‰ä»·å€¼\nä¸è¦è¯ˆå”¬ï¼ˆè½¬ç‰Œè¯ˆå”¬æˆåŠŸç‡ä½ï¼‰\n\nğŸ’¡ åŠæ—¶æ­¢æŸ = èŒä¸šç©å®¶æ ‡å¿—`
            });
        }
    }
    
    // æ²³ç‰Œåœˆé€»è¾‘
    else if (street === 'river') {
        if (hand === 'nuts') {
            if (action === 'check') {
                result.cards.push({
                    type: 'success',
                    title: `ğŸ¯ ã€è¡ŒåŠ¨ã€‘ä¸‹æ³¨ ${bet.pot}BBï¼ˆPotï¼‰`,
                    content: `ã€åŸå› ã€‘ä½ æœ‰åšæœï¼Œæœ€å¤§åŒ–ä»·å€¼\n\nã€å¯¹æ‰‹åŠ æ³¨ã€‘å…¨ä¸‹ï¼`
                });
            } else {
                result.cards.push({
                    type: 'success',
                    title: 'ğŸ¯ ã€è¡ŒåŠ¨ã€‘åŠ æ³¨æˆ–å…¨ä¸‹',
                    content: `ã€åŸå› ã€‘ä½ æœ‰åšæœï¼Œå¯¹æ‰‹ä¸‹æ³¨äº†\n\nâ€¢ å¯¹æ‰‹å°é¢ä¸‹æ³¨ â†’ åŠ æ³¨3x\nâ€¢ å¯¹æ‰‹å¤§é¢ä¸‹æ³¨ â†’ å…¨ä¸‹`
                });
            }
        }
        else if (hand === 'set' || hand === 'top-two') {
            if (danger === 'safe' || danger === 'normal') {
                if (action === 'check') {
                    result.cards.push({
                        type: 'success',
                        title: `ğŸ¯ ã€è¡ŒåŠ¨ã€‘ä¸‹æ³¨ ${bet.twoThird}BBï¼ˆä»·å€¼ï¼‰`,
                        content: `ã€åŸå› ã€‘ç‰Œé¢å®‰å…¨ï¼Œå¯¹æ‰‹è¿‡ç‰Œï¼Œä»·å€¼ä¸‹æ³¨\n\nã€å¯¹æ‰‹åŠ æ³¨ã€‘è°¨æ…ï¼ˆå¯èƒ½æ…¢æ‰“åšæœï¼‰`
                    });
                } else {
                    result.cards.push({
                        type: 'warning',
                        title: 'ğŸ¯ ã€è¡ŒåŠ¨ã€‘è·Ÿæ³¨æˆ–å¼ƒç‰Œ',
                        content: `ã€å†³ç­–ã€‘\nâ€¢ å¯¹æ‰‹å°é¢ä¸‹æ³¨ â†’ è·Ÿæ³¨\nâ€¢ å¯¹æ‰‹å¤§é¢ä¸‹æ³¨ â†’ è¯„ä¼°æ˜¯å¦è¢«è¶…è¶Š`
                    });
                }
            } else {
                if (action === 'check') {
                    result.cards.push({
                        type: 'warning',
                        title: `ğŸ¯ ã€è¡ŒåŠ¨ã€‘ä¸‹æ³¨ ${bet.half}BBï¼ˆè–„ä»·å€¼/æ¢åº•ï¼‰`,
                        content: `ã€åŸå› ã€‘ç‰Œé¢å±é™©ï¼Œä½†å¯¹æ‰‹è¿‡ç‰Œæ˜¾ç¤ºå¼±åŠ¿\n\nã€å¦‚æœå¯¹æ‰‹åŠ æ³¨ã€‘è€ƒè™‘å¼ƒç‰Œ`
                    });
                } else if (action === 'bet-small') {
                    result.cards.push({
                        type: 'warning',
                        title: 'ğŸ¯ ã€è¡ŒåŠ¨ã€‘è·Ÿæ³¨',
                        content: `ã€åŸå› ã€‘å¯¹æ‰‹å°é¢ä¸‹æ³¨ï¼Œå¯ä»¥è·Ÿæ³¨æŠ“è¯ˆå”¬\n\nã€æ³¨æ„ã€‘å¦‚æœå¯¹æ‰‹åç»­å¤§é¢ä¸‹æ³¨ â†’ è€ƒè™‘å¼ƒç‰Œ`
                    });
                } else {
                    result.cards.push({
                        type: 'critical',
                        title: 'ğŸš¨ ã€è¡ŒåŠ¨ã€‘è°¨æ…å¼ƒç‰Œ',
                        content: `ã€æƒ…å†µã€‘ç‰Œé¢å±é™©/å®Œæˆå¬ç‰Œ + å¯¹æ‰‹å¤§é¢ä¸‹æ³¨\n\nä½ çš„${getHandName(hand)}å¯èƒ½å·²ç»è¾“äº†\n\nğŸ’¡ ä¿å®ˆå¼ƒç‰Œæ˜¯æ­£ç¡®é€‰æ‹©`
                    });
                }
            }
        }
        else if (hand === 'overpair' || hand === 'top-pair' || hand === 'mid-pair') {
            if (action === 'bet-big' || action === 'all-in') {
                result.cards.push({
                    type: 'critical',
                    title: 'ğŸš¨ ã€è¡ŒåŠ¨ã€‘å¼ƒç‰Œ',
                    content: `ã€åŸå› ã€‘æ²³ç‰Œå¯¹æ‰‹å¤§é¢ä¸‹æ³¨ï¼Œä½ åªæœ‰ä¸€å¯¹ï¼Œæ‰“ä¸èµ¢ä»»ä½•ä»·å€¼ç‰Œ\n\nâŒ ä¸è¦Hero Call`
                });
            } else if (action === 'check') {
                if (danger === 'safe' || danger === 'normal') {
                    result.cards.push({
                        type: 'success',
                        title: `ğŸ¯ ã€è¡ŒåŠ¨ã€‘ä¸‹æ³¨ ${bet.half}BBï¼ˆè–„ä»·å€¼ï¼‰`,
                        content: `ã€åŸå› ã€‘å¯¹æ‰‹è¿‡ç‰Œï¼Œç‰Œé¢å®‰å…¨\n\nã€å¯¹æ‰‹åŠ æ³¨ã€‘å¼ƒç‰Œ`
                    });
                } else {
                    result.cards.push({
                        type: 'warning',
                        title: 'ğŸ¯ ã€è¡ŒåŠ¨ã€‘è¿‡ç‰Œï¼ˆæ‘Šç‰Œï¼‰',
                        content: `ã€åŸå› ã€‘ç‰Œé¢å±é™©ï¼Œä¸è¦ä¸‹æ³¨\n\nè¿‡ç‰Œçœ‹æ‘Šç‰Œ`
                    });
                }
            } else {
                result.cards.push({
                    type: 'warning',
                    title: 'ğŸ¯ ã€è¡ŒåŠ¨ã€‘å¼ƒç‰Œæˆ–è·Ÿæ³¨',
                    content: `ã€å†³ç­–ã€‘\nâ€¢ é¡¶å¯¹å¥½è¸¢è„š + ç‰Œé¢å®‰å…¨ â†’ å¯è·Ÿ\nâ€¢ å…¶ä»–æƒ…å†µ â†’ å¼ƒç‰Œ`
                });
            }
        }
        else if (hand === 'nuts-draw' || hand === 'draw' || hand === 'nothing') {
            if (action === 'check') {
                result.cards.push({
                    type: 'warning',
                    title: `ğŸ¯ ã€è¡ŒåŠ¨ã€‘è¯ˆå”¬ ${bet.twoThird}BB æˆ– æ”¾å¼ƒ`,
                    content: `ã€é€‰é¡¹ã€‘\nâ€¢ å¯¹æ‰‹èŒƒå›´å¼± â†’ è¯ˆå”¬ä¸‹æ³¨${bet.twoThird}BB\nâ€¢ å¯¹æ‰‹å¯èƒ½é™·é˜± â†’ è¿‡ç‰Œæ”¾å¼ƒ`
                });
            } else {
                result.cards.push({
                    type: 'critical',
                    title: 'ğŸš¨ ã€è¡ŒåŠ¨ã€‘å¼ƒç‰Œ',
                    content: `ã€åŸå› ã€‘å¬ç‰Œæ²¡ä¸­ + å¯¹æ‰‹ä¸‹æ³¨\n\nç›´æ¥å¼ƒç‰Œï¼Œä¸è¦è¯ˆå”¬åŠ æ³¨`
                });
            }
        }
    }
    
    // ç¿»ç‰Œåœˆé€»è¾‘
    else if (street === 'flop') {
        if (hand === 'nuts' || hand === 'set') {
            result.cards.push({
                type: 'success',
                title: `ğŸ¯ ã€è¡ŒåŠ¨ã€‘ä¸‹æ³¨ ${bet.half}BB - ${bet.twoThird}BB`,
                content: `ã€åŸå› ã€‘å¼ºç‰Œï¼Œå»ºç«‹åº•æ± \n\nâ€¢ å¹²ç‡¥ç‰Œé¢ â†’ ${bet.half}BB\nâ€¢ æ¹¿æ¶¦ç‰Œé¢ â†’ ${bet.twoThird}BB`
            });
        } else if (hand === 'top-two' || hand === 'overpair' || hand === 'top-pair') {
            result.cards.push({
                type: 'success',
                title: `ğŸ¯ ã€è¡ŒåŠ¨ã€‘ä¸‹æ³¨ ${bet.half}BB`,
                content: `ã€åŸå› ã€‘æŒç»­ä¸‹æ³¨ï¼Œä¿æŠ¤+ä»·å€¼\n\nã€å¯¹æ‰‹åŠ æ³¨ã€‘è¯„ä¼°å†³å®š`
            });
        } else if (hand === 'nuts-draw' || hand === 'draw') {
            result.cards.push({
                type: 'success',
                title: `ğŸ¯ ã€è¡ŒåŠ¨ã€‘ä¸‹æ³¨ ${bet.half}BB æˆ– è¿‡ç‰Œ`,
                content: `ã€é€‰é¡¹ã€‘\nâ€¢ ä¸‹æ³¨${bet.half}BBåŠè¯ˆå”¬\nâ€¢ è¿‡ç‰Œå…è´¹çœ‹è½¬ç‰Œ\n\nã€å¯¹æ‰‹ä¸‹æ³¨ã€‘è®¡ç®—èµ”ç‡å†³å®š`
            });
        } else {
            result.cards.push({
                type: 'warning',
                title: 'ğŸ¯ ã€è¡ŒåŠ¨ã€‘è¿‡ç‰Œ',
                content: `ã€åŸå› ã€‘å¼±ç‰Œï¼Œä¸è¦æŠ•å…¥\n\nå¯¹æ‰‹ä¸‹æ³¨ â†’ å¼ƒç‰Œ`
            });
        }
    }
    
    if (street === 'turn') {
        document.getElementById('continueMode').style.display = 'block';
    }
    
    displayResult(result);
}

function getHandName(hand) {
    const names = {
        'nuts': 'åšæœ', 'set': 'æš—ä¸‰', 'top-two': 'é¡¶ä¸¤å¯¹',
        'overpair': 'è¶…å¯¹', 'top-pair': 'é¡¶å¯¹', 'mid-pair': 'ä¸­å¯¹',
        'nuts-draw': 'Nutså¬ç‰Œ', 'draw': 'å¬ç‰Œ', 'nothing': 'ç©ºæ°”'
    };
    return names[hand] || hand;
}

function displayResult(result) {
    if (result.fullscreen && result.warning) {
        document.getElementById('warningTitle').textContent = result.warning.title;
        document.getElementById('warningText').textContent = result.warning.text;
        document.getElementById('warningAction').textContent = result.warning.action;
        document.getElementById('warningDont').textContent = result.warning.dont;
        document.getElementById('fullscreenWarning').classList.add('show');
    }
    
    const personalEl = document.getElementById('personalWarning');
    if (result.personal && result.personal.length > 0) {
        personalEl.innerHTML = result.personal.map(p => 
            `<div class="personal-warning">
                <div class="personal-warning-title">âš ï¸ ä½ çš„å¸¸çŠ¯é”™è¯¯</div>
                <div class="personal-warning-text">${p}</div>
            </div>`
        ).join('');
    } else {
        personalEl.innerHTML = '';
    }
    
    const container = document.getElementById('resultContainer');
    container.innerHTML = result.cards.map(card => 
        `<div class="result-card result-${card.type}">
            <div class="result-title">${card.title}</div>
            <div class="result-content">${card.content}</div>
        </div>`
    ).join('');
    
    document.getElementById('resultSection').classList.add('show');
    document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
}

function confirmFold() {
    document.getElementById('fullscreenWarning').classList.remove('show');
}

function closeWarning() {
    document.getElementById('fullscreenWarning').classList.remove('show');
}

function resetAll() {
    document.getElementById('potSize').value = '50';
    document.querySelectorAll('.btn').forEach(btn => btn.classList.remove('active'));
    document.querySelector('[data-position="ip"]')?.classList.add('active');
    document.querySelector('[data-street="turn"]')?.classList.add('active');
    document.querySelector('[data-hand="top-two"]')?.classList.add('active');
    document.querySelector('[data-action="check"]')?.classList.add('active');
    document.querySelector('[data-villain="unknown"]')?.classList.add('active');
    document.querySelector('[data-danger="dangerous"]')?.classList.add('active');
    
    document.getElementById('resultSection').classList.remove('show');
    document.getElementById('customMode').classList.remove('show');
    document.getElementById('continueMode').style.display = 'none';
    document.getElementById('personalWarning').innerHTML = '';
    document.getElementById('resultContainer').innerHTML = '';
    document.getElementById('fullscreenWarning').classList.remove('show');
    
    // é‡ç½®è¡—é“é€‰é¡¹å¡
    document.querySelectorAll('.street-tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.scenario-panel').forEach(p => p.classList.remove('active'));
    document.querySelector('.street-tab').classList.add('active');
    document.getElementById('panel-preflop').classList.add('active');
    
    state = {
        position: 'ip', street: 'turn', hand: 'top-two',
        action: 'check', villain: 'unknown', danger: 'dangerous'
    };
    
    window.scrollTo({ top: 0, behavior: 'smooth' });
}
