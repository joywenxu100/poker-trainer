<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>8äººæ¡Œç¿»å‰èŒƒå›´çƒ­åŠ›å›¾ PRO - æ·±ç­¹ç +å¤šäººåº•æ± ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            color: #e0e0e0;
            padding: 12px;
            line-height: 1.6;
        }

        .container {
            max-width: 950px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: #ff9d50;
            margin-bottom: 8px;
            font-size: 22px;
        }

        .subtitle {
            text-align: center;
            color: #999;
            margin-bottom: 15px;
            font-size: 12px;
        }

        .back-btn {
            display: inline-block;
            padding: 6px 14px;
            background: #ff9d50;
            color: #0a0e27;
            text-decoration: none;
            border-radius: 6px;
            font-weight: bold;
            margin-bottom: 12px;
            font-size: 13px;
        }

        .control-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 157, 80, 0.3);
        }

        .control-label {
            font-size: 13px;
            color: #ffd700;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .selector-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 6px;
        }

        .selector-btn {
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 157, 80, 0.3);
            border-radius: 6px;
            color: #999;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            text-align: center;
            font-size: 11px;
        }

        .selector-btn:hover {
            border-color: #ff9d50;
            color: #ff9d50;
        }

        .selector-btn.active {
            background: #ff9d50;
            color: #0a0e27;
            border-color: #ff9d50;
        }

        .range-info {
            background: linear-gradient(135deg, rgba(255, 157, 80, 0.15), rgba(255, 107, 157, 0.15));
            border: 2px solid #ff9d50;
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 15px;
            text-align: center;
        }

        .range-title {
            font-size: 16px;
            font-weight: bold;
            color: #ff9d50;
            margin-bottom: 4px;
        }

        .range-percentage {
            font-size: 22px;
            color: #00d4ff;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .range-desc {
            font-size: 11px;
            color: #ffd700;
        }

        .heatmap-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 15px;
            overflow-x: auto;
        }

        .heatmap {
            display: grid;
            grid-template-columns: repeat(13, 1fr);
            gap: 2px;
            max-width: 650px;
            margin: 0 auto;
        }

        .hand-cell {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 11px;
            border-radius: 3px;
            cursor: pointer;
            transition: transform 0.2s;
            position: relative;
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .hand-cell:hover {
            transform: scale(1.2);
            z-index: 10;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.6);
        }

        /* é¢œè‰²æ–¹æ¡ˆ */
        .freq-0 { background: #f5f5f5; color: #999; }
        .freq-25 { background: #fff4e6; color: #e67700; }
        .freq-50 { background: #fff176; color: #f57f17; }
        .freq-75 { background: #aed581; color: #33691e; }
        .freq-100 { background: #4caf50; color: #fff; }
        
        .hand-cell.pair {
            font-weight: 900;
        }

        .hand-cell.suited::after {
            content: 's';
            font-size: 7px;
            position: absolute;
            top: 1px;
            right: 2px;
            opacity: 0.7;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
            margin-top: 12px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 11px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .note {
            background: rgba(255, 215, 0, 0.1);
            border-left: 3px solid #ffd700;
            padding: 10px;
            margin: 12px 0;
            border-radius: 4px;
            font-size: 11px;
            color: #ffd700;
        }

        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
            overflow-x: auto;
        }

        .tab-btn {
            padding: 10px 18px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 157, 80, 0.3);
            border-radius: 8px;
            color: #999;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            font-size: 13px;
            white-space: nowrap;
        }

        .tab-btn:hover {
            border-color: #ff9d50;
            color: #ff9d50;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            border-color: #667eea;
        }

        @media (max-width: 768px) {
            body {
                padding: 8px;
            }

            h1 {
                font-size: 18px;
            }

            .hand-cell {
                font-size: 9px;
            }

            .heatmap {
                gap: 1px;
            }

            .selector-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="poker_trainer.html" class="back-btn">â† è¿”å›è®­ç»ƒå™¨</a>

        <h1>ğŸ”¥ 8äººæ¡Œç¿»å‰èŒƒå›´çƒ­åŠ›å›¾ PRO</h1>
        <p class="subtitle">æ·±ç­¹ç +å¤šäººåº•æ± +å¯¹æ‰‹ç±»å‹ - ä¸“ä¸šç‰ˆå¯è§†åŒ–è®­ç»ƒç³»ç»Ÿ</p>

        <!-- æ ‡ç­¾é¡µåˆ‡æ¢ -->
        <div class="tabs">
            <div class="tab-btn active" onclick="switchTab('standard')">æ ‡å‡†åœºæ™¯</div>
            <div class="tab-btn" onclick="switchTab('multiway')">å¤šäººåº•æ± </div>
            <div class="tab-btn" onclick="switchTab('defense')">é˜²å®ˆèŒƒå›´</div>
            <div class="tab-btn" onclick="switchTab('advanced')">é«˜çº§åœºæ™¯</div>
        </div>

        <!-- æ ‡å‡†åœºæ™¯ -->
        <div id="tab-standard" class="tab-content">
            <!-- ç­¹ç æ·±åº¦é€‰æ‹© -->
            <div class="control-section">
                <div class="control-label">ğŸ’° ç­¹ç æ·±åº¦ï¼ˆå½±å“æŠ•æœºç‰Œä»·å€¼ï¼‰</div>
                <div class="selector-grid">
                    <div class="selector-btn" onclick="setStack('short')">20-50BB<br><small>çŸ­ç­¹ç </small></div>
                    <div class="selector-btn active" onclick="setStack('standard')">50-100BB<br><small>æ ‡å‡†</small></div>
                    <div class="selector-btn" onclick="setStack('deep')">100-200BB<br><small>æ·±ç­¹ç </small></div>
                    <div class="selector-btn" onclick="setStack('verydeep')">200-300BB<br><small>å¾ˆæ·±</small></div>
                    <div class="selector-btn" onclick="setStack('ultradeep')">300BB+<br><small>è¶…æ·±</small></div>
                </div>
            </div>

            <!-- ä½ç½®é€‰æ‹© -->
            <div class="control-section">
                <div class="control-label">ğŸ“ ä½ç½®é€‰æ‹©</div>
                <div class="selector-grid">
                    <div class="selector-btn active" onclick="setPosition('UTG')">UTG<br><small>5-8%</small></div>
                    <div class="selector-btn" onclick="setPosition('UTG1')">UTG+1<br><small>8-11%</small></div>
                    <div class="selector-btn" onclick="setPosition('MP')">MP<br><small>12-16%</small></div>
                    <div class="selector-btn" onclick="setPosition('CO')">CO<br><small>18-24%</small></div>
                    <div class="selector-btn" onclick="setPosition('BTN')">BTN<br><small>25-35%</small></div>
                    <div class="selector-btn" onclick="setPosition('SB')">SB<br><small>25-35%</small></div>
                </div>
            </div>

            <!-- åŠ¨ä½œé€‰æ‹© -->
            <div class="control-section">
                <div class="control-label">âš¡ åŠ¨ä½œé€‰æ‹©</div>
                <div class="selector-grid">
                    <div class="selector-btn active" onclick="setAction('open')">OpenåŠ æ³¨</div>
                    <div class="selector-btn" onclick="setAction('3bet')">3-Bet</div>
                    <div class="selector-btn" onclick="setAction('4bet')">4-Bet</div>
                </div>
            </div>
        </div>

        <!-- å¤šäººåº•æ± åœºæ™¯ -->
        <div id="tab-multiway" class="tab-content" style="display: none;">
            <!-- åœºæ™¯é€‰æ‹© -->
            <div class="control-section">
                <div class="control-label">ğŸ° å¤šäººåº•æ± åœºæ™¯</div>
                <div class="selector-grid">
                    <div class="selector-btn active" onclick="setScenario('vs1limper')">vs 1ä¸ªLimper<br><small>Iso-raise</small></div>
                    <div class="selector-btn" onclick="setScenario('vs2limpers')">vs 2ä¸ªLimpers<br><small>Isoæˆ–Limp</small></div>
                    <div class="selector-btn" onclick="setScenario('vs3limpers')">vs 3+ä¸ªLimpers<br><small>Over-limp</small></div>
                    <div class="selector-btn" onclick="setScenario('squeeze')">Open+Call<br><small>Squeezeæœºä¼š</small></div>
                    <div class="selector-btn" onclick="setScenario('coldcall')">Cold Call<br><small>è·Ÿæ³¨Open</small></div>
                </div>
            </div>

            <!-- ä½ç½®é€‰æ‹© -->
            <div class="control-section">
                <div class="control-label">ğŸ“ ä½ çš„ä½ç½®</div>
                <div class="selector-grid">
                    <div class="selector-btn active" onclick="setPosition('MP')">MP</div>
                    <div class="selector-btn" onclick="setPosition('CO')">CO</div>
                    <div class="selector-btn" onclick="setPosition('BTN')">BTN</div>
                    <div class="selector-btn" onclick="setPosition('SB')">SB</div>
                    <div class="selector-btn" onclick="setPosition('BB')">BB</div>
                </div>
            </div>
        </div>

        <!-- é˜²å®ˆèŒƒå›´ -->
        <div id="tab-defense" class="tab-content" style="display: none;">
            <!-- å¯¹æ‰‹ä½ç½® -->
            <div class="control-section">
                <div class="control-label">ğŸ¯ å¯¹æ‰‹Openä½ç½®</div>
                <div class="selector-grid">
                    <div class="selector-btn active" onclick="setVsPosition('vsUTG')">vs UTG</div>
                    <div class="selector-btn" onclick="setVsPosition('vsMP')">vs MP</div>
                    <div class="selector-btn" onclick="setVsPosition('vsCO')">vs CO</div>
                    <div class="selector-btn" onclick="setVsPosition('vsBTN')">vs BTN</div>
                    <div class="selector-btn" onclick="setVsPosition('vsSB')">vs SB</div>
                </div>
            </div>

            <!-- ä½ çš„ä½ç½® -->
            <div class="control-section">
                <div class="control-label">ğŸ“ ä½ çš„ä½ç½®ï¼ˆé˜²å®ˆï¼‰</div>
                <div class="selector-grid">
                    <div class="selector-btn active" onclick="setDefensePos('BB')">BB<br><small>å¤§ç›²é˜²å®ˆ</small></div>
                    <div class="selector-btn" onclick="setDefensePos('SB')">SB<br><small>å°ç›²é˜²å®ˆ</small></div>
                    <div class="selector-btn" onclick="setDefensePos('BTN')">BTN<br><small>æŒ‰é’®é˜²å®ˆ</small></div>
                    <div class="selector-btn" onclick="setDefensePos('CO')">CO<br><small>COé˜²å®ˆ</small></div>
                </div>
            </div>

            <!-- é˜²å®ˆåŠ¨ä½œ -->
            <div class="control-section">
                <div class="control-label">âš¡ é˜²å®ˆåŠ¨ä½œ</div>
                <div class="selector-grid">
                    <div class="selector-btn active" onclick="setDefenseAction('call')">Callè·Ÿæ³¨</div>
                    <div class="selector-btn" onclick="setDefenseAction('3bet')">3-BetååŠ </div>
                </div>
            </div>
        </div>

        <!-- é«˜çº§åœºæ™¯ -->
        <div id="tab-advanced" class="tab-content" style="display: none;">
            <!-- å¯¹æ‰‹ç±»å‹ -->
            <div class="control-section">
                <div class="control-label">ğŸ‘¥ å¯¹æ‰‹ç±»å‹ï¼ˆèŒƒå›´è°ƒæ•´ï¼‰</div>
                <div class="selector-grid">
                    <div class="selector-btn active" onclick="setOpponent('gto')">GTOæ ‡å‡†<br><small>å¹³è¡¡èŒƒå›´</small></div>
                    <div class="selector-btn" onclick="setOpponent('nit')">Nitç´§æ‰‹<br><small>VPIP<12%</small></div>
                    <div class="selector-btn" onclick="setOpponent('lag')">LAGæ¿€è¿›<br><small>3-betå¤š</small></div>
                    <div class="selector-btn" onclick="setOpponent('fish')">Fishé±¼<br><small>VPIP>40%</small></div>
                </div>
            </div>

            <!-- ç‰¹æ®Šåœºæ™¯ -->
            <div class="control-section">
                <div class="control-label">ğŸ² ç‰¹æ®Šåœºæ™¯</div>
                <div class="selector-grid">
                    <div class="selector-btn active" onclick="setSpecial('vs3bet')">vs 3-Bet<br><small>é˜²å®ˆ/4-bet</small></div>
                    <div class="selector-btn" onclick="setSpecial('vs4bet')">vs 4-Bet<br><small>5-betæˆ–å¼ƒç‰Œ</small></div>
                    <div class="selector-btn" onclick="setSpecial('limpreaise')">Limp-Reraise<br><small>é™·é˜±æ‰“æ³•</small></div>
                </div>
            </div>

            <!-- ä½ç½® -->
            <div class="control-section">
                <div class="control-label">ğŸ“ ä½ç½®</div>
                <div class="selector-grid">
                    <div class="selector-btn active" onclick="setPosition('CO')">CO</div>
                    <div class="selector-btn" onclick="setPosition('BTN')">BTN</div>
                    <div class="selector-btn" onclick="setPosition('SB')">SB</div>
                    <div class="selector-btn" onclick="setPosition('BB')">BB</div>
                </div>
            </div>
        </div>

        <!-- èŒƒå›´ä¿¡æ¯ -->
        <div class="range-info">
            <div class="range-title" id="rangeTitle">UTG OpenèŒƒå›´ - æ ‡å‡†ç­¹ç ï¼ˆ50-100BBï¼‰</div>
            <div class="range-percentage" id="rangePercentage">5-8%</div>
            <div class="range-desc" id="rangeDesc">æç´§èŒƒå›´ï¼Œåªæ‰“æœ€å¼ºç‰Œã€‚æ ‡å‡†ç­¹ç ä¸‹ï¼Œé¿å…å°å¯¹å­å’ŒæŠ•æœºç‰Œã€‚</div>
        </div>

        <!-- çƒ­åŠ›å›¾ -->
        <div class="heatmap-container">
            <div class="heatmap" id="heatmap"></div>
        </div>

        <!-- å›¾ä¾‹ -->
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color freq-100"></div>
                <span>100% å¿…æ‰“</span>
            </div>
            <div class="legend-item">
                <div class="legend-color freq-75"></div>
                <span>75% å¸¸æ‰“</span>
            </div>
            <div class="legend-item">
                <div class="legend-color freq-50"></div>
                <span>50% é€‰æ‹©æ€§</span>
            </div>
            <div class="legend-item">
                <div class="legend-color freq-25"></div>
                <span>25% å¶å°”</span>
            </div>
            <div class="legend-item">
                <div class="legend-color freq-0"></div>
                <span>0% å¼ƒç‰Œ</span>
            </div>
        </div>

        <!-- è¯´æ˜ -->
        <div class="note">
            ğŸ’¡ <strong>PROç‰ˆç‰¹è‰²ï¼š</strong><br>
            â€¢ <strong>ç­¹ç æ·±åº¦å½±å“</strong>ï¼š300BB+å¢åŠ å°å¯¹å­/åŒèŠ±è¿ç‰Œï¼ˆéšå«èµ”ç‡é«˜ï¼‰<br>
            â€¢ <strong>å¤šäººåº•æ± è°ƒæ•´</strong>ï¼švs 3+ä¸ªLimperï¼Œå‡ ä¹ä¸Isoï¼Œå¹¿æ³›Over-limp<br>
            â€¢ <strong>Squeezeæœºä¼š</strong>ï¼šEP Open + MP Call = æŒ¤å‹è‰¯æœºï¼ˆ4-5xå°ºå¯¸ï¼‰<br>
            â€¢ <strong>å¯¹æ‰‹ç±»å‹è°ƒæ•´</strong>ï¼švs Nitæ”¶ç´§å¯¹æŠ—ï¼Œvs Fishæ”¾å®½ä»·å€¼å‡å°‘è¯ˆå”¬<br>
            â€¢ <strong>æ·±ç­¹ç æ ¸å¿ƒ</strong>ï¼š200BB+æ˜¾è‘—å¢åŠ æŠ•æœºç‰Œï¼Œ300BB+æ¥è¿‘ç¿»å€
        </div>
    </div>

    <script src="preflop_ranges_data.js"></script>
    <script>
        const ranks = ['A', 'K', 'Q', 'J', 'T', '9', '8', '7', '6', '5', '4', '3', '2'];
        
        let currentTab = 'standard';
        let currentStack = 'standard';
        let currentPosition = 'UTG';
        let currentAction = 'open';
        let currentScenario = 'vs1limper';
        let currentVsPosition = 'vsUTG';
        let currentDefensePos = 'BB';
        let currentDefenseAction = 'call';
        let currentOpponent = 'gto';
        let currentSpecial = 'vs3bet';

        // ä½¿ç”¨å®Œæ•´çš„èŒƒå›´æ•°æ®åº“ï¼ˆä»å¤–éƒ¨æ–‡ä»¶åŠ è½½ï¼‰
        const rangesDatabase = COMPLETE_RANGES || {
            // æ ‡å‡†åœºæ™¯ - ä¸åŒç­¹ç æ·±åº¦
            standard: {
                // çŸ­ç­¹ç ï¼ˆ20-50BBï¼‰
                short: {
                    UTG: {
                        open: {
                            'AA': 100, 'KK': 100, 'QQ': 100, 'JJ': 100, 'TT': 100, '99': 100,
                            'AKs': 100, 'AKo': 100, 'AQs': 100, 'AQo': 100, 'AJs': 100
                            // çŸ­ç­¹ç å‡å°‘å°å¯¹å­ï¼ˆéšå«èµ”ç‡ä½ï¼‰
                        }
                    },
                    CO: {
                        open: {
                            'AA': 100, 'KK': 100, 'QQ': 100, 'JJ': 100, 'TT': 100, '99': 100, '88': 100, '77': 75,
                            'AKs': 100, 'AKo': 100, 'AQs': 100, 'AQo': 100, 'AJs': 100, 'AJo': 75, 'ATs': 100, 'A9s': 75,
                            'KQs': 100, 'KQo': 75, 'KJs': 100, 'QJs': 100, 'JTs': 75
                            // çŸ­ç­¹ç å‡å°‘æŠ•æœºç‰Œ
                        }
                    },
                    BTN: {
                        open: {
                            'AA': 100, 'KK': 100, 'QQ': 100, 'JJ': 100, 'TT': 100, '99': 100, '88': 100, '77': 100, '66': 75, '55': 75,
                            'AKs': 100, 'AKo': 100, 'AQs': 100, 'AQo': 100, 'AJs': 100, 'AJo': 100, 'ATs': 100, 'ATo': 75, 'A9s': 100, 'A8s': 75, 'A7s': 75, 'A6s': 75, 'A5s': 75,
                            'KQs': 100, 'KQo': 100, 'KJs': 100, 'KTs': 100, 'K9s': 75,
                            'QJs': 100, 'QTs': 100, 'JTs': 100, 'T9s': 75, '98s': 50, '87s': 25
                        }
                    }
                },
                // 300BB+è¶…æ·±ç­¹ç 
                ultradeep: {
                    UTG: {
                        open: {
                            'AA': 100, 'KK': 100, 'QQ': 100, 'JJ': 100, 'TT': 100, '99': 100, '88': 75, '77': 75, '66': 50, '55': 50, '44': 25, '33': 25, '22': 25,
                            'AKs': 100, 'AKo': 100, 'AQs': 100, 'AQo': 75, 'AJs': 100, 'ATs': 75,
                            'KQs': 75
                            // 300BB+å¢åŠ å°å¯¹å­ï¼ˆéšå«èµ”ç‡æé«˜ï¼‰
                        }
                    },
                    CO: {
                        open: {
                            'AA': 100, 'KK': 100, 'QQ': 100, 'JJ': 100, 'TT': 100, '99': 100, '88': 100, '77': 100, '66': 100, '55': 100, '44': 100, '33': 100, '22': 100,
                            'AKs': 100, 'AKo': 100, 'AQs': 100, 'AQo': 100, 'AJs': 100, 'AJo': 75, 'ATs': 100, 'A9s': 100, 'A8s': 100, 'A7s': 100, 'A6s': 100, 'A5s': 100, 'A4s': 100, 'A3s': 100, 'A2s': 100,
                            'KQs': 100, 'KQo': 75, 'KJs': 100, 'KTs': 100, 'K9s': 75, 'K8s': 50, 'K7s': 50, 'K6s': 50, 'K5s': 50,
                            'QJs': 100, 'QTs': 100, 'Q9s': 75, 'JTs': 100, 'J9s': 75, 'T9s': 100, '98s': 100, '87s': 75, '76s': 50, '65s': 50, '54s': 25
                            // 300BB+å¤§å¹…å¢åŠ åŒèŠ±è¿ç‰Œï¼ˆå¯ç©æ€§é«˜ï¼‰
                        }
                    },
                    BTN: {
                        open: {
                            'AA': 100, 'KK': 100, 'QQ': 100, 'JJ': 100, 'TT': 100, '99': 100, '88': 100, '77': 100, '66': 100, '55': 100, '44': 100, '33': 100, '22': 100,
                            'AKs': 100, 'AKo': 100, 'AQs': 100, 'AQo': 100, 'AJs': 100, 'AJo': 100, 'ATs': 100, 'ATo': 100, 'A9s': 100, 'A9o': 75, 'A8s': 100, 'A8o': 50, 'A7s': 100, 'A6s': 100, 'A5s': 100, 'A4s': 100, 'A3s': 100, 'A2s': 100,
                            'KQs': 100, 'KQo': 100, 'KJs': 100, 'KJo': 100, 'KTs': 100, 'KTo': 75, 'K9s': 100, 'K8s': 100, 'K7s': 100, 'K6s': 100, 'K5s': 75, 'K4s': 75, 'K3s': 75, 'K2s': 75,
                            'QJs': 100, 'QJo': 100, 'QTs': 100, 'QTo': 100, 'Q9s': 100, 'Q8s': 100, 'Q7s': 75, 'Q6s': 75, 'Q5s': 50,
                            'JTs': 100, 'JTo': 100, 'J9s': 100, 'J9o': 75, 'J8s': 100, 'J7s': 75, 'J6s': 50,
                            'T9s': 100, 'T9o': 100, 'T8s': 100, 'T8o': 75, 'T7s': 100, 'T6s': 75,
                            '98s': 100, '98o': 75, '97s': 100, '96s': 75, '87s': 100, '87o': 50, '86s': 100, '85s': 75, '76s': 100, '75s': 75, '65s': 100, '64s': 75, '54s': 100, '53s': 50
                            // 300BB+ BTNæ¥è¿‘æ‰“æ‰€æœ‰æœ‰ä»·å€¼çš„ç‰Œ
                        }
                    }
                }
            },
            // å¤šäººåº•æ± åœºæ™¯
            multiway: {
                vs1limper: {
                    CO: {
                        iso: {
                            'AA': 100, 'KK': 100, 'QQ': 100, 'JJ': 100, 'TT': 100, '99': 75,
                            'AKs': 100, 'AKo': 100, 'AQs': 100, 'AQo': 100, 'AJs': 100, 'AJo': 75,
                            'KQs': 75
                        },
                        limp: {
                            '88': 100, '77': 100, '66': 100, '55': 100, '44': 100, '33': 100, '22': 100,
                            'ATs': 75, 'A9s': 75, 'A8s': 75, 'A7s': 75, 'A6s': 75, 'A5s': 100,
                            'KJs': 75, 'KTs': 75, 'QJs': 75, 'JTs': 100, 'T9s': 100, '98s': 100, '87s': 100, '76s': 75, '65s': 75, '54s': 75
                        }
                    }
                },
                vs3limpers: {
                    BTN: {
                        limp: {
                            '99': 100, '88': 100, '77': 100, '66': 100, '55': 100, '44': 100, '33': 100, '22': 100,
                            'AJs': 75, 'ATs': 100, 'A9s': 100, 'A8s': 100, 'A7s': 100, 'A6s': 100, 'A5s': 100, 'A4s': 100, 'A3s': 100, 'A2s': 100,
                            'KQs': 75, 'KJs': 100, 'KTs': 100, 'K9s': 100, 'QJs': 100, 'QTs': 100, 'Q9s': 100,
                            'JTs': 100, 'J9s': 100, 'J8s': 100, 'T9s': 100, 'T8s': 100, 'T7s': 100, '98s': 100, '97s': 100, '87s': 100, '86s': 100, '76s': 100, '75s': 100, '65s': 100, '64s': 100, '54s': 100
                            // vs 3+ Limpersï¼šå‡ ä¹æ‰€æœ‰æŠ•æœºç‰Œéƒ½æ‰“ï¼ˆéšå«èµ”ç‡æé«˜ï¼‰
                        }
                    }
                },
                squeeze: {
                    BTN: {
                        squeeze: {
                            'AA': 100, 'KK': 100, 'QQ': 100, 'JJ': 100, 'TT': 75,
                            'AKs': 100, 'AKo': 100, 'AQs': 75,
                            'A5s': 75, 'A4s': 75, 'A3s': 75, 'A2s': 75,
                            'KQs': 75, 'QJs': 50
                            // Squeeze: ä»·å€¼ + è¯ˆå”¬ï¼ˆé˜»æ–­å¼ºç‰Œï¼‰
                        }
                    }
                }
            },
            // é˜²å®ˆèŒƒå›´
            defense: {
                BB: {
                    vsUTG: {
                        call: {
                            'AA': 100, 'KK': 100, 'QQ': 100, 'JJ': 100, 'TT': 100, '99': 100, '88': 100, '77': 75, '66': 75, '55': 75, '44': 50, '33': 50, '22': 50,
                            'AKs': 100, 'AKo': 100, 'AQs': 100, 'AQo': 75, 'AJs': 100, 'ATs': 75, 'A9s': 50,
                            'KQs': 75, 'KJs': 50, 'QJs': 50, 'JTs': 50, 'T9s': 25, '98s': 25
                        },
                        '3bet': {
                            'AA': 100, 'KK': 100, 'QQ': 100, 'AKs': 100,
                            'A5s': 25, 'A4s': 25
                        }
                    },
                    vsBTN: {
                        call: {
                            'AA': 100, 'KK': 100, 'QQ': 100, 'JJ': 100, 'TT': 100, '99': 100, '88': 100, '77': 100, '66': 100, '55': 100, '44': 100, '33': 100, '22': 100,
                            'AKs': 100, 'AKo': 100, 'AQs': 100, 'AQo': 100, 'AJs': 100, 'AJo': 100, 'ATs': 100, 'ATo': 75, 'A9s': 100, 'A9o': 75, 'A8s': 100, 'A7s': 100, 'A6s': 100, 'A5s': 100, 'A4s': 100, 'A3s': 100, 'A2s': 100,
                            'KQs': 100, 'KQo': 100, 'KJs': 100, 'KJo': 75, 'KTs': 100, 'K9s': 100, 'K8s': 75, 'K7s': 75, 'K6s': 75, 'K5s': 50,
                            'QJs': 100, 'QJo': 100, 'QTs': 100, 'Q9s': 100, 'Q8s': 75,
                            'JTs': 100, 'JTo': 100, 'J9s': 100, 'J8s': 75,
                            'T9s': 100, 'T9o': 75, 'T8s': 100, 'T7s': 50,
                            '98s': 100, '97s': 75, '87s': 100, '76s': 75, '65s': 75, '54s': 50
                        },
                        '3bet': {
                            'AA': 100, 'KK': 100, 'QQ': 100, 'JJ': 75, 'TT': 75,
                            'AKs': 100, 'AKo': 100, 'AQs': 100,
                            'A5s': 75, 'A4s': 75, 'A3s': 75, 'A2s': 75,
                            'KQs': 75, 'QJs': 50, 'JTs': 50
                        }
                    }
                }
            },
            // é«˜çº§åœºæ™¯
            advanced: {
                vs3bet: {
                    CO: {
                        '4bet': {
                            'AA': 100, 'KK': 100, 'AKs': 100,
                            'A5s': 50, 'A4s': 50, 'A3s': 50
                        },
                        call: {
                            'QQ': 100, 'JJ': 100, 'TT': 75, '99': 75,
                            'AKo': 100, 'AQs': 100, 'AJs': 75,
                            'KQs': 50
                        }
                    }
                },
                vsNit: {
                    BTN: {
                        open: {
                            'AA': 100, 'KK': 100, 'QQ': 100, 'JJ': 100, 'TT': 100, '99': 100, '88': 100, '77': 100, '66': 100, '55': 100, '44': 100, '33': 100, '22': 100,
                            'AKs': 100, 'AKo': 100, 'AQs': 100, 'AQo': 100, 'AJs': 100, 'AJo': 100, 'ATs': 100, 'ATo': 100, 'A9s': 100, 'A9o': 100, 'A8s': 100, 'A8o': 75, 'A7s': 100, 'A6s': 100, 'A5s': 100, 'A4s': 100, 'A3s': 100, 'A2s': 100,
                            'KQs': 100, 'KQo': 100, 'KJs': 100, 'KJo': 100, 'KTs': 100, 'KTo': 100, 'K9s': 100, 'K8s': 100, 'K7s': 100, 'K6s': 100, 'K5s': 100,
                            'QJs': 100, 'QJo': 100, 'QTs': 100, 'QTo': 100, 'Q9s': 100, 'Q8s': 100, 'Q7s': 100,
                            'JTs': 100, 'JTo': 100, 'J9s': 100, 'J9o': 100, 'J8s': 100, 'J7s': 100,
                            'T9s': 100, 'T9o': 100, 'T8s': 100, 'T8o': 100, 'T7s': 100,
                            '98s': 100, '98o': 100, '97s': 100, '87s': 100, '86s': 100, '76s': 100, '75s': 100, '65s': 100, '54s': 100
                            // vs Nitï¼šæå®½å·ç›²ï¼ˆNité¢‘ç¹å¼ƒç‰Œï¼‰
                        }
                    }
                }
            }
        };

        function generateHeatmap() {
            const heatmap = document.getElementById('heatmap');
            heatmap.innerHTML = '';

            for (let i = 0; i < 13; i++) {
                for (let j = 0; j < 13; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'hand-cell';

                    let hand = '';
                    let frequency = 0;

                    if (i === j) {
                        hand = ranks[i] + ranks[j];
                        cell.classList.add('pair');
                    } else if (i < j) {
                        hand = ranks[i] + ranks[j] + 's';
                        cell.classList.add('suited');
                    } else {
                        hand = ranks[j] + ranks[i] + 'o';
                    }

                    frequency = getFrequency(hand);

                    if (frequency >= 90) {
                        cell.classList.add('freq-100');
                    } else if (frequency >= 65) {
                        cell.classList.add('freq-75');
                    } else if (frequency >= 40) {
                        cell.classList.add('freq-50');
                    } else if (frequency >= 15) {
                        cell.classList.add('freq-25');
                    } else {
                        cell.classList.add('freq-0');
                    }

                    cell.textContent = hand.replace('s', '').replace('o', '');
                    cell.title = hand + ' - ' + frequency + '%';

                    heatmap.appendChild(cell);
                }
            }
        }

        function getFrequency(hand) {
            let range = null;

            if (currentTab === 'standard') {
                range = rangesDatabase.standard[currentStack]?.[currentPosition]?.[currentAction];
            } else if (currentTab === 'multiway') {
                // å¤šäººåº•æ± é€»è¾‘
                range = rangesDatabase.multiway[currentScenario]?.[currentPosition]?.[currentAction];
            } else if (currentTab === 'defense') {
                // é˜²å®ˆé€»è¾‘
                range = rangesDatabase.defense[currentDefensePos]?.[currentVsPosition]?.[currentDefenseAction];
            } else if (currentTab === 'advanced') {
                // é«˜çº§åœºæ™¯é€»è¾‘
                if (currentOpponent !== 'gto') {
                    range = rangesDatabase.advanced['vs' + capitalizeFirst(currentOpponent)]?.[currentPosition]?.[currentAction];
                } else {
                    range = rangesDatabase.advanced[currentSpecial]?.[currentPosition]?.[currentAction];
                }
            }

            return range && range[hand] ? range[hand] : 0;
        }

        function capitalizeFirst(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }

        function switchTab(tab) {
            currentTab = tab;
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            document.querySelectorAll('.tab-content').forEach(content => content.style.display = 'none');
            document.getElementById('tab-' + tab).style.display = 'block';

            updateRangeInfo();
            generateHeatmap();
        }

        function setStack(stack) {
            currentStack = stack;
            updateButtons('.control-section:first-child .selector-btn');
            updateRangeInfo();
            generateHeatmap();
        }

        function setPosition(position) {
            currentPosition = position;
            updateButtons('.control-section:nth-child(2) .selector-btn, .control-section:nth-child(1) .selector-btn');
            updateRangeInfo();
            generateHeatmap();
        }

        function setAction(action) {
            currentAction = action;
            updateButtons('.control-section:nth-child(3) .selector-btn, .control-section:last-child .selector-btn');
            updateRangeInfo();
            generateHeatmap();
        }

        function setScenario(scenario) {
            currentScenario = scenario;
            updateButtons('.control-section:first-child .selector-btn');
            updateRangeInfo();
            generateHeatmap();
        }

        function setVsPosition(pos) {
            currentVsPosition = pos;
            updateButtons('.control-section:first-child .selector-btn');
            updateRangeInfo();
            generateHeatmap();
        }

        function setDefensePos(pos) {
            currentDefensePos = pos;
            updateButtons('.control-section:nth-child(2) .selector-btn');
            updateRangeInfo();
            generateHeatmap();
        }

        function setDefenseAction(action) {
            currentDefenseAction = action;
            updateButtons('.control-section:nth-child(3) .selector-btn');
            updateRangeInfo();
            generateHeatmap();
        }

        function setOpponent(opp) {
            currentOpponent = opp;
            updateButtons('.control-section:first-child .selector-btn');
            updateRangeInfo();
            generateHeatmap();
        }

        function setSpecial(special) {
            currentSpecial = special;
            updateButtons('.control-section:nth-child(2) .selector-btn');
            updateRangeInfo();
            generateHeatmap();
        }

        function updateButtons(selector) {
            document.querySelectorAll(selector).forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        function updateRangeInfo() {
            const stackLabels = {
                'short': 'çŸ­ç­¹ç ï¼ˆ20-50BBï¼‰',
                'standard': 'æ ‡å‡†ç­¹ç ï¼ˆ50-100BBï¼‰',
                'deep': 'æ·±ç­¹ç ï¼ˆ100-200BBï¼‰',
                'verydeep': 'å¾ˆæ·±ç­¹ç ï¼ˆ200-300BBï¼‰',
                'ultradeep': 'è¶…æ·±ç­¹ç ï¼ˆ300BB+ï¼‰'
            };

            let title = currentPosition + ' ' + currentAction + 'èŒƒå›´';
            let pct = '5-8%';
            let desc = 'æ ‡å‡†åœºæ™¯';

            if (currentTab === 'standard') {
                title += ' - ' + stackLabels[currentStack];
                if (currentStack === 'ultradeep') {
                    desc = '300BB+è¶…æ·±ç­¹ç ï¼šå¤§å¹…å¢åŠ å°å¯¹å­å’ŒåŒèŠ±è¿ç‰Œï¼ˆéšå«èµ”ç‡æé«˜ï¼‰';
                } else if (currentStack === 'short') {
                    desc = 'çŸ­ç­¹ç ï¼šå‡å°‘æŠ•æœºç‰Œï¼Œä¸“æ³¨é«˜ç‰ŒåŠ›';
                }
            } else if (currentTab === 'multiway') {
                const scenarioLabels = {
                    'vs1limper': 'vs 1ä¸ªLimper',
                    'vs2limpers': 'vs 2ä¸ªLimpers',
                    'vs3limpers': 'vs 3+ä¸ªLimpers',
                    'squeeze': 'SqueezeæŒ¤å‹',
                    'coldcall': 'Cold Callè·Ÿæ³¨'
                };
                title = currentPosition + ' ' + scenarioLabels[currentScenario];
                desc = 'å¤šäººåº•æ± åœºæ™¯ï¼šéšå«èµ”ç‡ä¼˜å…ˆ';
            } else if (currentTab === 'defense') {
                title = currentDefensePos + ' é˜²å®ˆ ' + currentVsPosition + ' - ' + currentDefenseAction;
                desc = 'é˜²å®ˆèŒƒå›´ï¼šæ ¹æ®å¯¹æ‰‹ä½ç½®å’Œåº•æ± èµ”ç‡è°ƒæ•´';
            } else if (currentTab === 'advanced') {
                if (currentOpponent !== 'gto') {
                    title = currentPosition + ' vs ' + currentOpponent.toUpperCase();
                    desc = 'å¯¹æ‰‹ç±»å‹è°ƒæ•´ï¼šé’ˆå¯¹æ€§å‰¥å‰Š';
                } else {
                    title = currentPosition + ' ' + currentSpecial;
                    desc = 'é«˜çº§åœºæ™¯ï¼šå¤æ‚æƒ…å†µå¤„ç†';
                }
            }

            document.getElementById('rangeTitle').textContent = title;
            document.getElementById('rangePercentage').textContent = pct;
            document.getElementById('rangeDesc').textContent = desc;
        }

        // åˆå§‹åŒ–
        generateHeatmap();
        updateRangeInfo();
    </script>
</body>
</html>

