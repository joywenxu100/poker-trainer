# 德州扑克快速复盘工具 - 使用说明

## 🚀 快速开始

### 方式1：直接使用网页版（推荐新手）

1. **打开工具**
   ```bash
   # 直接用浏览器打开
   quick_review.html
   ```

2. **首次设置API密钥**
   - 滚动到页面底部 "🔑 API 密钥设置" 区域
   - 输入你的 Gemini API Key（必填）
   - 密钥会自动保存在本地浏览器，下次无需重新输入

3. **开始使用**
   - 选择 AI 模型（Gemini 或 DeepSeek）
   - 上传截图或手动输入牌局信息
   - 点击分析按钮

**获取API密钥：**
- Gemini: https://aistudio.google.com/app/apikey （免费额度充足）
- DeepSeek: https://platform.deepseek.com/ （可选）

---

### 方式2：使用本地服务器（需要VPN）

**适用场景：** 需要通过代理访问API，或批量分析

1. **设置环境变量（推荐）**
   ```powershell
   # Windows PowerShell
   $env:GEMINI_API_KEY = "AIzaSy...你的密钥..."
   
   # 或永久设置
   [System.Environment]::SetEnvironmentVariable("GEMINI_API_KEY", "你的密钥", "User")
   ```

2. **启动服务器**
   ```bash
   python quick_review_server.py
   ```

3. **浏览器自动打开**
   - 服务器会自动检测代理
   - 浏览器自动打开工具页面

---

## 🔐 安全须知

### ⚠️ 重要警告

**永远不要：**
- ❌ 在代码中硬编码API密钥
- ❌ 提交包含密钥的文件到Git
- ❌ 在公开场所分享密钥
- ❌ 在截图中暴露密钥

**如何保护密钥：**
- ✅ 使用环境变量
- ✅ 使用 localStorage（网页版）
- ✅ 定期更换密钥
- ✅ 设置使用配额

**详细安全指南：** 查看 [API_KEY_SECURITY.md](API_KEY_SECURITY.md)

---

## 💡 使用技巧

### 1. Gemini vs DeepSeek 如何选择？

| 特性 | Gemini | DeepSeek R1 |
|------|--------|-------------|
| **图片识别** | ✅ 支持 | ❌ 不支持 |
| **需要VPN** | 是 | 否（国内直连） |
| **思考过程** | 无 | ✅ 显示推理过程 |
| **免费额度** | 充足 | 有限 |
| **适合场景** | 截图分析 | 手动输入 |

**推荐组合：**
- 日常使用：Gemini（自动识别截图）
- 深度分析：DeepSeek R1（手动输入关键信息）

### 2. 提高识别准确率

**截图技巧：**
- 使用高分辨率截图
- 确保文字清晰可见
- 包含完整的牌局信息
- 避免截图被遮挡

**手动确认：**
- OCR识别后，务必检查确认信息
- 特别注意牌面识别（容易混淆的牌型）
- 确认对手数据准确

### 3. 如何获得更好的分析

**提供完整信息：**
- ✅ 手牌截图（必须）
- ✅ 对手数据截图（重要）
- ✅ 你的昵称和筹码深度
- ✅ 特殊情况说明（短码对手等）

**分析设置：**
- 填写你的真实昵称（AI会分析你的决策）
- 准确填写筹码深度（影响策略分析）
- 对手数据越详细越好（VPIP、胜率等）

---

## 🐛 常见问题

### Q1: 提示 "请先设置 Gemini API Key"
**解决：** 在页面底部的 API 密钥设置区域输入密钥

### Q2: API 请求失败，提示网络错误
**解决：**
- 检查是否开启 VPN（Gemini需要）
- 尝试切换到 DeepSeek（国内可用）
- 使用本地服务器模式（自动处理代理）

### Q3: OCR 识别不准确
**解决：**
- 提高截图质量
- 手动修正识别结果
- 或直接手动输入（选择 DeepSeek 模式）

### Q4: 分析结果不理想
**解决：**
- 确保输入信息完整准确
- 提供更多对手数据
- 尝试重新分析（AI有随机性）

### Q5: API 配额用完了
**解决：**
- Gemini 免费额度很高，通常够用
- 或申请新的 API 密钥
- 或使用 DeepSeek（需单独注册）

---

## 📊 功能清单

### ✅ 已实现
- [x] 截图自动识别（Gemini）
- [x] 手动输入模式（DeepSeek）
- [x] 混合输入模式
- [x] 对手类型判断
- [x] 逐街详细分析
- [x] EV 估算
- [x] 保险决策分析
- [x] 本地密钥管理
- [x] 代理自动检测
- [x] 自动重试机制

### 🔮 计划中
- [ ] 批量分析
- [ ] 历史记录保存
- [ ] 对手数据库
- [ ] 范围可视化
- [ ] PDF 报告导出

---

## 📝 更新日志

### v4.3 (2024-12-02)
- 🔐 **安全更新：移除硬编码API密钥**
- ✅ 添加本地密钥管理
- ✅ 添加环境变量支持
- ✅ 添加密钥安全文档
- 🐛 修复多个已知问题

### v4.2 (2024-11)
- ✅ 添加 DeepSeek R1 支持
- ✅ 混合输入模式
- ✅ 自动重试机制
- 🐛 修复分析失败问题

---

## 💬 反馈与建议

如有问题或建议，请：
1. 查看 [API_KEY_SECURITY.md](API_KEY_SECURITY.md) 安全指南
2. 检查常见问题解答
3. 查看日志输出定位问题

---

**版本：** v4.3
**最后更新：** 2024-12-02

