// å‰¥å‰Šå‹è®­ç»ƒå¸ˆ - æ ¸å¿ƒé€»è¾‘
// 8äººæ¡Œæœ‰Anteæ·±ç­¹ç ä¸“ç”¨è®­ç»ƒç³»ç»Ÿ
// ç‰ˆæœ¬: 1.0.0

// ==================== è®­ç»ƒé˜¶æ®µå®šä¹‰ ====================
const EXPLOIT_PHASES = [
    {
        id: 1,
        title: "å¯¹æ‰‹è¯†åˆ«",
        time: "5-10ç§’",
        icon: "ğŸ”",
        warning: false,
        description: "å¿«é€Ÿè¯†åˆ«å¯¹æ‰‹ç±»å‹ï¼Œä¸ºå‰¥å‰Šåšå‡†å¤‡",
        questions: [
            { 
                q: "å¯¹æ‰‹çš„VPIP/PFRæ˜¯å¤šå°‘ï¼Ÿ", 
                a: "ğŸ¯ æ ¸å¿ƒæ•°æ®è§£è¯»ï¼š\nâ€¢ VPIP > 30% = æ¾\nâ€¢ VPIP < 20% = ç´§\nâ€¢ PFRæ¥è¿‘VPIP = æ¿€è¿›\nâ€¢ PFRè¿œä½äºVPIP = è¢«åŠ¨\n\nğŸ’¡ ç»„åˆåˆ¤æ–­ï¼š\nâ€¢ é«˜VPIP+ä½PFR = é±¼/è·Ÿæ³¨ç«™\nâ€¢ ä½VPIP+é«˜PFR = Nit\nâ€¢ é«˜VPIP+é«˜PFR = LAG\nâ€¢ æé«˜VPIP+æé«˜PFR = Maniac" 
            },
            { 
                q: "å¯¹æ‰‹çš„3bet%å’ŒFold to 3bet%æ˜¯å¤šå°‘ï¼Ÿ", 
                a: "ğŸ¯ 3betåˆ†æï¼š\nâ€¢ 3bet > 10% = æ¿€è¿›ï¼Œéœ€è¦æ›´å®½4bet\nâ€¢ 3bet < 5% = ç´§ï¼Œ3bet = premium\nâ€¢ Fold to 3bet > 70% = å¯ä»¥light 3bet\nâ€¢ Fold to 3bet < 50% = åªvalue 3bet\n\nğŸ’¡ å‰¥å‰Šæ–¹å‘ï¼š\nâ€¢ é«˜3bet+é«˜fold to 4bet = å¤š4bet\nâ€¢ é«˜3bet+ä½fold to 4bet = ç­‰åšæœ" 
            },
            { 
                q: "å¯¹æ‰‹çš„C-bet%å’ŒFold to C-bet%æ˜¯å¤šå°‘ï¼Ÿ", 
                a: "ğŸ¯ C-betåˆ†æï¼š\nâ€¢ C-bet > 70% = è¿‡åº¦c-betï¼Œå¤šcheck-raise\nâ€¢ C-bet < 40% = æ”¾å¼ƒå¤ªå¤šï¼Œå¯ä»¥probe\nâ€¢ Fold to C-bet > 60% = å¤šbluff c-bet\nâ€¢ Fold to C-bet < 40% = åªvalue c-bet\n\nğŸ’¡ åº”ç”¨ï¼š\nâ€¢ ä»–c-betå¤šï¼Œä½ check-raiseå¤š\nâ€¢ ä»–foldå¤šï¼Œä½ bluffå¤š" 
            },
            { 
                q: "å¯¹æ‰‹æœ€è¿‘çš„æ‰“æ³•æœ‰å˜åŒ–å—ï¼Ÿ", 
                a: "ğŸ¯ åŠ¨æ€è°ƒæ•´è¯†åˆ«ï¼š\nâ€¢ è¿ç»­è¾“é’±åå˜æ¿€è¿› = å¯èƒ½tilt\nâ€¢ è¿ç»­èµ¢é’±åå˜æ¾ = å¯èƒ½overconfident\nâ€¢ æ‰“æ³•çªç„¶å˜ç´§ = å¯èƒ½è¦ä¸‹æ¡Œ\nâ€¢ æ‰“æ³•çªç„¶å˜æ¿€è¿› = å¯èƒ½è¿½å›æŸå¤±\n\nâš ï¸ å…³é”®ï¼šå®æ—¶è°ƒæ•´æ¯”å†å²æ•°æ®æ›´é‡è¦" 
            }
        ]
    },
    {
        id: 2,
        title: "Anteè°ƒæ•´",
        time: "3-5ç§’",
        icon: "ğŸ’°",
        warning: false,
        description: "æ ¹æ®Anteè°ƒæ•´ä½ çš„èŒƒå›´å’Œç­–ç•¥",
        questions: [
            { 
                q: "å½“å‰åº•æ± æœ‰å¤šå°‘æ­»é’±ï¼Ÿ", 
                a: "ğŸ¯ æ­»é’±è®¡ç®—ï¼š\nâ€¢ 8äººæ¡ŒAnteé€šå¸¸ = 1BBæ€»å…±\nâ€¢ åŠ ä¸ŠSB 0.5BB + BB 1BB = 2.5BB\nâ€¢ ç›¸æ¯”æ— Anteçš„1.5BBï¼Œå¢åŠ äº†67%\n\nğŸ’¡ å½±å“ï¼š\nâ€¢ å·ç›²ä»·å€¼å¢åŠ \nâ€¢ æ›´å®½çš„openèŒƒå›´\nâ€¢ æ›´å®½çš„é˜²å®ˆèŒƒå›´\nâ€¢ è¾¹ç¼˜ç‰Œå˜å¾—å¯ç©" 
            },
            { 
                q: "åœ¨å½“å‰ä½ç½®ï¼Œæˆ‘çš„openèŒƒå›´åº”è¯¥æ”¾å®½å¤šå°‘ï¼Ÿ", 
                a: "ğŸ¯ ä½ç½®è°ƒæ•´å¹…åº¦ï¼š\nâ€¢ UTG: +5%ï¼ˆ15%â†’20%ï¼‰\nâ€¢ MP: +10%ï¼ˆ20%â†’30%ï¼‰\nâ€¢ CO: +15%ï¼ˆ30%â†’45%ï¼‰\nâ€¢ BTN: +20%ï¼ˆ40%â†’60%ï¼‰\nâ€¢ SB: +15%ï¼ˆ35%â†’50%ï¼‰\n\nğŸ’¡ æ–°å¢çš„ç‰Œå‹ï¼š\nâ€¢ æ›´å¤šsuited connectors\nâ€¢ æ›´å¤šå°å¯¹å­\nâ€¢ æ›´å¤šAxs" 
            },
            { 
                q: "BBé˜²å®ˆæ—¶ï¼Œæˆ‘åº”è¯¥æ€ä¹ˆè°ƒæ•´ï¼Ÿ", 
                a: "ğŸ¯ BBé˜²å®ˆè°ƒæ•´ï¼š\nâ€¢ vs BTN: 55-65% defendï¼ˆæ ‡å‡†45%ï¼‰\nâ€¢ vs SB: 65-75% defendï¼ˆæ ‡å‡†55%ï¼‰\nâ€¢ vs CO: 45-55% defendï¼ˆæ ‡å‡†35%ï¼‰\n\nğŸ’¡ å…·ä½“å˜åŒ–ï¼š\nâ€¢ æ›´å¤šsuited handså¯ä»¥call\nâ€¢ æ›´å¤šoffsuit broadwayå¯ä»¥call\nâ€¢ 3betèŒƒå›´ä¹Ÿæ”¾å®½15-20%\n\nâš ï¸ å…³é”®ï¼šFoldå¤ªå¤š = è¢«Anteå‰¥å‰Š" 
            },
            { 
                q: "ç›²æ³¨æˆ˜ï¼ˆSB vs BBï¼‰åº”è¯¥å¦‚ä½•è°ƒæ•´ï¼Ÿ", 
                a: "ğŸ¯ ç›²æ³¨æˆ˜è°ƒæ•´ï¼š\n\nSBç­–ç•¥ï¼š\nâ€¢ Open 50%+ï¼ˆæœ‰Anteï¼‰\nâ€¢ 3betèŒƒå›´æ›´å®½\nâ€¢ Sizingå¯ä»¥ç¨å°ï¼ˆ2.5xå¤Ÿäº†ï¼‰\n\nBBç­–ç•¥ï¼š\nâ€¢ æ›´å®½3beté˜²å®ˆ\nâ€¢ æ›´å°‘foldç»™raise\nâ€¢ Check-raiseé¢‘ç‡å¢åŠ \n\nğŸ’¡ åŸåˆ™ï¼š\nâ€¢ ä¸è¦ç™½ç™½æŠŠAnteé€ç»™å¯¹æ‰‹\nâ€¢ ç›²æ³¨æˆ˜æ˜¯äº‰å¤ºæ­»é’±çš„æˆ˜äº‰" 
            }
        ]
    },
    {
        id: 3,
        title: "æ·±ç­¹ç ç­–ç•¥",
        time: "5-8ç§’",
        icon: "ğŸ¦",
        warning: false,
        description: "åˆ©ç”¨æ·±ç­¹ç çš„éšå«èµ”ç‡æœ€å¤§åŒ–ä»·å€¼",
        questions: [
            { 
                q: "å½“å‰æœ‰æ•ˆç­¹ç æ˜¯å¤šå°‘BBï¼ŸSPRæ˜¯å¤šå°‘ï¼Ÿ", 
                a: "ğŸ¯ SPRè®¡ç®—ï¼š\nâ€¢ SPR = æœ‰æ•ˆç­¹ç  / ç¿»ç‰Œåº•æ± \nâ€¢ ä¾‹ï¼š200BBç­¹ç ï¼Œç¿»ç‰Œåº•æ± 20BBï¼ŒSPR=10\n\nğŸ’¡ SPRç­–ç•¥ï¼š\nâ€¢ SPR < 4: Pot committedï¼Œé¡¶å¯¹ç›´æ¥stack off\nâ€¢ SPR 4-10: éœ€è¦æ›´å¼ºç‰ŒåŠ›æ‰èƒ½stack off\nâ€¢ SPR > 10: åªç”¨åšæœå’Œå¼ºå¬ç‰Œstack off\n\nâš ï¸ æ·±ç­¹ç ç‰¹ç‚¹ï¼šSPRé€šå¸¸å¾ˆé«˜ï¼Œéœ€è¦æ›´è°¨æ…" 
            },
            { 
                q: "æˆ‘çš„ç‰Œæœ‰è¶³å¤Ÿçš„éšå«èµ”ç‡å—ï¼Ÿ", 
                a: "ğŸ¯ éšå«èµ”ç‡è¯„ä¼°ï¼š\nâ€¢ å°å¯¹å­set miningï¼šéœ€è¦15:1ï¼Œæ·±ç­¹ç å®Œå…¨è¶³å¤Ÿ\nâ€¢ åŒèŠ±å¬ç‰Œï¼šéœ€è¦4:1åŸºæœ¬odds + éšå«èµ”ç‡\nâ€¢ é¡ºå­å¬ç‰Œï¼šéœ€è¦5:1åŸºæœ¬odds + éšå«èµ”ç‡\n\nğŸ’¡ æ·±ç­¹ç ä¼˜åŠ¿ï¼š\nâ€¢ å‡»ä¸­å¯ä»¥èµ¢æ›´å¤š\nâ€¢ æŠ•æœºç‰Œä»·å€¼å¤§å¢\nâ€¢ 78så¯èƒ½æ¯”AJoæ›´å€¼é’±ï¼ˆæŸäº›æƒ…å†µï¼‰\n\nâš ï¸ å‰æï¼šå¯¹æ‰‹ä¼šä»˜é’±ç»™ä½ " 
            },
            { 
                q: "å¯¹æ‰‹æ˜¯å¦ä¼šä¸ºå¤§åº•æ± ä»˜å‡ºå…¨éƒ¨ç­¹ç ï¼Ÿ", 
                a: "ğŸ¯ å¯¹æ‰‹æ”¯ä»˜æ„æ„¿è¯„ä¼°ï¼š\nâ€¢ é±¼/è·Ÿæ³¨ç«™ï¼šæ˜¯çš„ï¼Œoverpairä¼šstack off\nâ€¢ Nitï¼šä¸ä¼šï¼Œé™¤éä»–æœ‰åšæœ\nâ€¢ LAGï¼šå¯èƒ½ï¼Œå–å†³äºä»–çš„read\nâ€¢ TAGï¼šä¸å¤ªä¼šï¼Œé™¤éä»–ä¹Ÿæœ‰åšæœ\n\nğŸ’¡ è°ƒæ•´ç­–ç•¥ï¼š\nâ€¢ vs ä¼šä»˜é’±çš„ï¼šset mining valueé«˜\nâ€¢ vs ä¸ä¼šä»˜é’±çš„ï¼šset mining valueä½\nâ€¢ vs ä¼šbluffçš„ï¼štrap valueé«˜" 
            },
            { 
                q: "æˆ‘åº”è¯¥å¦‚ä½•æ„å»ºå¤šè¡—ä»·å€¼ï¼Ÿ", 
                a: "ğŸ¯ å¤šè¡—ä»·å€¼ç­–ç•¥ï¼š\nâ€¢ ç¿»ç‰Œï¼šå°æ³¨ï¼ˆ40-50% potï¼‰\nâ€¢ è½¬ç‰Œï¼šä¸­æ³¨ï¼ˆ60-75% potï¼‰\nâ€¢ æ²³ç‰Œï¼šå¤§æ³¨ï¼ˆ75-100% potï¼‰\n\nğŸ’¡ ç›®çš„ï¼š\nâ€¢ è®©å¯¹æ‰‹èˆ’æœåœ°è·Ÿæ³¨\nâ€¢ é€æ­¥build pot\nâ€¢ æœ€å¤§åŒ–æœ€ç»ˆèµ¢å–çš„ç­¹ç \n\nâš ï¸ å¸¸è§é”™è¯¯ï¼š\nâ€¢ ç¿»ç‰Œä¸‹å¤ªå¤§å“è·‘å¯¹æ‰‹\nâ€¢ è½¬ç‰Œä¸æ•¢ç»§ç»­value\nâ€¢ æ²³ç‰Œunder-betå¼ºç‰Œ" 
            }
        ]
    },
    {
        id: 4,
        title: "å‰¥å‰Šæ‰§è¡Œ",
        time: "5-10ç§’",
        icon: "âš”ï¸",
        warning: true,
        description: "æ ¹æ®å¯¹æ‰‹ç±»å‹æ‰§è¡Œå…·ä½“çš„å‰¥å‰Šç­–ç•¥",
        questions: [
            { 
                q: "å¯¹æ‰‹æ˜¯é±¼/è·Ÿæ³¨ç«™ï¼Œæˆ‘åº”è¯¥å¦‚ä½•è°ƒæ•´ï¼Ÿ", 
                a: "ğŸŸ vs é±¼/è·Ÿæ³¨ç«™ç­–ç•¥ï¼š\n\nâœ… åº”è¯¥åšçš„ï¼š\nâ€¢ ä»·å€¼ä¸ºç‹ï¼Œå¤§é¢value bet\nâ€¢ è–„ä»·å€¼ï¼ˆä¸­å¯¹éƒ½å¯ä»¥betï¼‰\nâ€¢ è¶…å¤§sizingï¼ˆ100-150% potï¼‰\nâ€¢ ç®€å•ç›´æ¥ï¼Œä¸è¦èŠ±æ´»\n\nâŒ ä¸åº”è¯¥åšçš„ï¼š\nâ€¢ è¯ˆå”¬ï¼ˆä»–ä»¬ä¸ä¼šfoldï¼‰\nâ€¢ å¤æ‚çš„playï¼ˆä»–ä»¬ä¸æ‡‚ï¼‰\nâ€¢ å°é¢è¯•æ¢ï¼ˆä»–ä»¬ä¸care sizeï¼‰\n\nğŸ’° è®°ä½ï¼šä»–ä»¬æ˜¯ATMæœº" 
            },
            { 
                q: "å¯¹æ‰‹æ˜¯Nit/å²©çŸ³ï¼Œæˆ‘åº”è¯¥å¦‚ä½•è°ƒæ•´ï¼Ÿ", 
                a: "ğŸª¨ vs Nitç­–ç•¥ï¼š\n\nâœ… åº”è¯¥åšçš„ï¼š\nâ€¢ ç–¯ç‹‚å·ç›²ï¼ˆä»–ä»¬foldå¤ªå¤šï¼‰\nâ€¢ é«˜é¢‘c-betï¼ˆä»–ä»¬ä¸floatï¼‰\nâ€¢ å¤šbluffï¼ˆä»–ä»¬ä¸call lightï¼‰\nâ€¢ ä»–ä»¬raiseå°±ç«‹å³fold\n\nâŒ ä¸åº”è¯¥åšçš„ï¼š\nâ€¢ ç”¨å¼ºç‰Œæ…¢æ‰“ï¼ˆä»–ä»¬ä¸ä¼šä»˜é’±ï¼‰\nâ€¢ å’Œä»–ä»¬æ‰“å¤§åº•æ± ï¼ˆä»–ä»¬åªç”¨åšæœï¼‰\nâ€¢ è¯•å›¾hero call\n\nğŸ’¡ è®°ä½ï¼šå·ç›²å°±æ˜¯å°é’æœº" 
            },
            { 
                q: "å¯¹æ‰‹æ˜¯LAGï¼Œæˆ‘åº”è¯¥å¦‚ä½•è°ƒæ•´ï¼Ÿ", 
                a: "ğŸ¦ vs LAGç­–ç•¥ï¼š\n\nâœ… åº”è¯¥åšçš„ï¼š\nâ€¢ è®¾é™·é˜±ï¼ˆflat strong handsï¼‰\nâ€¢ å®½call-downï¼ˆä»–ä»¬bluffå¤šï¼‰\nâ€¢ æ›´å¤šcheck-callï¼ˆè®©ä»–ç»§ç»­bluffï¼‰\nâ€¢ ç”¨blocker hands 4bet light\n\nâŒ ä¸åº”è¯¥åšçš„ï¼š\nâ€¢ è¿‡å¤šbluffï¼ˆä»–ä»¬ä¼šfight backï¼‰\nâ€¢ ç”¨è¾¹ç¼˜ç‰Œå…¥æ± ï¼ˆä»–ä»¬ä¼šsqueezeï¼‰\nâ€¢ è¢«å“åˆ°foldå¤ªå¤š\n\nğŸ’¡ è®°ä½ï¼šè®©ä»–è‡ªå·±æ‰“è´¥è‡ªå·±" 
            },
            { 
                q: "å¯¹æ‰‹æ­£åœ¨Tiltï¼Œæˆ‘åº”è¯¥å¦‚ä½•è°ƒæ•´ï¼Ÿ", 
                a: "ğŸ˜¤ vs Tiltingç©å®¶ç­–ç•¥ï¼š\n\nâœ… åº”è¯¥åšçš„ï¼š\nâ€¢ æåº¦è€å¿ƒç­‰å¾…\nâ€¢ è¶…å¤§value bet\nâ€¢ è®©ä»–åšè ¢äº‹\nâ€¢ æ‰©å¤§callèŒƒå›´\n\nâŒ ä¸åº”è¯¥åšçš„ï¼š\nâ€¢ è¯ˆå”¬ï¼ˆä»–ä»¬call everythingï¼‰\nâ€¢ ç€æ€¥å…¥æ± ï¼ˆç­‰å¥½ç‰Œï¼‰\nâ€¢ å’Œä»–ä»¬battleï¼ˆä¿æŒå†·é™ï¼‰\n\nğŸ’¡ è®°ä½ï¼š\nâ€¢ Tiltæ˜¯æ‰‘å…‹æœ€èµšé’±çš„æ—¶åˆ»\nâ€¢ ä½ çš„ä»»åŠ¡æ˜¯æ”¶å‰²ï¼Œä¸æ˜¯æ•™è‚²" 
            }
        ]
    },
    {
        id: 5,
        title: "å¹³è¡¡æ£€æŸ¥",
        time: "3-5ç§’",
        icon: "âš–ï¸",
        warning: true,
        description: "ç¡®ä¿ä½ çš„å‰¥å‰Šä¸ä¼šè¢«åå‰¥å‰Š",
        questions: [
            { 
                q: "æˆ‘çš„å‰¥å‰Šæ˜¯å¦è¿‡åº¦ï¼Ÿä¼šè¢«å¯Ÿè§‰å—ï¼Ÿ", 
                a: "âš ï¸ è¿‡åº¦å‰¥å‰Šçš„é£é™©ï¼š\nâ€¢ å¯¹æ‰‹å¼€å§‹è°ƒæ•´\nâ€¢ ä½ çš„patternè¢«è¯†ç ´\nâ€¢ å˜æˆè¢«å‰¥å‰Šçš„ä¸€æ–¹\n\nğŸ¯ å®‰å…¨è¾¹ç•Œï¼š\nâ€¢ å¯¹æŠ—é±¼ï¼šå¯ä»¥å¤§å¹…å‰¥å‰Šï¼ˆä»–ä»¬ä¸è°ƒæ•´ï¼‰\nâ€¢ å¯¹æŠ—Regï¼šåªèƒ½å°å¹…è°ƒæ•´ï¼ˆä»–ä»¬ä¼šåå‡»ï¼‰\nâ€¢ å¯¹æŠ—å¥½ç©å®¶ï¼šä¿æŒGTOï¼ˆå‰¥å‰Šé£é™©é«˜ï¼‰\n\nğŸ’¡ åŸåˆ™ï¼š\nâ€¢ 80% GTO + 20% å‰¥å‰Š\nâ€¢ ä¸ç¡®å®šæ—¶å›å½’GTO" 
            },
            { 
                q: "å¯¹æ‰‹æ˜¯å¦æ³¨æ„åˆ°äº†æˆ‘çš„patternï¼Ÿ", 
                a: "ğŸ” è§‚å¯Ÿå¯¹æ‰‹ååº”ï¼š\nâ€¢ å¼€å§‹å’Œæˆ‘4bet warï¼Ÿ\nâ€¢ å¼€å§‹floatæˆ‘çš„c-betï¼Ÿ\nâ€¢ å¼€å§‹check-raiseæ›´å¤šï¼Ÿ\nâ€¢ å¼€å§‹ç»™æˆ‘æ›´å¤šrespectï¼Ÿ\n\nğŸ’¡ å¦‚æœå‘ç°è¢«å¯Ÿè§‰ï¼š\nâ€¢ ç«‹å³å›å½’GTO\nâ€¢ æ”¹å˜ä½ çš„é¢‘ç‡\nâ€¢ åˆ©ç”¨ä»–ä»¬çš„over-adjustment\n\nâš ï¸ æœ€å±é™©çš„ï¼š\nâ€¢ ä»¥ä¸ºå¯¹æ‰‹æ˜¯é±¼ï¼Œå…¶å®æ˜¯è£…çš„\nâ€¢ å‰¥å‰Šå¤ªä¹…ï¼Œpatternæ˜æ˜¾" 
            },
            { 
                q: "æˆ‘çš„æ•´ä½“é¢‘ç‡æ˜¯å¦åˆç†ï¼Ÿ", 
                a: "ğŸ¯ é¢‘ç‡è‡ªæ£€ï¼š\n\nè¯ˆå”¬é¢‘ç‡ï¼š\nâ€¢ vs é±¼ï¼š0-10%\nâ€¢ vs Nitï¼š40-50%\nâ€¢ vs LAGï¼š10-20%\nâ€¢ vs TAGï¼šæŒ‰MDF\n\nValueé¢‘ç‡ï¼š\nâ€¢ vs é±¼ï¼š100%ï¼ˆæ°¸è¿œvalueï¼‰\nâ€¢ vs Nitï¼šåå°‘ï¼ˆä»–ä»¬ä¸callï¼‰\nâ€¢ vs LAGï¼šåå¤šï¼ˆä»–ä»¬ä¼šcallï¼‰\n\nğŸ’¡ è‡ªé—®ï¼šå¦‚æœå¯¹æ‰‹çœ‹æˆ‘100æ‰‹ç‰Œï¼Œä»–ä¼šå‘ç°ä»€ä¹ˆpatternï¼Ÿ" 
            },
            { 
                q: "è¿™ä¸ªsessionæˆ‘åº”è¯¥ç»§ç»­å‰¥å‰Šè¿˜æ˜¯å›å½’GTOï¼Ÿ", 
                a: "âš–ï¸ å†³ç­–æ ‘ï¼š\n\nç»§ç»­å‰¥å‰Šå¦‚æœï¼š\nâ€¢ å¯¹æ‰‹æ²¡æœ‰è°ƒæ•´\nâ€¢ å¯¹æ‰‹è¿˜åœ¨çŠ¯åŒæ ·çš„é”™è¯¯\nâ€¢ æˆ‘çš„win rateç¨³å®š\n\nå›å½’GTOå¦‚æœï¼š\nâ€¢ å¯¹æ‰‹å¼€å§‹è°ƒæ•´\nâ€¢ æˆ‘çš„bluffè¢«catchæ›´å¤š\nâ€¢ ä¸ç¡®å®šå¯¹æ‰‹ç±»å‹äº†\n\nğŸ’¡ é‡‘ç§‘ç‰å¾‹ï¼š\nâ€¢ ç›ˆåˆ©æ—¶ä¸è¦è´ªï¼Œæ…¢æ…¢å‰¥å‰Š\nâ€¢ æ„Ÿè§‰ä¸å¯¹æ—¶ï¼Œå›å½’GTO\nâ€¢ GTOæ°¸è¿œæ˜¯å®‰å…¨é€€è·¯" 
            }
        ]
    },
    {
        id: 6,
        title: "é£é™©æ§åˆ¶",
        time: "2-3ç§’",
        icon: "ğŸ›¡ï¸",
        warning: true,
        description: "æ§åˆ¶æ³¢åŠ¨ï¼Œä¿æŠ¤æˆ˜æœ",
        questions: [
            { 
                q: "æˆ‘ä»Šå¤©çš„æ³¢åŠ¨æ˜¯å¦åœ¨å¯æ¥å—èŒƒå›´ï¼Ÿ", 
                a: "ğŸ“Š æ³¢åŠ¨æ§åˆ¶æ ‡å‡†ï¼š\nâ€¢ å•æ—¥æ­¢æŸï¼š3-5ä¸ªbuy-in\nâ€¢ å•æ—¥æ­¢ç›ˆï¼šå¯é€‰ï¼ˆåœ¨çŠ¶æ€å¥½æ—¶å¯ä»¥ç»§ç»­ï¼‰\nâ€¢ Sessioné•¿åº¦ï¼š4-6å°æ—¶max\n\nâš ï¸ è­¦å‘Šä¿¡å·ï¼š\nâ€¢ è¾“è¶…è¿‡æ­¢æŸç‚¹\nâ€¢ å¼€å§‹æƒ³ã€Œèµ¢å›æ¥ã€\nâ€¢ æ„Ÿè§‰ç–²åŠ³æˆ–ä¸é›†ä¸­\n\nğŸ’¡ åŸåˆ™ï¼š\nâ€¢ æ³¢åŠ¨å¤§æ—¶å‡å°‘å‰¥å‰Šï¼Œå›å½’GTO\nâ€¢ ä¿æŠ¤æœ¬é‡‘æ¯”å¤§èµ¢é‡è¦" 
            },
            { 
                q: "æˆ‘æ˜¯å¦åœ¨ç”¨å‰¥å‰Šæ©ç›–ä¸å¥½çš„æ‰“æ³•ï¼Ÿ", 
                a: "ğŸ” è‡ªçœæ£€æŸ¥ï¼š\n\nâŒ å±é™©ä¿¡å·ï¼š\nâ€¢ å› ä¸ºæƒ³èµ¢å›æ¥è€Œå‰¥å‰Š\nâ€¢ å› ä¸ºæ— èŠè€Œå‰¥å‰Š\nâ€¢ å› ä¸ºæƒ…ç»ªè€Œå‰¥å‰Š\n\nâœ… æ­£ç¡®çš„å‰¥å‰ŠåŠ¨æœºï¼š\nâ€¢ åŸºäºæ•°æ®å’Œè§‚å¯Ÿ\nâ€¢ æœ‰æ¸…æ™°çš„ç†ç”±\nâ€¢ å¯ä»¥è§£é‡Šæ¯ä¸ªå†³å®š\n\nğŸ’¡ é—®è‡ªå·±ï¼š\nâ€¢ è¿™ä¸ªå‰¥å‰Šæ˜¯è®¡åˆ’å¥½çš„å—ï¼Ÿ\nâ€¢ æˆ‘èƒ½è§£é‡Šä¸ºä»€ä¹ˆè¿™æ ·åšå—ï¼Ÿ\nâ€¢ å¦‚æœæˆ‘é”™äº†ï¼Œæˆ‘èƒ½æ‰¿å—å—ï¼Ÿ" 
            },
            { 
                q: "å¦‚æœå‰¥å‰Šå¤±è´¥ï¼Œæˆ‘æœ‰plan Bå—ï¼Ÿ", 
                a: "ğŸ¯ å¤‡é€‰æ–¹æ¡ˆï¼š\n\nå‰¥å‰Šå¤±è´¥æ—¶ï¼š\nâ€¢ ç«‹å³å›å½’GTOï¼ˆå®‰å…¨ï¼‰\nâ€¢ å‡å°‘è¿™ä¸ªå¯¹æ‰‹çš„å…¥æ± \nâ€¢ æ¢åº§ä½/æ¢æ¡Œ\n\nğŸ’¡ æ°¸è¿œè®°ä½ï¼š\nâ€¢ GTOæ˜¯ä½ çš„å®‰å…¨ç½‘\nâ€¢ ä¸ç¡®å®šæ—¶å°±GTO\nâ€¢ å‰¥å‰Šåªæ˜¯é”¦ä¸Šæ·»èŠ±\n\nâš ï¸ æœ€åæƒ…å†µï¼š\nâ€¢ è¢«åå‰¥å‰Š\nâ€¢ æŸå¤±æ§åˆ¶åœ¨å¯æ¥å—èŒƒå›´\nâ€¢ å­¦åˆ°ç»éªŒä¸‹æ¬¡è°ƒæ•´" 
            },
            { 
                q: "æˆ‘ä»Šå¤©çš„çŠ¶æ€é€‚åˆå‰¥å‰Šå—ï¼Ÿ", 
                a: "ğŸ§  çŠ¶æ€è‡ªæ£€ï¼š\n\nâœ… å¯ä»¥å‰¥å‰Šï¼š\nâ€¢ å¤´è„‘æ¸…é†’\nâ€¢ æ³¨æ„åŠ›é›†ä¸­\nâ€¢ æƒ…ç»ªç¨³å®š\nâ€¢ æœ‰å……è¶³çš„reads\n\nâŒ ä¸é€‚åˆå‰¥å‰Šï¼š\nâ€¢ ç–²åŠ³\nâ€¢ åˆ†å¿ƒ\nâ€¢ æƒ…ç»ªæ³¢åŠ¨\nâ€¢ ä¿¡æ¯ä¸è¶³\n\nğŸ’¡ åŸåˆ™ï¼š\nâ€¢ çŠ¶æ€ä¸å¥½æ—¶æ‰“çº¯GTO\nâ€¢ å‰¥å‰Šéœ€è¦æ›´é«˜çš„ä¸“æ³¨åº¦\nâ€¢ A-gameæ—¶æ‰å‰¥å‰Šï¼ŒB/C-gameæ—¶GTO" 
            }
        ]
    }
];

// ==================== å®æˆ˜åœºæ™¯åº“ ====================
const EXPLOIT_SCENARIOS = [
    {
        id: 1,
        category: "ç¿»å‰å‰¥å‰Š",
        title: "å·ç›²é±¼çš„ç›²æ³¨",
        scenario: "ä½ åœ¨BTNï¼ŒSBæ˜¯ç´§å¼±ç©å®¶ï¼ˆfold to steal 85%ï¼‰ï¼ŒBBæ˜¯é±¼ï¼ˆä¼šcallå¤ªå®½ï¼‰ã€‚ä½ æ‹¿åˆ°K7oï¼Œå‰é¢éƒ½foldäº†ã€‚",
        question: "ä½ åº”è¯¥æ€ä¹ˆåšï¼Ÿ",
        options: [
            { text: "Fold", correct: false, explanation: "è¿™ä¸ªspotå¤ªå¥½äº†ï¼ŒK7oè¶³å¤Ÿå·ç›²" },
            { text: "Raise 2.5BB", correct: true, explanation: "æ­£ç¡®ï¼SBä¼šfold 85%ï¼Œå³ä½¿BB callä¹Ÿå¯ä»¥ç”¨ä½ç½®ä¼˜åŠ¿å‰¥å‰Šä»–çš„å®½range" },
            { text: "Raise 4BB", correct: false, explanation: "Sizeå¤ªå¤§ï¼Œ2.5BBè¶³å¤Ÿè®©Nit foldï¼Œä¸éœ€è¦æµªè´¹ç­¹ç " },
            { text: "Limp", correct: false, explanation: "Limpæ”¾å¼ƒäº†å·ç›²çš„æœºä¼šï¼Œè€Œä¸”è®©BBå…è´¹çœ‹ç‰Œ" }
        ],
        exploitType: "vs Nit steal"
    },
    {
        id: 2,
        category: "ç¿»å‰å‰¥å‰Š",
        title: "å¯¹æŠ—LAGçš„3bet",
        scenario: "ä½ åœ¨COï¼Œæ‹¿åˆ°JJã€‚BTNæ˜¯LAGï¼ˆ3bet 15%ï¼‰ï¼Œä»–ç»å¸¸light 3betã€‚ä½ open 2.5BBï¼Œä»–3betåˆ°8BBã€‚SB/BB foldã€‚",
        question: "ä½ åº”è¯¥æ€ä¹ˆåšï¼Ÿ",
        options: [
            { text: "Fold", correct: false, explanation: "JJå¤ªå¼ºäº†ï¼Œå¯¹æŠ—15% 3bet range foldæ˜¯é”™è¯¯çš„" },
            { text: "Call", correct: false, explanation: "è™½ç„¶å¯ä»¥ï¼Œä½†æ˜¯flatè®©ä½ OOPé¢å¯¹æ¿€è¿›ç©å®¶ï¼Œæ›´å¥½çš„é€‰æ‹©æ˜¯4bet" },
            { text: "4bet to 20BB", correct: true, explanation: "æ­£ç¡®ï¼å¯¹æŠ—LAGçš„å®½3betï¼ŒJJå¯ä»¥4bet for value+bluffï¼Œå¾ˆå¤šæ—¶å€™ä»–ä¼šfold" },
            { text: "All-in", correct: false, explanation: "All-inå¤ªæç«¯ï¼Œç»™ä»–foldæ‰æ‰€æœ‰bluffçš„æœºä¼š" }
        ],
        exploitType: "vs LAG 4bet"
    },
    {
        id: 3,
        category: "ç¿»åå‰¥å‰Š",
        title: "å¯¹è·Ÿæ³¨ç«™çš„ä»·å€¼ä¸‹æ³¨",
        scenario: "ä½ åœ¨BTNï¼Œæ‹¿åˆ°AToï¼Œç¿»å‰openï¼ŒBBï¼ˆè·Ÿæ³¨ç«™ï¼Œfold to c-bet 20%ï¼‰callã€‚Flop: A-7-2 rainbowã€‚åº•æ± 15BBã€‚BB checkã€‚",
        question: "ä½ åº”è¯¥ä¸‹å¤šå°‘ï¼Ÿ",
        options: [
            { text: "Check behind", correct: false, explanation: "ä½ æœ‰é¡¶å¯¹ä¸­kickerï¼Œå¯¹è·Ÿæ³¨ç«™å¿…é¡»value bet" },
            { text: "Bet 5BB (33% pot)", correct: false, explanation: "Sizeå¤ªå°ï¼Œè·Ÿæ³¨ç«™ä¸care sizeï¼Œä¸è¦ç»™ä»–ä¾¿å®œ" },
            { text: "Bet 12BB (80% pot)", correct: true, explanation: "æ­£ç¡®ï¼è·Ÿæ³¨ç«™ä¼šç”¨ä»»ä½•å¯¹å­callï¼Œå¤§é¢value betæœ€å¤§åŒ–ä»·å€¼" },
            { text: "Bet 20BB (130% pot)", correct: false, explanation: "è™½ç„¶ä»–ä¼šcallï¼Œä½†æ˜¯å¤ªå¤§å¯èƒ½å“è·‘ä¸€äº›å¼±ç‰Œ" }
        ],
        exploitType: "vs Calling Station value"
    },
    {
        id: 4,
        category: "ç¿»åå‰¥å‰Š",
        title: "å¯¹Nitçš„è¯ˆå”¬",
        scenario: "ä½ åœ¨COï¼Œ3bet potï¼ŒHJï¼ˆNitï¼‰callã€‚Flop: K-8-3 rainbowã€‚ä½ æœ‰QJsï¼ˆæ²¡å‡»ä¸­ï¼‰ã€‚åº•æ± 25BBã€‚Nit checkã€‚",
        question: "ä½ åº”è¯¥æ€ä¹ˆåšï¼Ÿ",
        options: [
            { text: "Check behind", correct: false, explanation: "Nit fold to c-betå¾ˆé«˜ï¼Œè¿™æ˜¯å°é’æœºä¼š" },
            { text: "Bet 8BB (33% pot)", correct: true, explanation: "æ­£ç¡®ï¼å°é¢c-betå°±è¶³å¤Ÿè®©Nit foldï¼Œä¸éœ€è¦å†’æ›´å¤šé£é™©" },
            { text: "Bet 20BB (80% pot)", correct: false, explanation: "Sizeå¤ªå¤§äº†ï¼Œå°betå°±èƒ½è¾¾åˆ°ç›®çš„" },
            { text: "All-in", correct: false, explanation: "å®Œå…¨æ²¡å¿…è¦ï¼Œè€Œä¸”å¦‚æœä»–callä½ å°±å®Œè›‹äº†" }
        ],
        exploitType: "vs Nit bluff"
    },
    {
        id: 5,
        category: "ç¿»åå‰¥å‰Š",
        title: "è®©LAGè‡ªå·±bluff",
        scenario: "ä½ åœ¨BTNï¼Œæ‹¿åˆ°AAï¼Œç¿»å‰åªcalläº†COï¼ˆLAGï¼‰çš„openï¼ˆä¸ºäº†trapï¼‰ã€‚Flop: J-7-3 rainbowã€‚LAG c-bet 60% potã€‚",
        question: "ä½ åº”è¯¥æ€ä¹ˆåšï¼Ÿ",
        options: [
            { text: "Fold", correct: false, explanation: "AAæ˜¯åšæœï¼Œç»å¯¹ä¸èƒ½fold" },
            { text: "Call", correct: true, explanation: "æ­£ç¡®ï¼LAGä¼šç»§ç»­barrelï¼Œè®©ä»–åœ¨è½¬ç‰Œ/æ²³ç‰Œç»§ç»­bluffï¼Œæœ€å¤§åŒ–ä»·å€¼" },
            { text: "Raise to 3x", correct: false, explanation: "Raiseä¼šå“è·‘ä»–çš„bluffï¼Œæˆ‘ä»¬è¦trap" },
            { text: "All-in", correct: false, explanation: "å®Œå…¨å“è·‘å¯¹æ‰‹ï¼ŒæŸå¤±å·¨å¤§ä»·å€¼" }
        ],
        exploitType: "vs LAG trap"
    },
    {
        id: 6,
        category: "Anteè°ƒæ•´",
        title: "æœ‰Anteæ—¶çš„BBé˜²å®ˆ",
        scenario: "8äººæ¡Œï¼Œæ¯äººAnte 0.125BBï¼Œä½ åœ¨BBã€‚BTNï¼ˆTAGï¼‰openåˆ°2.5BBï¼ŒSB foldã€‚ä½ æ‹¿åˆ°T8sã€‚åº•æ± æœ‰3.5BBï¼ˆ2.5+0.5+0.5+8*0.125anteï¼‰ã€‚",
        question: "ä½ åº”è¯¥æ€ä¹ˆåšï¼Ÿ",
        options: [
            { text: "Fold", correct: false, explanation: "æœ‰Anteæ—¶ï¼ŒT8så¯¹æŠ—BTN openå®Œå…¨å¯ä»¥é˜²å®ˆ" },
            { text: "Call", correct: true, explanation: "æ­£ç¡®ï¼åº•æ± èµ”ç‡æ›´å¥½ï¼ˆcall 1.5BBèµ¢4.5BB = 33% equityï¼‰ï¼ŒT8sæœ‰è¶³å¤Ÿçš„playability" },
            { text: "3bet to 9BB", correct: false, explanation: "å¯¹æŠ—TAGï¼ŒT8sä¸å¤Ÿå¼ºæ¥3betï¼Œcallæ˜¯æœ€ä½³" },
            { text: "All-in", correct: false, explanation: "è’è°¬çš„over-play" }
        ],
        exploitType: "Ante adjustment"
    },
    {
        id: 7,
        category: "æ·±ç­¹ç ",
        title: "æ·±ç­¹ç set mining",
        scenario: "ä½ åœ¨COï¼Œ200BBæœ‰æ•ˆã€‚UTGï¼ˆTAGï¼‰open 3BBï¼Œä½ æ‹¿åˆ°44ã€‚åé¢è¿˜æœ‰BTN/SB/BBå¯èƒ½å…¥æ± ã€‚",
        question: "ä½ åº”è¯¥æ€ä¹ˆåšï¼Ÿ",
        options: [
            { text: "Fold", correct: false, explanation: "200BBæ·±åº¦ï¼Œset miningéšå«èµ”ç‡æé«˜" },
            { text: "Call", correct: true, explanation: "æ­£ç¡®ï¼set miningæœ€ä½³ï¼Œå‡»ä¸­setå¯ä»¥èµ¢100BB+ï¼Œéšå«èµ”ç‡è¿œè¶…æ‰€éœ€çš„15:1" },
            { text: "3bet to 10BB", correct: false, explanation: "44ä¸é€‚åˆ3betï¼Œè¢«4betå°±å°´å°¬" },
            { text: "Raise to 9BB", correct: false, explanation: "åŒä¸Šï¼Œ44ä¸é€‚åˆinflate pot" }
        ],
        exploitType: "Deep stack set mining"
    },
    {
        id: 8,
        category: "æ·±ç­¹ç ",
        title: "æ·±ç­¹ç å¤šè¡—ä»·å€¼",
        scenario: "ä½ åœ¨BTNï¼Œ180BBæ·±ã€‚ä½ æœ‰KKï¼Œç¿»å‰3betï¼ŒBBï¼ˆé±¼ï¼‰callã€‚Flop: K-7-2 rainbowã€‚ä½ å‡»ä¸­é¡¶setï¼åº•æ± 20BBã€‚BB checkã€‚",
        question: "ç¿»ç‰Œåœˆä½ åº”è¯¥betå¤šå°‘ï¼Ÿ",
        options: [
            { text: "Check behind", correct: false, explanation: "æœ‰é¡¶setå¿…é¡»value betï¼Œå°¤å…¶å¯¹é±¼" },
            { text: "Bet 7BB (35% pot)", correct: true, explanation: "æ­£ç¡®ï¼å°betè®©å¯¹æ‰‹èˆ’æœcallï¼Œä¸ºåé¢è¡—é“build potã€‚ç›®æ ‡æ˜¯åœ¨æ²³ç‰Œä¸‹å¤§æ³¨" },
            { text: "Bet 15BB (75% pot)", correct: false, explanation: "Sizeæœ‰ç‚¹å¤§ï¼Œå¯èƒ½å“è·‘ä¸€äº›hands" },
            { text: "All-in", correct: false, explanation: "All-inä¼šå“è·‘æ‰€æœ‰ä¸æ˜¯setçš„ç‰Œ" }
        ],
        exploitType: "Deep stack value building"
    }
];

// ==================== æˆå°±ç³»ç»Ÿ ====================
const EXPLOIT_ACHIEVEMENTS = [
    { id: 'first_exploit', title: 'åˆæ¬¡å‰¥å‰Š', desc: 'å®Œæˆç¬¬1æ¬¡å‰¥å‰Šè®­ç»ƒ', icon: 'ğŸ¯', requirement: 1 },
    { id: 'fish_hunter', title: 'æ•é±¼è¾¾äºº', desc: 'å®Œæˆ10æ¬¡vsé±¼çš„è®­ç»ƒ', icon: 'ğŸŸ', requirement: 10, type: 'fish' },
    { id: 'nit_crusher', title: 'å²©çŸ³ç²‰ç¢æœº', desc: 'å®Œæˆ10æ¬¡vs Nitçš„è®­ç»ƒ', icon: 'ğŸª¨', requirement: 10, type: 'nit' },
    { id: 'lag_tamer', title: 'LAGé©¯æœè€…', desc: 'å®Œæˆ10æ¬¡vs LAGçš„è®­ç»ƒ', icon: 'ğŸ¦', requirement: 10, type: 'lag' },
    { id: 'ante_master', title: 'Anteå¤§å¸ˆ', desc: 'å®Œæˆ20æ¬¡Anteè°ƒæ•´è®­ç»ƒ', icon: 'ğŸ’°', requirement: 20, type: 'ante' },
    { id: 'deep_stack_pro', title: 'æ·±ç­¹ç ä¸“å®¶', desc: 'å®Œæˆ20æ¬¡æ·±ç­¹ç è®­ç»ƒ', icon: 'ğŸ¦', requirement: 20, type: 'deep' },
    { id: 'exploit_expert', title: 'å‰¥å‰Šä¸“å®¶', desc: 'å®Œæˆ50æ¬¡è®­ç»ƒ', icon: 'âš”ï¸', requirement: 50 },
    { id: 'exploit_master', title: 'å‰¥å‰Šå¤§å¸ˆ', desc: 'å®Œæˆ200æ¬¡è®­ç»ƒ', icon: 'ğŸ‘‘', requirement: 200 },
    { id: 'balanced_player', title: 'å¹³è¡¡ç©å®¶', desc: 'æ‰€æœ‰ç±»å‹è®­ç»ƒéƒ½è¾¾åˆ°10æ¬¡', icon: 'âš–ï¸', requirement: 10, type: 'all' },
    { id: 'perfect_streak', title: 'å®Œç¾è¿èƒœ', desc: 'åœºæ™¯æµ‹è¯•è¿ç»­10æ¬¡å…¨å¯¹', icon: 'ğŸ”¥', requirement: 10, type: 'streak' }
];

// ==================== å…¨å±€çŠ¶æ€ ====================
let exploitData = {
    totalCount: 0,
    todayCount: 0,
    lastTrainingDate: null,
    consecutiveDays: 0,
    phaseScores: [0, 0, 0, 0, 0, 0],
    categoryScores: {
        fish: 0,
        nit: 0,
        lag: 0,
        maniac: 0,
        ante: 0,
        deep: 0
    },
    scenarioStats: {
        total: 0,
        correct: 0,
        streak: 0,
        maxStreak: 0
    },
    totalTime: 0,
    achievements: []
};

let currentTraining = {
    mode: 'phases',  // 'phases', 'scenarios', 'quick'
    currentPhase: 0,
    currentQuestion: 0,
    startTime: 0,
    timerInterval: null,
    questions: [],
    flipped: false,
    correctCount: 0,
    wrongCount: 0
};

// ==================== åˆå§‹åŒ– ====================
function init() {
    loadExploitData();
    updateHomePage();
    updateStatsPage();
    
    // æ£€æŸ¥æ˜¯å¦ä¸ºPWA
    if (window.matchMedia('(display-mode: standalone)').matches) {
        console.log('Running as PWA - Exploit Trainer');
    }
}

// ==================== æ•°æ®æŒä¹…åŒ– ====================
function saveExploitData() {
    localStorage.setItem('exploitTrainerData', JSON.stringify(exploitData));
}

function loadExploitData() {
    const saved = localStorage.getItem('exploitTrainerData');
    if (saved) {
        exploitData = JSON.parse(saved);
        
        // æ£€æŸ¥æ—¥æœŸï¼Œæ›´æ–°ä»Šæ—¥è®¡æ•°
        const today = new Date().toDateString();
        if (exploitData.lastTrainingDate !== today) {
            // æ£€æŸ¥è¿ç»­å¤©æ•°
            if (exploitData.lastTrainingDate) {
                const lastDate = new Date(exploitData.lastTrainingDate);
                const todayDate = new Date(today);
                const diffDays = Math.floor((todayDate - lastDate) / (1000 * 60 * 60 * 24));
                
                if (diffDays === 1) {
                    exploitData.consecutiveDays++;
                } else if (diffDays > 1) {
                    exploitData.consecutiveDays = 0;
                }
            } else {
                exploitData.consecutiveDays = 1;
            }
            
            exploitData.todayCount = 0;
        }
    }
}

// ==================== é¡µé¢åˆ‡æ¢ ====================
function switchPage(pageName) {
    // æ›´æ–°å¯¼èˆªæ 
    document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
    });
    if (event && event.target) {
        event.target.closest('.nav-item').classList.add('active');
    }
    
    // æ›´æ–°é¡µé¢
    document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
    });
    document.getElementById(pageName + 'Page').classList.add('active');
    
    // æ›´æ–°å¯¹åº”é¡µé¢æ•°æ®
    if (pageName === 'home') {
        updateHomePage();
    } else if (pageName === 'stats') {
        updateStatsPage();
    } else if (pageName === 'settings') {
        updateSettingsPage();
    }
}

// ==================== é¦–é¡µæ›´æ–° ====================
function updateHomePage() {
    document.getElementById('totalTrainingCount').textContent = exploitData.totalCount;
    document.getElementById('todayTrainingCount').textContent = exploitData.todayCount;
    document.getElementById('consecutiveDays').textContent = exploitData.consecutiveDays;
    
    // è®¡ç®—å‰¥å‰Šç†Ÿç»ƒåº¦
    const totalScore = exploitData.phaseScores.reduce((a, b) => a + b, 0);
    const mastery = Math.min(100, Math.floor(totalScore / 6));
    document.getElementById('exploitLevel').textContent = mastery + '%';
    
    // åœºæ™¯å‡†ç¡®ç‡
    const accuracy = exploitData.scenarioStats.total > 0 
        ? Math.round((exploitData.scenarioStats.correct / exploitData.scenarioStats.total) * 100)
        : 0;
    document.getElementById('scenarioAccuracy').textContent = accuracy + '%';
    
    // è¿›åº¦æ¡
    const progress = Math.min(100, Math.floor((exploitData.totalCount / 200) * 100));
    document.getElementById('progressPercent').textContent = progress + '%';
    document.getElementById('progressBarFill').style.width = progress + '%';
    document.getElementById('progressText').textContent = 
        `å‰¥å‰Šè®­ç»ƒ ${exploitData.totalCount} / 200 æ¬¡`;
}

// ==================== è®­ç»ƒæ¨¡å¼ ====================
function startTraining(mode) {
    currentTraining.mode = mode;
    currentTraining.currentPhase = 0;
    currentTraining.currentQuestion = 0;
    currentTraining.startTime = Date.now();
    currentTraining.flipped = false;
    currentTraining.correctCount = 0;
    currentTraining.wrongCount = 0;
    
    if (mode === 'phases') {
        // é˜¶æ®µè®­ç»ƒ - æŒ‰é¡ºåºå­¦ä¹ 
        currentTraining.questions = [];
        EXPLOIT_PHASES.forEach(phase => {
            phase.questions.forEach(q => {
                currentTraining.questions.push({
                    phase: phase,
                    question: q.q,
                    answer: q.a
                });
            });
        });
    } else if (mode === 'scenarios') {
        // åœºæ™¯è®­ç»ƒ - å®æˆ˜æ¨¡æ‹Ÿ
        currentTraining.questions = [...EXPLOIT_SCENARIOS];
        // éšæœºæ‰“ä¹±
        currentTraining.questions.sort(() => Math.random() - 0.5);
        // å–8ä¸ªåœºæ™¯
        currentTraining.questions = currentTraining.questions.slice(0, 8);
    } else if (mode === 'quick') {
        // å¿«é€Ÿå¤ä¹  - éšæœº6ä¸ªé—®é¢˜
        currentTraining.questions = [];
        EXPLOIT_PHASES.forEach(phase => {
            phase.questions.forEach(q => {
                currentTraining.questions.push({
                    phase: phase,
                    question: q.q,
                    answer: q.a
                });
            });
        });
        currentTraining.questions.sort(() => Math.random() - 0.5);
        currentTraining.questions = currentTraining.questions.slice(0, 6);
    }
    
    // åˆ‡æ¢åˆ°è®­ç»ƒé¡µé¢
    document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
    document.getElementById('trainPage').classList.add('active');
    document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
    
    // å¼€å§‹è®¡æ—¶
    startTimer();
    
    // æ˜¾ç¤ºç¬¬ä¸€ä¸ªé—®é¢˜
    if (mode === 'scenarios') {
        showScenario();
    } else {
        showQuestion();
    }
}

// ==================== é—®é¢˜æ˜¾ç¤º ====================
function showQuestion() {
    if (currentTraining.currentQuestion >= currentTraining.questions.length) {
        finishTraining();
        return;
    }
    
    const current = currentTraining.questions[currentTraining.currentQuestion];
    const card = document.getElementById('trainingCard');
    const scenarioSection = document.getElementById('scenarioSection');
    const phaseBadge = document.getElementById('phaseBadge');
    
    // éšè—åœºæ™¯éƒ¨åˆ†ï¼Œæ˜¾ç¤ºå¡ç‰‡éƒ¨åˆ†å’Œå¾½ç« 
    if (scenarioSection) scenarioSection.style.display = 'none';
    card.style.display = 'block';
    phaseBadge.style.display = 'inline-block';
    
    // é‡ç½®å¡ç‰‡çŠ¶æ€
    card.classList.remove('flipped');
    currentTraining.flipped = false;
    
    // æ›´æ–°å¾½ç« 
    phaseBadge.textContent = `${current.phase.icon} ${current.phase.title}`;
    phaseBadge.className = current.phase.warning ? 'phase-badge warning' : 'phase-badge';
    
    // æ›´æ–°è¿›åº¦
    document.getElementById('trainingProgress').textContent = 
        `é—®é¢˜ ${currentTraining.currentQuestion + 1} / ${currentTraining.questions.length}`;
    
    // æ›´æ–°å¡ç‰‡å†…å®¹
    document.getElementById('cardQuestion').textContent = current.question;
    
    // å¤„ç†ç­”æ¡ˆï¼Œæ ¼å¼åŒ–æ˜¾ç¤º
    const answerText = current.answer;
    const formattedAnswer = answerText
        .replace(/\n/g, '<br>')
        .replace(/â€¢/g, '<span style="color: var(--accent);">â€¢</span>')
        .replace(/âœ…/g, '<span style="color: var(--success);">âœ…</span>')
        .replace(/âŒ/g, '<span style="color: var(--danger);">âŒ</span>')
        .replace(/âš ï¸/g, '<span style="color: var(--warning);">âš ï¸</span>')
        .replace(/ğŸ’¡/g, '<span style="color: var(--accent);">ğŸ’¡</span>')
        .replace(/ğŸ¯/g, '<span style="color: var(--secondary);">ğŸ¯</span>');
    
    document.getElementById('cardAnswer').innerHTML = formattedAnswer;
    document.getElementById('cardHint').textContent = 'è½»è§¦å¡ç‰‡æŸ¥çœ‹ç­”æ¡ˆ';
    
    // éšè—æŒ‰é’®
    document.getElementById('btnKnow').style.display = 'none';
    document.getElementById('btnForget').style.display = 'none';
    
    // é‡ç½®ç­”æ¡ˆåŒºåŸŸæ»šåŠ¨ä½ç½®
    const backCard = document.querySelector('.flip-card-back');
    if (backCard) backCard.scrollTop = 0;
}

// ==================== åœºæ™¯æ˜¾ç¤º ====================
function showScenario() {
    if (currentTraining.currentQuestion >= currentTraining.questions.length) {
        finishTraining();
        return;
    }
    
    const current = currentTraining.questions[currentTraining.currentQuestion];
    const card = document.getElementById('trainingCard');
    const scenarioSection = document.getElementById('scenarioSection');
    const phaseBadge = document.getElementById('phaseBadge');
    
    // éšè—å¡ç‰‡å’Œå¾½ç« ï¼Œæ˜¾ç¤ºåœºæ™¯éƒ¨åˆ†
    card.style.display = 'none';
    phaseBadge.style.display = 'none';
    scenarioSection.style.display = 'block';
    
    // æ›´æ–°åœºæ™¯å†…å®¹
    document.getElementById('scenarioCategory').textContent = current.category;
    document.getElementById('scenarioTitle').textContent = current.title;
    document.getElementById('scenarioDescription').textContent = current.scenario;
    document.getElementById('scenarioQuestion').textContent = current.question;
    
    // æ›´æ–°è¿›åº¦
    document.getElementById('trainingProgress').textContent = 
        `åœºæ™¯ ${currentTraining.currentQuestion + 1} / ${currentTraining.questions.length}`;
    
    // ç”Ÿæˆé€‰é¡¹æŒ‰é’®
    const optionsContainer = document.getElementById('scenarioOptions');
    optionsContainer.innerHTML = '';
    
    // éšæœºæ‰“ä¹±é€‰é¡¹é¡ºåº
    const shuffledOptions = [...current.options].sort(() => Math.random() - 0.5);
    
    shuffledOptions.forEach((option, index) => {
        const btn = document.createElement('button');
        btn.className = 'scenario-option';
        btn.textContent = option.text;
        btn.onclick = () => selectOption(option, btn);
        optionsContainer.appendChild(btn);
    });
    
    // éšè—ç»“æœåŒºåŸŸå’Œä¸‹ä¸€é¢˜æŒ‰é’®
    document.getElementById('scenarioResult').style.display = 'none';
    document.getElementById('nextScenarioBtn').style.display = 'none';
    
    // éšè—çŸ¥é“/ä¸çŸ¥é“æŒ‰é’®
    document.getElementById('btnKnow').style.display = 'none';
    document.getElementById('btnForget').style.display = 'none';
    
    // æ»šåŠ¨åˆ°é¡¶éƒ¨
    const scenarioCard = document.querySelector('.scenario-card');
    if (scenarioCard) scenarioCard.scrollTop = 0;
}

// ==================== é€‰é¡¹é€‰æ‹© ====================
function selectOption(option, btn) {
    // ç¦ç”¨æ‰€æœ‰é€‰é¡¹
    const allOptions = document.querySelectorAll('.scenario-option');
    allOptions.forEach(opt => {
        opt.disabled = true;
        opt.classList.add('disabled');
    });
    
    // æ ‡è®°é€‰æ‹©å’Œæ­£ç¡®ç­”æ¡ˆ
    if (option.correct) {
        btn.classList.add('correct');
        currentTraining.correctCount++;
        exploitData.scenarioStats.correct++;
        exploitData.scenarioStats.streak++;
        if (exploitData.scenarioStats.streak > exploitData.scenarioStats.maxStreak) {
            exploitData.scenarioStats.maxStreak = exploitData.scenarioStats.streak;
        }
    } else {
        btn.classList.add('wrong');
        currentTraining.wrongCount++;
        exploitData.scenarioStats.streak = 0;
        
        // æ˜¾ç¤ºæ­£ç¡®ç­”æ¡ˆ
        allOptions.forEach(opt => {
            const current = currentTraining.questions[currentTraining.currentQuestion];
            const correctOption = current.options.find(o => o.correct);
            if (opt.textContent === correctOption.text) {
                opt.classList.add('correct');
            }
        });
    }
    
    exploitData.scenarioStats.total++;
    
    // æ˜¾ç¤ºè§£é‡Š
    const resultDiv = document.getElementById('scenarioResult');
    resultDiv.style.display = 'block';
    resultDiv.innerHTML = `
        <div class="result-icon">${option.correct ? 'âœ…' : 'âŒ'}</div>
        <div class="result-text">${option.explanation}</div>
        <div class="exploit-type">å‰¥å‰Šç±»å‹: ${currentTraining.questions[currentTraining.currentQuestion].exploitType}</div>
    `;
    
    // æ˜¾ç¤ºä¸‹ä¸€é¢˜æŒ‰é’®
    document.getElementById('nextScenarioBtn').style.display = 'block';
}

// ==================== å¡ç‰‡ç¿»è½¬ ====================
function flipCard() {
    if (currentTraining.flipped) return;
    if (currentTraining.mode === 'scenarios') return; // åœºæ™¯æ¨¡å¼ä¸éœ€è¦ç¿»è½¬
    
    const card = document.getElementById('trainingCard');
    card.classList.add('flipped');
    currentTraining.flipped = true;
    
    // æ˜¾ç¤ºæŒ‰é’®
    document.getElementById('btnKnow').style.display = 'block';
    document.getElementById('btnForget').style.display = 'block';
    
    // é‡ç½®ç­”æ¡ˆåŒºåŸŸæ»šåŠ¨ä½ç½®åˆ°é¡¶éƒ¨
    const backCard = document.querySelector('.flip-card-back');
    if (backCard) backCard.scrollTop = 0;
}

// ==================== å›ç­”å¤„ç† ====================
function answerKnow() {
    if (!currentTraining.flipped) return;
    
    currentTraining.correctCount++;
    
    // æ›´æ–°è¯¥é˜¶æ®µåˆ†æ•°
    const phaseId = currentTraining.questions[currentTraining.currentQuestion].phase.id;
    exploitData.phaseScores[phaseId - 1] = Math.min(100, exploitData.phaseScores[phaseId - 1] + 3);
    
    nextQuestion();
}

function answerForget() {
    if (!currentTraining.flipped) return;
    
    currentTraining.wrongCount++;
    
    // è¯¥é˜¶æ®µåˆ†æ•°ç•¥å¾®å‡å°‘
    const phaseId = currentTraining.questions[currentTraining.currentQuestion].phase.id;
    exploitData.phaseScores[phaseId - 1] = Math.max(0, exploitData.phaseScores[phaseId - 1] - 1);
    
    nextQuestion();
}

function nextQuestion() {
    currentTraining.currentQuestion++;
    
    if (currentTraining.mode === 'scenarios') {
        showScenario();
    } else {
        showQuestion();
    }
}

function nextScenario() {
    currentTraining.currentQuestion++;
    showScenario();
}

// ==================== å®Œæˆè®­ç»ƒ ====================
function finishTraining() {
    stopTimer();
    
    // æ›´æ–°æ•°æ®
    exploitData.totalCount++;
    exploitData.todayCount++;
    exploitData.lastTrainingDate = new Date().toDateString();
    
    const elapsed = Math.floor((Date.now() - currentTraining.startTime) / 1000);
    exploitData.totalTime += elapsed;
    
    // æ£€æŸ¥æˆå°±
    checkAchievements();
    
    saveExploitData();
    
    // æ˜¾ç¤ºåº†ç¥
    showCelebration();
}

// ==================== åº†ç¥æ˜¾ç¤º ====================
function showCelebration() {
    const count = exploitData.totalCount;
    let title = 'è®­ç»ƒå®Œæˆï¼';
    let text = `å®Œæˆç¬¬${count}æ¬¡å‰¥å‰Šè®­ç»ƒ`;
    
    // æ£€æŸ¥é‡Œç¨‹ç¢‘
    if (count === 1) {
        title = 'ğŸ¯ å¼€å¯å‰¥å‰Šä¹‹æ—…ï¼';
        text = 'ç¬¬ä¸€æ¬¡å‰¥å‰Šè®­ç»ƒï¼ŒæŒæ¡å¯¹æ‰‹çš„å¼±ç‚¹ï¼';
    } else if (count === 10) {
        title = 'âš”ï¸ å‰¥å‰Šå…¥é—¨ï¼';
        text = 'å®Œæˆ10æ¬¡è®­ç»ƒï¼Œå¼€å§‹çœ‹ç©¿å¯¹æ‰‹ï¼';
    } else if (count === 50) {
        title = 'ğŸ¦ å‰¥å‰Šé«˜æ‰‹ï¼';
        text = 'å®Œæˆ50æ¬¡è®­ç»ƒï¼Œå‰¥å‰Šç­–ç•¥å¼€å§‹å†…åŒ–ï¼';
    } else if (count === 100) {
        title = 'ğŸ‘‘ å‰¥å‰Šä¸“å®¶ï¼';
        text = '100æ¬¡è®­ç»ƒï¼ä½ å·²ç»æ˜¯å‰¥å‰Šé«˜æ‰‹äº†ï¼';
    } else if (count === 200) {
        title = 'ğŸ† å‰¥å‰Šå¤§å¸ˆï¼';
        text = '200æ¬¡è®­ç»ƒï¼GTO+å‰¥å‰ŠåŒä¿®å®Œæˆï¼';
    }
    
    const accuracy = Math.round((currentTraining.correctCount / currentTraining.questions.length) * 100);
    text += `\næœ¬æ¬¡å‡†ç¡®ç‡ï¼š${accuracy}%`;
    
    if (currentTraining.mode === 'scenarios') {
        text += `\nå½“å‰è¿èƒœï¼š${exploitData.scenarioStats.streak}`;
    }
    
    document.getElementById('celebrationTitle').textContent = title;
    document.getElementById('celebrationText').textContent = text;
    document.getElementById('celebration').classList.add('show');
}

function closeCelebration() {
    document.getElementById('celebration').classList.remove('show');
    switchPage('home');
}

// ==================== æˆå°±æ£€æŸ¥ ====================
function checkAchievements() {
    EXPLOIT_ACHIEVEMENTS.forEach(achievement => {
        if (exploitData.achievements.includes(achievement.id)) return;
        
        if (achievement.type === 'streak') {
            if (exploitData.scenarioStats.maxStreak >= achievement.requirement) {
                exploitData.achievements.push(achievement.id);
            }
        } else if (achievement.type === 'all') {
            // æ£€æŸ¥æ‰€æœ‰ç±»å‹æ˜¯å¦éƒ½è¾¾æ ‡
            const allMet = Object.values(exploitData.categoryScores).every(
                score => score >= achievement.requirement
            );
            if (allMet) {
                exploitData.achievements.push(achievement.id);
            }
        } else {
            if (exploitData.totalCount >= achievement.requirement) {
                exploitData.achievements.push(achievement.id);
            }
        }
    });
}

// ==================== ç»Ÿè®¡é¡µé¢ ====================
function updateStatsPage() {
    // æ›´æ–°æˆå°±
    const achievementsList = document.getElementById('achievementsList');
    if (achievementsList) {
        achievementsList.innerHTML = '';
        
        EXPLOIT_ACHIEVEMENTS.forEach(achievement => {
            const unlocked = exploitData.achievements.includes(achievement.id);
            const div = document.createElement('div');
            div.className = 'achievement ' + (unlocked ? 'unlocked' : 'locked');
            div.innerHTML = `
                <div class="achievement-icon">${achievement.icon}</div>
                <div class="achievement-title">${achievement.title}</div>
                <div class="achievement-desc">${achievement.desc}</div>
            `;
            achievementsList.appendChild(div);
        });
    }
    
    // æ›´æ–°é˜¶æ®µç†Ÿç»ƒåº¦
    const phaseList = document.getElementById('phaseList');
    if (phaseList) {
        phaseList.innerHTML = '';
        
        EXPLOIT_PHASES.forEach((phase, index) => {
            const score = exploitData.phaseScores[index];
            const div = document.createElement('div');
            div.className = 'phase-item' + (phase.warning ? ' warning' : '');
            div.innerHTML = `
                <div class="phase-item-header">
                    <div class="phase-item-title">${phase.icon} ${phase.title}</div>
                    <div class="phase-score">${score}%</div>
                </div>
                <div class="phase-progress-bar">
                    <div class="phase-progress-fill" style="width: ${score}%"></div>
                </div>
            `;
            phaseList.appendChild(div);
        });
    }
    
    // æ›´æ–°åœºæ™¯ç»Ÿè®¡
    const scenarioStatsEl = document.getElementById('scenarioStatsDisplay');
    if (scenarioStatsEl) {
        const accuracy = exploitData.scenarioStats.total > 0 
            ? Math.round((exploitData.scenarioStats.correct / exploitData.scenarioStats.total) * 100)
            : 0;
        scenarioStatsEl.innerHTML = `
            <div class="scenario-stat">
                <span class="stat-label">æ€»åœºæ™¯æ•°</span>
                <span class="stat-value">${exploitData.scenarioStats.total}</span>
            </div>
            <div class="scenario-stat">
                <span class="stat-label">æ­£ç¡®ç‡</span>
                <span class="stat-value">${accuracy}%</span>
            </div>
            <div class="scenario-stat">
                <span class="stat-label">æœ€é•¿è¿èƒœ</span>
                <span class="stat-value">${exploitData.scenarioStats.maxStreak}</span>
            </div>
        `;
    }
}

// ==================== è®¾ç½®é¡µé¢ ====================
function updateSettingsPage() {
    const totalCountEl = document.getElementById('settingsTotalCount');
    if (totalCountEl) {
        totalCountEl.textContent = exploitData.totalCount;
    }
    
    const totalTimeEl = document.getElementById('totalTime');
    if (totalTimeEl) {
        const minutes = Math.floor(exploitData.totalTime / 60);
        totalTimeEl.textContent = minutes + 'åˆ†é’Ÿ';
    }
}

// ==================== è®¡æ—¶å™¨ ====================
function startTimer() {
    currentTraining.startTime = Date.now();
    currentTraining.timerInterval = setInterval(updateTimer, 1000);
}

function updateTimer() {
    const elapsed = Math.floor((Date.now() - currentTraining.startTime) / 1000);
    const minutes = Math.floor(elapsed / 60);
    const seconds = elapsed % 60;
    
    const timerEl = document.getElementById('timer');
    if (timerEl) {
        timerEl.textContent = 
            String(minutes).padStart(2, '0') + ':' + String(seconds).padStart(2, '0');
        
        // å¦‚æœè¶…è¿‡60ç§’ï¼Œæ ‡çº¢æé†’
        if (elapsed > 60) {
            timerEl.classList.add('warning');
        } else {
            timerEl.classList.remove('warning');
        }
    }
}

function stopTimer() {
    if (currentTraining.timerInterval) {
        clearInterval(currentTraining.timerInterval);
        currentTraining.timerInterval = null;
    }
}

// ==================== é€€å‡ºå’Œé‡ç½® ====================
function exitTraining() {
    if (confirm('ç¡®å®šè¦é€€å‡ºè®­ç»ƒå—ï¼Ÿè¿›åº¦å°†ä¸ä¼šä¿å­˜ã€‚')) {
        stopTimer();
        switchPage('home');
    }
}

function resetData() {
    if (confirm('âš ï¸ è­¦å‘Šï¼šæ­¤æ“ä½œå°†æ¸…é™¤æ‰€æœ‰è®­ç»ƒæ•°æ®ï¼Œæ— æ³•æ¢å¤ï¼\n\nç¡®å®šè¦é‡ç½®å—ï¼Ÿ')) {
        if (confirm('å†æ¬¡ç¡®è®¤ï¼šçœŸçš„è¦æ¸…é™¤æ‰€æœ‰æ•°æ®å—ï¼Ÿ')) {
            exploitData = {
                totalCount: 0,
                todayCount: 0,
                lastTrainingDate: null,
                consecutiveDays: 0,
                phaseScores: [0, 0, 0, 0, 0, 0],
                categoryScores: {
                    fish: 0,
                    nit: 0,
                    lag: 0,
                    maniac: 0,
                    ante: 0,
                    deep: 0
                },
                scenarioStats: {
                    total: 0,
                    correct: 0,
                    streak: 0,
                    maxStreak: 0
                },
                totalTime: 0,
                achievements: []
            };
            saveExploitData();
            updateHomePage();
            updateStatsPage();
            updateSettingsPage();
            alert('æ•°æ®å·²é‡ç½®ï¼');
        }
    }
}

// ==================== é¡µé¢åŠ è½½ ====================
window.addEventListener('load', () => {
    init();
    
    // æ³¨å†ŒService Worker
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('exploit_sw.js').then(() => {
            console.log('Exploit Trainer Service Worker registered');
        }).catch(err => {
            console.log('Service Worker registration failed:', err);
        });
    }
});

// é˜²æ­¢æ„å¤–å…³é—­
window.addEventListener('beforeunload', (e) => {
    if (currentTraining.timerInterval) {
        e.preventDefault();
        e.returnValue = '';
    }
});

